(self.webpackChunkmguelpa_lab_iv_tp_clinica=self.webpackChunkmguelpa_lab_iv_tp_clinica||[]).push([[592],{8406:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});var a=r(7368),n=r(1462),s=r(1116);const i=function(e){return{"is-valid":e}};let o=(()=>{class e{constructor(){this.input="",this.rdmKey="",this.src="",this.valid=!1,this.isValidCaptcha=new a.vpe}ngOnInit(){this.refreshCaptcha()}validateCaptcha(){this.valid=this.input===this.rdmKey,this.isValidCaptcha.emit(this.valid)}refreshCaptcha(){this.input="",this.src="",this.valid=!1,this.isValidCaptcha.emit(this.valid),this.rdmKey=this.randomString(6,"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),this.generateCaptcha(this.rdmKey)}randomString(e,t){for(var r="",a=e;a>0;--a)r+=t[Math.floor(Math.random()*t.length)];return r}generateCaptcha(e){const t=document.createElement("canvas"),r=t.getContext("2d");r.font="60px 'Londrina Sketch'",r.fillStyle="red",r.fillText(e,100,100),r.fillRect(200,150,150,75);const a=t.toDataURL();this.src=a}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-custom-captcha"]],outputs:{isValidCaptcha:"isValidCaptcha"},decls:5,vars:5,consts:[["id","captcha",2,"border","1px solid rgb(208, 208, 208)","border-radius","5px"],["id","one","type","text","name","",1,"form-control",3,"ngClass","ngModel","ngModelChange","keyup"],["id","two",2,"height","80px",3,"src"],["id","three",1,"btn","btn-outline-info",3,"click"],[1,"fas","fa-sync-alt"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"input",1),a.NdJ("ngModelChange",function(e){return t.input=e})("keyup",function(){return t.validateCaptcha()}),a.qZA(),a._UZ(2,"img",2),a.TgZ(3,"button",3),a.NdJ("click",function(){return t.refreshCaptcha()}),a._UZ(4,"i",4),a.qZA(),a.qZA()),2&e&&(a.xp6(1),a.Q6J("ngClass",a.VKq(3,i,t.valid))("ngModel",t.input),a.xp6(1),a.Q6J("src",t.src,a.LSH))},directives:[n.Fj,s.mk,n.JJ,n.On],styles:["#captcha[_ngcontent-%COMP%]{display:grid;grid-template-columns:5px auto 5px auto 5px;grid-template-rows:5px auto 5px auto 5px}#one[_ngcontent-%COMP%]{grid-column:2;grid-row:2}#two[_ngcontent-%COMP%]{grid-column:2/span 3;grid-row:4}#three[_ngcontent-%COMP%]{grid-row:2}#four[_ngcontent-%COMP%], #three[_ngcontent-%COMP%]{grid-column:4}#four[_ngcontent-%COMP%]{grid-row:4}"]}),e})()},108:(e,t,r)=>{"use strict";r.d(t,{n:()=>n});var a=r(7368);let n=(()=>{class e{constructor(){this.errors={required:{message:"Campo requerido.",class:"INVALID"},minRange:{message:"Este campo debe tener por lo menos 3 caracteres.",class:"INVALID"},maxRange:{message:"Este campo debe tener un maximo de 15 caracteres.",class:"INVALID"},whiteSpaces:{message:"Este campo no debe contener espacios.",class:"INVALID"},notNumeric:{message:"Este campo no puede contener caracteres num\xe9ricos.",class:"INVALID"},pattern:{message:"Minimo 8 caracteres y debe ser alfanum\xe9rica.",class:"INVALID"},age:{message:"Formato incorrecto.",class:"INVALID"},dni:{message:"Formato DNI incorrecto.",class:"INVALID"},min:{message:"Debajo del m\xednimo permitido.",class:"INVALID"},max:{message:"Supero el m\xe1ximo permitido.",class:"INVALID"},confirm:{message:"Las claves ingresadas no coinciden.",class:"INVALID"},email:{message:"Este campo debe ser un email v\xe1lido.",class:"INVALID"},succeeded:{message:"",class:"VALID"},extension:{message:"Formato de archivo incorrecto.",class:"INVALID"}}}getState(e){return this.errors[e]}setState(e,t,r){let a=t.replace(/^.+[.]/,"");e[a].message=r.message,e[a].class=r.class}clearState(e,t){let r=t.replace(/^.+[.]/,"");e[r].message="",e[r].class=""}validateNames(e){var t,r,a;return(null===(t=e.value)||void 0===t?void 0:t.length)<3?{minRange:!0}:(null===(r=e.value)||void 0===r?void 0:r.length)>15?{maxRange:!0}:(null===(a=e.value)||void 0===a?void 0:a.includes(" "))?{whiteSpaces:!0}:/\d/.test(e.value)?{notNumeric:!0}:null}validateObraSocial(e){var t,r;return(null===(t=e.value)||void 0===t?void 0:t.length)<4?{minRange:!0}:(null===(r=e.value)||void 0===r?void 0:r.length)>8?{maxRange:!0}:/\d/.test(e.value)?{notNumeric:!0}:null}validateFileExtension(e){return/\.(jpe?g|png)$/i.test(e.value)?null:{extension:!0}}validateDNI(e){return!/^\d+$/.test(e.value)||e.value.length<7||e.value.length>9?{dni:!0}:null}validateAge(e){return/^\d+$/.test(e.value)?null:{age:!0}}passwordCheck(e){const t=e.get("password"),r=e.get("confirm");if(t&&r){if((r.dirty||r.touched)&&""===r.value)return{required:!0};if(t.dirty&&""===r.value)return{required:!0};if(t.dirty&&r.dirty&&r.value!==t.value)return{confirm:!0}}return null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7247:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var a=r(6304),n=r(1225),s=r(7727),i=r(7368),o=r(3971);let c=(()=>{class e{constructor(e){this.db=e}getClinicalRecords(){return this.db.collection("/clinical-records",e=>e.orderBy("date","asc")).valueChanges().pipe((0,s.K)(this.handleError))}getClinicalRecordsByPatientId(e){return this.db.collection("clinical-records"),this.db.collection("/appointments",t=>t.where("patient.uid","==",e)).valueChanges().pipe((0,s.K)(this.handleError))}addClinicalRecord(e){var t=this;return(0,a.Z)(function*(){return t.db.collection("clinical-records").add(e).then(e=>{t.db.collection("clinical-records").doc(e.id).update({uid:e.id})},e=>t.handleError(e)).finally()})()}updateClinicalRecord(e){var t=this;return(0,a.Z)(function*(){return t.db.collection("clinical-record").doc(e.uid).set(e).then(e=>{},e=>{t.handleError(e)})})()}handleError(e){let t="";return t=e.error instanceof ErrorEvent?`An error ocurred: ${e.error.message}`:`Server returned code: ${e.status}, error message is: ${e.message}`,(0,n._)(t)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o.ST))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},4054:(e,t,r)=>{"use strict";r.d(t,{M:()=>c});var a=r(1225),n=r(6599),s=r(7727),i=r(7368),o=r(2693);let c=(()=>{class e{constructor(e){this.http=e,this.url="https://mguelpa-lab-iv-tp-clinica.herokuapp.com/mailer",this.countriesUrl="https://restcountries.eu/rest/v2"}getCountries(){return this.http.get(this.countriesUrl).pipe((0,n.b)(e=>console.log(e)),(0,s.K)(this.handleError))}sendMessage(e){return this.http.post(this.url,e).pipe((0,n.b)(e=>console.log(e)),(0,s.K)(this.handleError))}sendMessage2(e){return this.http.post(this.url,e)}handleError(e){let t="";return t=e.error instanceof ErrorEvent?`An error ocurred: ${e.error.message}`:`Server returned code: ${e.status}, error message is: ${e.message}`,(0,a._)(t)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o.eN))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);