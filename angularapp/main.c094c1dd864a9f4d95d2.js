(self.webpackChunkmguelpa_lab_iv_tp_clinica=self.webpackChunkmguelpa_lab_iv_tp_clinica||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},1116:(t,e,n)=>{"use strict";n.d(e,{mr:()=>_,Ov:()=>_t,ez:()=>Et,K0:()=>u,uU:()=>wt,Do:()=>S,Nd:()=>St,V_:()=>h,Ye:()=>T,S$:()=>v,mk:()=>ut,sg:()=>lt,O5:()=>dt,b0:()=>w,lw:()=>c,EM:()=>At,JF:()=>Ot,PM:()=>xt,w_:()=>a,bD:()=>Ct,q:()=>s,Mx:()=>at,HT:()=>o});var r=n(7368);let i=null;function s(){return i}function o(t){i||(i=t)}class a{}const u=new r.OlP("DocumentToken");let c=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:l,token:t,providedIn:"platform"}),t})();function l(){return(0,r.LFG)(d)}const h=new r.OlP("Location Initialized");let d=(()=>{class t extends c{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){f()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){f()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(u))},t.\u0275prov=(0,r.Yz7)({factory:p,token:t,providedIn:"platform"}),t})();function f(){return!!window.history.pushState}function p(){return new d((0,r.LFG)(u))}function g(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function m(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function y(t){return t&&"?"!==t[0]?"?"+t:t}let v=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:b,token:t,providedIn:"root"}),t})();function b(t){const e=(0,r.LFG)(u).location;return new w((0,r.LFG)(c),e&&e.origin||"")}const _=new r.OlP("appBaseHref");let w=(()=>{class t extends v{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return g(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(c),r.LFG(_,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),S=(()=>{class t extends v{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=g(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(c),r.LFG(_,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),T=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=m(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+y(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(v),r.LFG(c))},t.normalizeQueryParams=y,t.joinWithSlash=g,t.stripTrailingSlash=m,t.\u0275prov=(0,r.Yz7)({factory:E,token:t,providedIn:"root"}),t})();function E(){return new T((0,r.LFG)(v),(0,r.LFG)(c))}function C(t){return t.replace(/\/index.html$/,"")}var x=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),A=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),k=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),I=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),O=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function N(t,e){return M((0,r.cg1)(t)[r.wAp.DateFormat],e)}function D(t,e){return M((0,r.cg1)(t)[r.wAp.TimeFormat],e)}function P(t,e){return M((0,r.cg1)(t)[r.wAp.DateTimeFormat],e)}function R(t,e){const n=(0,r.cg1)(t),i=n[r.wAp.NumberSymbols][e];if(void 0===i){if(e===O.CurrencyDecimal)return n[r.wAp.NumberSymbols][O.Decimal];if(e===O.CurrencyGroup)return n[r.wAp.NumberSymbols][O.Group]}return i}const F=r.kL8;function L(t){if(!t[r.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function M(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function U(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const V=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,j={},q=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var B=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),G=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),z=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function Z(t,e,n,r){let i=function(t){if(it(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[e,n=1,r=1]=t.split("-").map(t=>+t);return H(e,n-1,r)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let n;if(n=t.match(V))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),c=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return s.call(e,o,a,u,c),e}(n)}const e=new Date(t);if(!it(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=$(n,e)||e;let s,o=[];for(;e;){if(s=q.exec(e),!s){o.push(e);break}{o=o.concat(s.slice(1));const t=o.pop();if(!t)break;e=t}}let a=i.getTimezoneOffset();r&&(a=rt(r,a),i=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(rt(e,r)-r))}(i,r));let u="";return o.forEach(t=>{const e=function(t){if(nt[t])return nt[t];let e;switch(t){case"G":case"GG":case"GGG":e=Y(z.Eras,k.Abbreviated);break;case"GGGG":e=Y(z.Eras,k.Wide);break;case"GGGGG":e=Y(z.Eras,k.Narrow);break;case"y":e=J(G.FullYear,1,0,!1,!0);break;case"yy":e=J(G.FullYear,2,0,!0,!0);break;case"yyy":e=J(G.FullYear,3,0,!1,!0);break;case"yyyy":e=J(G.FullYear,4,0,!1,!0);break;case"Y":e=et(1);break;case"YY":e=et(2,!0);break;case"YYY":e=et(3);break;case"YYYY":e=et(4);break;case"M":case"L":e=J(G.Month,1,1);break;case"MM":case"LL":e=J(G.Month,2,1);break;case"MMM":e=Y(z.Months,k.Abbreviated);break;case"MMMM":e=Y(z.Months,k.Wide);break;case"MMMMM":e=Y(z.Months,k.Narrow);break;case"LLL":e=Y(z.Months,k.Abbreviated,A.Standalone);break;case"LLLL":e=Y(z.Months,k.Wide,A.Standalone);break;case"LLLLL":e=Y(z.Months,k.Narrow,A.Standalone);break;case"w":e=tt(1);break;case"ww":e=tt(2);break;case"W":e=tt(1,!0);break;case"d":e=J(G.Date,1);break;case"dd":e=J(G.Date,2);break;case"c":case"cc":e=J(G.Day,1);break;case"ccc":e=Y(z.Days,k.Abbreviated,A.Standalone);break;case"cccc":e=Y(z.Days,k.Wide,A.Standalone);break;case"ccccc":e=Y(z.Days,k.Narrow,A.Standalone);break;case"cccccc":e=Y(z.Days,k.Short,A.Standalone);break;case"E":case"EE":case"EEE":e=Y(z.Days,k.Abbreviated);break;case"EEEE":e=Y(z.Days,k.Wide);break;case"EEEEE":e=Y(z.Days,k.Narrow);break;case"EEEEEE":e=Y(z.Days,k.Short);break;case"a":case"aa":case"aaa":e=Y(z.DayPeriods,k.Abbreviated);break;case"aaaa":e=Y(z.DayPeriods,k.Wide);break;case"aaaaa":e=Y(z.DayPeriods,k.Narrow);break;case"b":case"bb":case"bbb":e=Y(z.DayPeriods,k.Abbreviated,A.Standalone,!0);break;case"bbbb":e=Y(z.DayPeriods,k.Wide,A.Standalone,!0);break;case"bbbbb":e=Y(z.DayPeriods,k.Narrow,A.Standalone,!0);break;case"B":case"BB":case"BBB":e=Y(z.DayPeriods,k.Abbreviated,A.Format,!0);break;case"BBBB":e=Y(z.DayPeriods,k.Wide,A.Format,!0);break;case"BBBBB":e=Y(z.DayPeriods,k.Narrow,A.Format,!0);break;case"h":e=J(G.Hours,1,-12);break;case"hh":e=J(G.Hours,2,-12);break;case"H":e=J(G.Hours,1);break;case"HH":e=J(G.Hours,2);break;case"m":e=J(G.Minutes,1);break;case"mm":e=J(G.Minutes,2);break;case"s":e=J(G.Seconds,1);break;case"ss":e=J(G.Seconds,2);break;case"S":e=J(G.FractionalSeconds,1);break;case"SS":e=J(G.FractionalSeconds,2);break;case"SSS":e=J(G.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=W(B.Short);break;case"ZZZZZ":e=W(B.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=W(B.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=W(B.Long);break;default:return null}return nt[t]=e,e}(t);u+=e?e(i,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function H(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function $(t,e){const n=function(t){return(0,r.cg1)(t)[r.wAp.LocaleId]}(t);if(j[n]=j[n]||{},j[n][e])return j[n][e];let i="";switch(e){case"shortDate":i=N(t,I.Short);break;case"mediumDate":i=N(t,I.Medium);break;case"longDate":i=N(t,I.Long);break;case"fullDate":i=N(t,I.Full);break;case"shortTime":i=D(t,I.Short);break;case"mediumTime":i=D(t,I.Medium);break;case"longTime":i=D(t,I.Long);break;case"fullTime":i=D(t,I.Full);break;case"short":const e=$(t,"shortTime"),n=$(t,"shortDate");i=K(P(t,I.Short),[e,n]);break;case"medium":const r=$(t,"mediumTime"),s=$(t,"mediumDate");i=K(P(t,I.Medium),[r,s]);break;case"long":const o=$(t,"longTime"),a=$(t,"longDate");i=K(P(t,I.Long),[o,a]);break;case"full":const u=$(t,"fullTime"),c=$(t,"fullDate");i=K(P(t,I.Full),[u,c])}return i&&(j[n][e]=i),i}function K(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function Q(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.substr(o.length-e)),s+o}function J(t,e,n=0,r=!1,i=!1){return function(s,o){let a=function(t,e){switch(t){case G.FullYear:return e.getFullYear();case G.Month:return e.getMonth();case G.Date:return e.getDate();case G.Hours:return e.getHours();case G.Minutes:return e.getMinutes();case G.Seconds:return e.getSeconds();case G.FractionalSeconds:return e.getMilliseconds();case G.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((n>0||a>-n)&&(a+=n),t===G.Hours)0===a&&-12===n&&(a=12);else if(t===G.FractionalSeconds)return u=e,Q(a,3).substr(0,u);var u;const c=R(o,O.MinusSign);return Q(a,e,c,r,i)}}function Y(t,e,n=A.Format,i=!1){return function(s,o){return function(t,e,n,i,s,o){switch(n){case z.Months:return function(t,e,n){const i=(0,r.cg1)(t),s=M([i[r.wAp.MonthsFormat],i[r.wAp.MonthsStandalone]],e);return M(s,n)}(e,s,i)[t.getMonth()];case z.Days:return function(t,e,n){const i=(0,r.cg1)(t),s=M([i[r.wAp.DaysFormat],i[r.wAp.DaysStandalone]],e);return M(s,n)}(e,s,i)[t.getDay()];case z.DayPeriods:const a=t.getHours(),u=t.getMinutes();if(o){const t=function(t){const e=(0,r.cg1)(t);return L(e),(e[r.wAp.ExtraData][2]||[]).map(t=>"string"==typeof t?U(t):[U(t[0]),U(t[1])])}(e),n=function(t,e,n){const i=(0,r.cg1)(t);L(i);const s=M([i[r.wAp.ExtraData][0],i[r.wAp.ExtraData][1]],e)||[];return M(s,n)||[]}(e,s,i),o=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=a>=e.hours&&u>=e.minutes,i=a<n.hours||a===n.hours&&u<n.minutes;if(e.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(t.hours===a&&t.minutes===u)return!0;return!1});if(-1!==o)return n[o]}return function(t,e,n){const i=(0,r.cg1)(t),s=M([i[r.wAp.DayPeriodsFormat],i[r.wAp.DayPeriodsStandalone]],e);return M(s,n)}(e,s,i)[a<12?0:1];case z.Eras:return function(t,e){return M((0,r.cg1)(t)[r.wAp.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(s,o,t,e,n,i)}}function W(t){return function(e,n,r){const i=-1*r,s=R(n,O.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case B.Short:return(i>=0?"+":"")+Q(o,2,s)+Q(Math.abs(i%60),2,s);case B.ShortGMT:return"GMT"+(i>=0?"+":"")+Q(o,1,s);case B.Long:return"GMT"+(i>=0?"+":"")+Q(o,2,s)+":"+Q(Math.abs(i%60),2,s);case B.Extended:return 0===r?"Z":(i>=0?"+":"")+Q(o,2,s)+":"+Q(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}function X(t){return H(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function tt(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=X(n),e=function(t){const e=H(t,0,1).getDay();return H(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),r=t.getTime()-e.getTime();i=1+Math.round(r/6048e5)}return Q(i,t,R(r,O.MinusSign))}}function et(t,e=!1){return function(n,r){return Q(X(n).getFullYear(),t,R(r,O.MinusSign),e)}}const nt={};function rt(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function it(t){return t instanceof Date&&!isNaN(t.valueOf())}class st{}let ot=(()=>{class t extends st{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(F(e||this.locale)(t)){case x.Zero:return"zero";case x.One:return"one";case x.Two:return"two";case x.Few:return"few";case x.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function at(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let ut=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,r.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,r.AaK)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.ZZ4),r.Y36(r.aQg),r.Y36(r.SBq),r.Y36(r.Qsj))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class ct{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let lt=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ct(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new ht(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new ht(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class ht{constructor(t,e){this.record=t,this.view=e}}let dt=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new ft,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pt("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pt("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class ft{constructor(){this.$implicit=null,this.ngIf=null}}function pt(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}function gt(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,r.AaK)(t)}'`)}class mt{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class yt{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const vt=new yt,bt=new mt;let _t=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if((0,r.QGY)(e))return vt;if((0,r.F4k)(e))return bt;throw gt(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO,16))},t.\u0275pipe=r.Yjl({name:"async",type:t,pure:!1}),t})(),wt=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",r,i){if(null==e||""===e||e!=e)return null;try{return Z(e,n,i||this.locale,r)}catch(s){throw gt(t,s.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.soG,16))},t.\u0275pipe=r.Yjl({name:"date",type:t,pure:!0}),t})(),St=(()=>{class t{constructor(t){this.differs=t,this.keyValues=[]}transform(t,e=Tt){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const n=this.differ.diff(t);return n&&(this.keyValues=[],n.forEachItem(t=>{this.keyValues.push({key:t.key,value:t.currentValue})}),this.keyValues.sort(e)),this.keyValues}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.aQg,16))},t.\u0275pipe=r.Yjl({name:"keyvalue",type:t,pure:!1}),t})();function Tt(t,e){const n=t.key,r=e.key;if(n===r)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(null===n)return 1;if(null===r)return-1;if("string"==typeof n&&"string"==typeof r)return n<r?-1:1;if("number"==typeof n&&"number"==typeof r)return n-r;if("boolean"==typeof n&&"boolean"==typeof r)return n<r?-1:1;const i=String(n),s=String(r);return i==s?0:i<s?-1:1}let Et=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:st,useClass:ot}]}),t})();const Ct="browser";function xt(t){return"server"===t}let At=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new kt((0,r.LFG)(u),window)}),t})();class kt{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=It(this.window.history)||It(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function It(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Ot{}},2693:(t,e,n)=>{"use strict";n.d(e,{eN:()=>k,JF:()=>q});var r=n(1116),i=n(7368),s=n(878),o=n(8318),a=n(436),u=n(3835),c=n(9996);class l{}class h{}class d{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof d?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new d;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof d?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class f{encodeKey(t){return p(t)}encodeValue(t){return p(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function p(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function g(t){return`${t}`}class m{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new f,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,s]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],o=n.get(i)||[];o.push(s),n.set(i,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new m({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(g(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(g(t.value));-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class y{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function v(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function b(t){return"undefined"!=typeof Blob&&t instanceof Blob}function _(t){return"undefined"!=typeof FormData&&t instanceof FormData}class w{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new d),this.context||(this.context=new y),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new m,this.urlWithParams=e}serializeBody(){return null===this.body?null:v(this.body)||b(this.body)||_(this.body)||"string"==typeof this.body?this.body:this.body instanceof m?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_(this.body)?null:b(this.body)?this.body.type||null:v(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof m?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,c=t.params||this.params;const l=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),c)),new w(n,r,s,{params:c,headers:u,context:l,reportProgress:a,responseType:i,withCredentials:o})}}var S=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class T{constructor(t,e=200,n="OK"){this.headers=t.headers||new d,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class E extends T{constructor(t={}){super(t),this.type=S.ResponseHeader}clone(t={}){return new E({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class C extends T{constructor(t={}){super(t),this.type=S.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new C({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class x extends T{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function A(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let k=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof w)r=t;else{let i,s;i=n.headers instanceof d?n.headers:new d(n.headers),n.params&&(s=n.params instanceof m?n.params:new m({fromObject:n.params})),r=new w(t,e,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=(0,s.of)(r).pipe((0,a.b)(t=>this.handler.handle(t)));if(t instanceof w||"events"===n.observe)return i;const o=i.pipe((0,u.h)(t=>t instanceof C));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe((0,c.U)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe((0,c.U)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe((0,c.U)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe((0,c.U)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new m).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,A(n,e))}post(t,e,n={}){return this.request("POST",t,A(n,e))}put(t,e,n={}){return this.request("PUT",t,A(n,e))}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(l))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();class I{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const O=new i.OlP("HTTP_INTERCEPTORS");let N=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();const D=/^\)\]\}',?\n/;let P=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new o.y(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const s=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",s=new d(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new E({headers:s,status:e,statusText:r,url:o}),i},o=()=>{let{headers:r,status:i,statusText:o,url:a}=s(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(D,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new C({body:u,headers:r,status:i,statusText:o,url:a||void 0})),e.complete()):e.error(new x({error:u,headers:r,status:i,statusText:o,url:a||void 0}))},a=t=>{const{url:r}=s(),i=new x({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(s()),u=!0);let i={type:S.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:S.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:S.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(r.JF))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();const R=new i.OlP("XSRF_COOKIE_NAME"),F=new i.OlP("XSRF_HEADER_NAME");class L{}let M=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,r.Mx)(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(r.K0),i.LFG(i.Lbi),i.LFG(R))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})(),U=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(L),i.LFG(F))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})(),V=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(O,[]);this.chain=t.reduceRight((t,e)=>new I(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(h),i.LFG(i.zs3))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})(),j=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:U,useClass:N}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:R,useValue:e.cookieName}:[],e.headerName?{provide:F,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({providers:[U,{provide:O,useExisting:U,multi:!0},{provide:L,useClass:M},{provide:R,useValue:"XSRF-TOKEN"},{provide:F,useValue:"X-XSRF-TOKEN"}]}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({providers:[k,{provide:l,useClass:V},P,{provide:h,useExisting:P}],imports:[[j.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})()},7368:(t,e,n)=>{"use strict";n.d(e,{deG:()=>rn,tb:()=>du,AFp:()=>au,ip1:()=>su,CZH:()=>ou,hGG:()=>sc,z2F:()=>Qu,sBO:()=>sa,Sil:()=>Tu,_Vd:()=>Io,EJc:()=>gu,SBq:()=>Po,qLn:()=>vr,vpe:()=>Ga,gxx:()=>Xi,tBr:()=>Tn,XFs:()=>N,OlP:()=>nn,zs3:()=>ps,ZZ4:()=>Wo,aQg:()=>ta,soG:()=>pu,YKP:()=>ga,v3s:()=>Yu,h0i:()=>pa,PXZ:()=>zu,R0b:()=>xu,FiY:()=>En,Lbi:()=>hu,g9A:()=>lu,Qsj:()=>Lo,FYo:()=>Fo,JOm:()=>wr,Tiy:()=>Uo,q3G:()=>hr,tp0:()=>Cn,EAV:()=>tc,Rgc:()=>la,dDg:()=>Pu,DyG:()=>sn,q4F:()=>jo,GfV:()=>Vo,s_b:()=>ya,ifc:()=>M,eFA:()=>Zu,G48:()=>Bu,Gpc:()=>g,X6Q:()=>qu,_c5:()=>rc,VLi:()=>Lu,c2e:()=>fu,zSh:()=>es,wAp:()=>go,vHH:()=>v,EiD:()=>cr,mCW:()=>Hn,qzn:()=>Fn,JVY:()=>Mn,pB0:()=>qn,eBb:()=>Vn,L6k:()=>Un,LAX:()=>jn,cg1:()=>ho,Tjo:()=>nc,kL8:()=>fo,yhl:()=>Ln,dqk:()=>B,sIi:()=>Es,CqO:()=>Bs,QGY:()=>js,F4k:()=>qs,RDi:()=>xt,AaK:()=>d,z3N:()=>Rn,qOj:()=>ms,TTD:()=>_t,_Bn:()=>xo,xp6:()=>ii,uIk:()=>Is,ekj:()=>Ys,Suo:()=>nu,Xpm:()=>X,lG2:()=>ot,Yz7:()=>S,cJS:()=>T,oAB:()=>rt,Yjl:()=>at,Y36:()=>Ps,_UZ:()=>Us,qZA:()=>Ms,TgZ:()=>Ls,EpF:()=>Vs,n5z:()=>Ye,Ikx:()=>ao,LFG:()=>_n,$8M:()=>Xe,NdJ:()=>Gs,CRH:()=>ru,oxw:()=>Hs,ALo:()=>Ma,lcZ:()=>Ua,xi3:()=>Va,Q6J:()=>Rs,s9C:()=>$s,MGl:()=>Ks,VKq:()=>Da,WLB:()=>Pa,iGM:()=>eu,MAs:()=>Ds,CHM:()=>zt,LSH:()=>dr,kYT:()=>it,YNc:()=>Ns,_uU:()=>no,Oqu:()=>ro,hij:()=>io,AsE:()=>so,HOy:()=>oo});var r=n(5959),i=n(7570),s=n(8318),o=n(1906),a=n(2875),u=n(1564);function c(){return new r.xQ}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function d(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(d).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function f(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const p=l({__forward_ref__:l});function g(t){return t.__forward_ref__=g,t.toString=function(){return d(this())},t}function m(t){return y(t)?t():t}function y(t){return"function"==typeof t&&t.hasOwnProperty(p)&&t.__forward_ref__===g}class v extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function b(t){return"string"==typeof t?t:null==t?"":String(t)}function _(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():b(t)}function w(t,e){const n=e?` in ${e}`:"";throw new v("201",`No provider for ${_(t)} found${n}`)}function S(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function T(t){return{providers:t.providers||[],imports:t.imports||[]}}function E(t){return C(t,A)||C(t,I)}function C(t,e){return t.hasOwnProperty(e)?t[e]:null}function x(t){return t&&(t.hasOwnProperty(k)||t.hasOwnProperty(O))?t[k]:null}const A=l({"\u0275prov":l}),k=l({"\u0275inj":l}),I=l({ngInjectableDef:l}),O=l({ngInjectorDef:l});var N=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let D;function P(t){const e=D;return D=t,e}function R(t,e,n){const r=E(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&N.Optional?null:void 0!==e?e:void w(d(t),"Injector")}function F(t){return{toString:t}.toString()}var L=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),M=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const U="undefined"!=typeof globalThis&&globalThis,V="undefined"!=typeof window&&window,j="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,B=U||q||V||j,G={},z=[],Z=l({"\u0275cmp":l}),H=l({"\u0275dir":l}),$=l({"\u0275pipe":l}),K=l({"\u0275mod":l}),Q=l({"\u0275loc":l}),J=l({"\u0275fac":l}),Y=l({__NG_ELEMENT_ID__:l});let W=0;function X(t){return F(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===L.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||z,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||M.Emulated,id:"c",styles:t.styles||z,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,s=t.pipes;return n.id+=W++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(tt):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(et):null,n})}function tt(t){return ut(t)||function(t){return t[H]||null}(t)}function et(t){return function(t){return t[$]||null}(t)}const nt={};function rt(t){const e={type:t.type,bootstrap:t.bootstrap||z,declarations:t.declarations||z,imports:t.imports||z,exports:t.exports||z,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&F(()=>{nt[t.id]=t.type}),e}function it(t,e){return F(()=>{const n=ct(t,!0);n.declarations=e.declarations||z,n.imports=e.imports||z,n.exports=e.exports||z})}function st(t,e){if(null==t)return G;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const ot=X;function at(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ut(t){return t[Z]||null}function ct(t,e){const n=t[K]||null;if(!n&&!0===e)throw new Error(`Type ${d(t)} does not have '\u0275mod' property.`);return n}const lt=20,ht=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ft(t){return Array.isArray(t)&&!0===t[1]}function pt(t){return 0!=(8&t.flags)}function gt(t){return 2==(2&t.flags)}function mt(t){return 1==(1&t.flags)}function yt(t){return null!==t.template}function vt(t,e){return t.hasOwnProperty(J)?t[J]:null}class bt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function _t(){return wt}function wt(t){return t.type.prototype.ngOnChanges&&(t.setInput=Tt),St}function St(){const t=Et(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===G)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Tt(t,e,n,r){const i=Et(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:G,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new bt(u&&u.currentValue,e,o===G),t[r]=e}function Et(t){return t.__ngSimpleChanges__||null}let Ct;function xt(t){Ct=t}function At(t){return!!t.listen}_t.ngInherit=!0;const kt={createRenderer:(t,e)=>void 0!==Ct?Ct:"undefined"!=typeof document?document:void 0};function It(t){for(;Array.isArray(t);)t=t[0];return t}function Ot(t,e){return It(e[t])}function Nt(t,e){return It(e[t.index])}function Dt(t,e){return t.data[e]}function Pt(t,e){return t[e]}function Rt(t,e){const n=e[t];return dt(n)?n:n[0]}function Ft(t){return 4==(4&t[2])}function Lt(t){return 128==(128&t[2])}function Mt(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function Vt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const jt={lFrame:ce(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qt(){return jt.bindingsEnabled}function Bt(){return jt.lFrame.lView}function Gt(){return jt.lFrame.tView}function zt(t){return jt.lFrame.contextLView=t,t[8]}function Zt(){let t=Ht();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ht(){return jt.lFrame.currentTNode}function $t(t,e){const n=jt.lFrame;n.currentTNode=t,n.isParent=e}function Kt(){return jt.lFrame.isParent}function Qt(){return jt.isInCheckNoChangesMode}function Jt(t){jt.isInCheckNoChangesMode=t}function Yt(){const t=jt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Wt(){return jt.lFrame.bindingIndex}function Xt(){return jt.lFrame.bindingIndex++}function te(t){const e=jt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ee(t,e){const n=jt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ne(e)}function ne(t){jt.lFrame.currentDirectiveIndex=t}function re(){return jt.lFrame.currentQueryIndex}function ie(t){jt.lFrame.currentQueryIndex=t}function se(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function oe(t,e,n){if(n&N.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&N.Host||(r=se(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=jt.lFrame=ue();return r.currentTNode=e,r.lView=t,!0}function ae(t){const e=ue(),n=t[1];jt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ue(){const t=jt.lFrame,e=null===t?null:t.child;return null===e?ce(t):e}function ce(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function le(){const t=jt.lFrame;return jt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const he=le;function de(){const t=le();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fe(){return jt.lFrame.selectedIndex}function pe(t){jt.lFrame.selectedIndex=t}function ge(){const t=jt.lFrame;return Dt(t.tView,t.selectedIndex)}function me(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function ye(t,e,n){_e(t,e,3,n)}function ve(t,e,n,r){(3&t[2])===n&&_e(t,e,n,r)}function be(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function _e(t,e,n,r){const i=null!=r?r:-1,s=e.length-1;let o=0;for(let a=void 0!==r?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(we(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function we(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const Se=-1;class Te{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ee(t,e,n){const r=At(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];xe(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function Ce(t){return 3===t||4===t||6===t}function xe(t){return 64===t.charCodeAt(0)}function Ae(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||ke(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function ke(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function Ie(t){return t!==Se}function Oe(t){return 32767&t}function Ne(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let De=!0;function Pe(t){const e=De;return De=t,e}let Re=0;function Fe(t,e){const n=Me(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Le(r.data,t),Le(e,null),Le(r.blueprint,null));const i=Ue(t,e),s=t.injectorIndex;if(Ie(i)){const t=Oe(i),n=Ne(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function Le(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Me(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ue(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Se;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Se}function Ve(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=Re++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function je(t,e,n){if(n&N.Optional)return t;w(e,"NodeInjector")}function qe(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const i=t[9],s=P(void 0);try{return i?i.get(e,r,n&N.Optional):R(e,r,n&N.Optional)}finally{P(s)}}return je(r,e,n)}function Be(t,e,n,r=N.Default,i){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Y)?t[Y]:void 0;return"number"==typeof e?e>=0?255&e:ze:e}(n);if("function"==typeof s){if(!oe(e,t,r))return r&N.Host?je(i,n,r):qe(e,n,r,i);try{const t=s(r);if(null!=t||r&N.Optional)return t;w(n)}finally{he()}}else if("number"==typeof s){let i=null,o=Me(t,e),a=Se,u=r&N.Host?e[16][6]:null;for((-1===o||r&N.SkipSelf)&&(a=-1===o?Ue(t,e):e[o+8],a!==Se&&Qe(r,!1)?(i=e[1],o=Oe(a),e=Ne(a,e)):o=-1);-1!==o;){const t=e[1];if(Ke(s,o,t.data)){const t=Ze(o,e,n,i,r,u);if(t!==Ge)return t}a=e[o+8],a!==Se&&Qe(r,e[1].data[o+8]===u)&&Ke(s,o,e)?(i=t,o=Oe(a),e=Ne(a,e)):o=-1}}}return qe(e,n,r,i)}const Ge={};function ze(){return new Je(Zt(),Bt())}function Ze(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],u=He(a,o,n,null==r?gt(a)&&De:r!=o&&0!=(3&a.type),i&N.Host&&s===a);return null!==u?$e(e,o,u,a):Ge}function He(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,c=s>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=o[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=o[u];if(t&&yt(t)&&t.type===n)return u}return null}function $e(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof Te){const o=i;o.resolving&&function(t,e){throw new v("200",`Circular dependency in DI detected for ${t}`)}(_(s[n]));const a=Pe(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?P(o.injectImpl):null;oe(t,r,N.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const r=wt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&P(u),Pe(a),o.resolving=!1,he()}}return i}function Ke(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Qe(t,e){return!(t&N.Self||t&N.Host&&e)}class Je{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Be(this._tNode,this._lView,t,void 0,e)}}function Ye(t){return F(()=>{const e=t.prototype.constructor,n=e[J]||We(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[J]||We(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function We(t){return y(t)?()=>{const e=We(m(t));return e&&e()}:vt(t)}function Xe(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ce(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Zt(),t)}const tn="__parameters__";function en(t,e,n){return F(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(tn)?t[tn]:Object.defineProperty(t,tn,{value:[]})[tn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class nn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=S({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const rn=new nn("AnalyzeForEntryComponents"),sn=Function;function on(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),on(r,e)):e!==t&&e.push(r)}return e}function an(t,e){t.forEach(t=>Array.isArray(t)?an(t,e):e(t))}function un(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function cn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ln(t,e,n){let r=dn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function hn(t,e){const n=dn(t,e);if(n>=0)return t[1|n]}function dn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}const fn={},pn=/\n/gm,gn="__source",mn=l({provide:String,useValue:l});let yn;function vn(t){const e=yn;return yn=t,e}function bn(t,e=N.Default){if(void 0===yn)throw new Error("inject() must be called from an injection context");return null===yn?R(t,void 0,e):yn.get(t,e&N.Optional?null:void 0,e)}function _n(t,e=N.Default){return(D||bn)(m(t),e)}function wn(t){const e=[];for(let n=0;n<t.length;n++){const r=m(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=N.Default;for(let e=0;e<r.length;e++){const i=r[e],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=i.token:n|=s:t=i}e.push(_n(t,n))}else e.push(_n(r))}return e}function Sn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Tn=Sn(en("Inject",t=>({token:t})),-1),En=Sn(en("Optional"),8),Cn=Sn(en("SkipSelf"),4);let xn;function An(t){var e;return(null===(e=function(){if(void 0===xn&&(xn=null,B.trustedTypes))try{xn=B.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return xn}())||void 0===e?void 0:e.createHTML(t))||t}class kn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class In extends kn{getTypeName(){return"HTML"}}class On extends kn{getTypeName(){return"Style"}}class Nn extends kn{getTypeName(){return"Script"}}class Dn extends kn{getTypeName(){return"URL"}}class Pn extends kn{getTypeName(){return"ResourceURL"}}function Rn(t){return t instanceof kn?t.changingThisBreaksApplicationSecurity:t}function Fn(t,e){const n=Ln(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Ln(t){return t instanceof kn&&t.getTypeName()||null}function Mn(t){return new In(t)}function Un(t){return new On(t)}function Vn(t){return new Nn(t)}function jn(t){return new Dn(t)}function qn(t){return new Pn(t)}class Bn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(An(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Gn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=An(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=An(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const zn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Zn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Hn(t){return(t=String(t)).match(zn)||t.match(Zn)?t:"unsafe:"+t}function $n(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Kn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Qn=$n("area,br,col,hr,img,wbr"),Jn=$n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Yn=$n("rp,rt"),Wn=Kn(Yn,Jn),Xn=Kn(Qn,Kn(Jn,$n("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Kn(Yn,$n("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Wn),tr=$n("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),er=$n("srcset"),nr=Kn(tr,er,$n("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$n("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),rr=$n("script,style,template");class ir{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Xn.hasOwnProperty(e))return this.sanitizedSomething=!0,!rr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,s=e.toLowerCase();if(!nr.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;tr[s]&&(o=Hn(o)),er[s]&&(r=o,o=(r=String(r)).split(",").map(t=>Hn(t.trim())).join(", ")),this.buf.push(" ",e,'="',ar(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Xn.hasOwnProperty(e)&&!Qn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ar(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const sr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,or=/([^\#-~ |!])/g;function ar(t){return t.replace(/&/g,"&amp;").replace(sr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(or,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ur;function cr(t,e){let n=null;try{ur=ur||function(t){const e=new Gn(t);return function(){try{return!!(new window.DOMParser).parseFromString(An(""),"text/html")}catch(t){return!1}}()?new Bn(e):e}(t);let r=e?String(e):"";n=ur.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=ur.getInertBodyElement(r)}while(r!==s);return An((new ir).sanitizeChildren(lr(n)||n))}finally{if(n){const t=lr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function lr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var hr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function dr(t){const e=function(){const t=Bt();return t&&t[12]}();return e?e.sanitize(hr.URL,t)||"":Fn(t,"URL")?Rn(t):Hn(b(t))}function fr(t,e){t.__ngContext__=e}function pr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function gr(t){return t.ngDebugContext}function mr(t){return t.ngOriginalError}function yr(t,...e){t.error(...e)}class vr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||yr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?gr(t)?gr(t):this._findContext(mr(t)):null}_findOriginalError(t){let e=mr(t);for(;e&&mr(e);)e=mr(e);return e}}const br=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(B))();function _r(t){return t instanceof Function?t():t}var wr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Sr(t,e){return(void 0)(t,e)}function Tr(t){const e=t[3];return ft(e)?e[3]:e}function Er(t){return xr(t[13])}function Cr(t){return xr(t[4])}function xr(t){for(;null!==t&&!ft(t);)t=t[4];return t}function Ar(t,e,n,r,i){if(null!=r){let s,o=!1;ft(r)?s=r:dt(r)&&(o=!0,r=r[0]);const a=It(r);0===t&&null!==n?null==i?Rr(e,n,a):Pr(e,n,a,i||null,!0):1===t&&null!==n?Pr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Lr(t,e);r&&function(t,e,n,r){At(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==It(n)&&Ar(e,t,r,s,i);for(let o=ht;o<n.length;o++){const i=n[o];Br(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function kr(t,e,n){return At(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Ir(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Vt(i,-1)),n.splice(r,1)}function Or(t,e){if(t.length<=ht)return;const n=ht+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&Ir(s,r),e>0&&(t[n-1][4]=r[4]);const o=cn(t,ht+e);Br(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Nr(t,e){if(!(256&e[2])){const n=e[11];At(n)&&n.destroyNode&&Br(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Dr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&Dr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&Dr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Dr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Te)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):It(e[t]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const t=r[i=n[s+1]];n[s].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&At(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ft(e[3])){n!==e[3]&&Ir(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Pr(t,e,n,r,i){At(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Rr(t,e,n){At(t)?t.appendChild(e,n):e.appendChild(n)}function Fr(t,e,n,r,i){null!==r?Pr(t,e,n,r,i):Rr(t,e,n)}function Lr(t,e){return At(t)?t.parentNode(e):e.parentNode}function Mr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===M.None||e===M.Emulated)return null}return Nt(r,n)}(t,e.parent,n)}(t,r,e),s=e[11],o=function(t,e,n){return function(t,e,n){return 40&t.type?Nt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Fr(s,i,n[a],o,!1);else Fr(s,i,n,o,!1)}function Ur(t,e){if(null!==e){const n=e.type;if(3&n)return Nt(e,t);if(4&n)return jr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Ur(t,n);{const n=t[e.index];return ft(n)?jr(-1,n):It(n)}}if(32&n)return Sr(e,t)()||It(t[e.index]);{const n=Vr(t,e);return null!==n?Array.isArray(n)?n[0]:Ur(Tr(t[16]),n):Ur(t,e.next)}}return null}function Vr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function jr(t,e){const n=ht+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Ur(t,r)}return e[7]}function qr(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&fr(It(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)qr(t,e,n.child,r,i,s,!1),Ar(e,t,i,a,s);else if(32&u){const o=Sr(n,r);let u;for(;u=o();)Ar(e,t,i,u,s);Ar(e,t,i,a,s)}else 16&u?Gr(t,e,r,n,i,s):Ar(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Br(t,e,n,r,i,s){qr(n,r,t.firstChild,e,i,s,!1)}function Gr(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Ar(e,t,i,a[u],s);else qr(t,e,a,o[3],i,s,!0)}function zr(t,e,n){At(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Zr(t,e,n){At(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Hr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const $r="ng-template";function Kr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Hr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Qr(t){return 4===t.type&&t.value!==$r}function Jr(t,e,n){return e===(4!==t.type||n?t.value:$r)}function Yr(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(Ce(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Jr(t,u,n)||""===u&&1===e.length){if(Wr(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Kr(t.attrs,c,n)){if(Wr(r))return!1;o=!0}continue}const l=Xr(8&r?"class":u,i,Qr(t),n);if(-1===l){if(Wr(r))return!1;o=!0;continue}if(""!==c){let t;t=l>s?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Hr(e,c,0)||2&r&&c!==t){if(Wr(r))return!1;o=!0}}}}else{if(!o&&!Wr(r)&&!Wr(u))return!1;if(o&&Wr(u))continue;o=!1,r=u|1&r}}return Wr(r)||o}function Wr(t){return 0==(1&t)}function Xr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ti(t,e,n=!1){for(let r=0;r<e.length;r++)if(Yr(t,e[r],n))return!0;return!1}function ei(t,e){return t?":not("+e.trim()+")":e}function ni(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||Wr(o)||(e+=ei(s,i),i=""),r=o,s=s||!Wr(r);n++}return""!==i&&(e+=ei(s,i)),e}const ri={};function ii(t){si(Gt(),Bt(),fe()+t,Qt())}function si(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&ye(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ve(e,r,0,n)}pe(n)}function oi(t,e){return t<<17|e<<2}function ai(t){return t>>17&32767}function ui(t){return 2|t}function ci(t){return(131068&t)>>2}function li(t,e){return-131069&t|e<<2}function hi(t){return 1|t}function di(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];ie(i),n.contentQueries(2,e[s],s)}}}function fi(t,e,n,r,i,s,o,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ut(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function pi(t,e,n,r,i){let s=t.data[e];if(null===s)s=function(t,e,n,r,i){const s=Ht(),o=Kt(),a=t.data[e]=function(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(t,e,n,r,i),jt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const t=function(){const t=jt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===t?-1:t.injectorIndex}return $t(s,!0),s}function gi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function mi(t,e,n){ae(e);try{const r=t.viewQuery;null!==r&&Zi(1,r,n);const i=t.template;null!==i&&bi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&di(t,e),t.staticViewQueries&&Zi(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)ji(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,de()}}function yi(t,e,n,r){const i=e[2];if(256==(256&i))return;ae(e);const s=Qt();try{Ut(e),jt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&bi(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&ye(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ve(e,n,0,null),be(e,0)}if(function(t){for(let e=Er(t);null!==e;e=Cr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Vt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Er(t);null!==e;e=Cr(e))for(let t=ht;t<e.length;t++){const n=e[t],r=n[1];Lt(n)&&yi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&di(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&ye(e,n)}else{const n=t.contentHooks;null!==n&&ve(e,n,1),be(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)pe(~r);else{const i=r,s=n[++t],o=n[++t];ee(s,i),o(2,e[i])}}}finally{pe(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ui(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Zi(2,u,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&ye(e,n)}else{const n=t.viewHooks;null!==n&&ve(e,n,2),be(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Vt(e[3],-1))}finally{de()}}function vi(t,e,n,r){const i=e[10],s=!Qt(),o=Ft(e);try{s&&!o&&i.begin&&i.begin(),o&&mi(t,e,r),yi(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function bi(t,e,n,r,i){const s=fe(),o=2&r;try{pe(-1),o&&e.length>lt&&si(t,e,lt,Qt()),n(r,i)}finally{pe(s)}}function _i(t,e,n){qt()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Fe(n,e),fr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=yt(r);s&&Ri(e,n,r);const u=$e(e,t,a,n);fr(u,e),null!==o&&Fi(0,a-i,u,r,0,o),s&&(Rt(n.index,e)[8]=u)}}(t,e,n,Nt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=jt.lFrame.currentDirectiveIndex;try{pe(s);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ne(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ii(r,i)}}finally{pe(-1),ne(o)}}(t,e,n))}function wi(t,e,n=Nt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function Si(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ti(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ti(t,e,n,r,i,s,o,a,u,c){const l=lt+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ri);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Ei(t,e,n,r){const i=$i(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Ki(t).push(r,i.length-1))}function Ci(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function xi(t,e,n,r,i,s,o,a){const u=Nt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Ji(t,n,c,r,i),gt(e)&&function(t,e){const n=Rt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,e.value||"",r):i,At(s)?s.setProperty(u,r,i):xe(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ai(t,e,n,r){let i=!1;if(qt()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];ti(n,o.selectors,!1)&&(i||(i=[]),Ve(Fe(n,e),t,o.type),yt(o)?(Oi(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Di(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=gi(t,e,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=Ae(n.mergedAttrs,c.hostAttrs),Pi(t,n,e,u,c),Ni(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Qr(e)?null:Li(n,i);s.push(c),o=Ci(n,u,o),a=Ci(t.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new v("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=Ae(n.mergedAttrs,n.attrs),i}function ki(t,e,n,r,i,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function Ii(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Oi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ni(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yt(e)&&(n[""]=t)}}function Di(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Pi(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=vt(i.type)),o=new Te(s,yt(i),null);t.blueprint[r]=o,n[r]=o,ki(t,e,0,r,gi(t,n,i.hostVars,ri),i)}function Ri(t,e,n){const r=Nt(e,t),i=Si(n),s=t[10],o=qi(t,fi(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function Fi(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function Li(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Mi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ui(t,e){const n=Rt(e,t);if(Lt(n)){const t=n[1];80&n[2]?yi(t,n,t.template,n[8]):n[5]>0&&Vi(n)}}function Vi(t){for(let n=Er(t);null!==n;n=Cr(n))for(let t=ht;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];yi(t,e,t.template,e[8])}else e[5]>0&&Vi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Rt(e[n],t);Lt(r)&&r[5]>0&&Vi(r)}}function ji(t,e){const n=Rt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),mi(r,n,n[8])}function qi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Bi(t){for(;t;){t[2]|=64;const e=Tr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Gi(t,e,n){const r=e[10];r.begin&&r.begin();try{yi(t,e,t.template,n)}catch(i){throw Qi(e,i),i}finally{r.end&&r.end()}}function zi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=pr(n),i=r[1];vi(i,r,i.template,n)}}(t[8])}function Zi(t,e,n){ie(0),e(t,n)}const Hi=(()=>Promise.resolve(null))();function $i(t){return t[7]||(t[7]=[])}function Ki(t){return t.cleanup||(t.cleanup=[])}function Qi(t,e){const n=t[9],r=n?n.get(vr,null):null;r&&r.handleError(e)}function Ji(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Yi(t,e,n){const r=Ot(e,t);!function(t,e,n){At(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function Wi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=f(i,t):2==s&&(r=f(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Xi=new nn("INJECTOR",-1);class ts{get(t,e=fn){if(e===fn){const e=new Error(`NullInjectorError: No provider for ${d(t)}!`);throw e.name="NullInjectorError",e}return e}}const es=new nn("Set Injector scope."),ns={},rs={};let is;function ss(){return void 0===is&&(is=new ts),is}function os(t,e=null,n=null,r){return new as(t,n,e||ss(),r)}class as{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&an(e,n=>this.processProvider(n,t,e)),an([t],t=>this.processInjectorType(t,[],i)),this.records.set(Xi,ls(void 0,this));const s=this.records.get(es);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:d(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=fn,n=N.Default){this.assertNotDestroyed();const r=vn(this);try{if(!(n&N.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof nn)&&E(t);e=n&&this.injectableDefInScope(n)?ls(us(t),ns):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&N.Self?ss():this.parent).get(t,e=n&N.Optional&&e===fn?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(d(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[gn]&&i.unshift(e[gn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=d(e);if(Array.isArray(e))i=e.map(d).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):d(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(pn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{vn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(d(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=m(t)))return!1;let r=x(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=x(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{an(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];an(r,t=>this.processProvider(t,n,r||z))}}this.injectorDefTypes.add(s);const a=vt(s)||(()=>new s);this.records.set(s,ls(a,ns));const u=r.providers;if(null!=u&&!o){const e=t;an(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=ds(t=m(t))?t:m(t&&t.provide);const i=function(t,e,n){return hs(t)?ls(void 0,t.useValue):ls(cs(t),ns)}(t);if(ds(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=ls(void 0,ns,!0),e.factory=()=>wn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ns&&(e.value=rs,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=m(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function us(t){const e=E(t),n=null!==e?e.factory:vt(t);if(null!==n)return n;if(t instanceof nn)throw new Error(`Token ${d(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${d(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[A]||t[I]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function cs(t,e,n){let r;if(ds(t)){const e=m(t);return vt(e)||us(e)}if(hs(t))r=()=>m(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...wn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>_n(m(t.useExisting));else{const e=m(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vt(e)||us(e);r=()=>new e(...wn(t.deps))}var i;return r}function ls(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function hs(t){return null!==t&&"object"==typeof t&&mn in t}function ds(t){return"function"==typeof t}const fs=function(t,e,n){return function(t,e=null,n=null,r){const i=os(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let ps=(()=>{class t{static create(t,e){return Array.isArray(t)?fs(t,e,""):fs(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=fn,t.NULL=new ts,t.\u0275prov=S({token:t,providedIn:"any",factory:()=>_n(Xi)}),t.__NG_ELEMENT_ID__=-1,t})();function gs(t,e){me(pr(t)[1],Zt())}function ms(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(yt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ys(t.inputs),e.declaredInputs=ys(t.declaredInputs),e.outputs=ys(t.outputs);const n=i.hostBindings;n&&_s(t,n);const s=i.viewQuery,o=i.contentQueries;if(s&&vs(t,s),o&&bs(t,o),h(t.inputs,i.inputs),h(t.declaredInputs,i.declaredInputs),h(t.outputs,i.outputs),yt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===ms&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ae(i.hostAttrs,n=Ae(n,i.hostAttrs))}}(r)}function ys(t){return t===G?{}:t===z?[]:t}function vs(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function bs(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function _s(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let ws=null;function Ss(){if(!ws){const t=B.Symbol;if(t&&t.iterator)ws=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(ws=n)}}}return ws}class Ts{constructor(t){this.wrapped=t}static wrap(t){return new Ts(t)}static unwrap(t){return Ts.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Ts}}function Es(t){return!!Cs(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ss()in t)}function Cs(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function xs(t,e,n){return t[e]=n}function As(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ks(t,e,n,r){const i=As(t,e,n);return As(t,e+1,r)||i}function Is(t,e,n,r){const i=Bt();return As(i,Xt(),e)&&(Gt(),function(t,e,n,r,i,s){const o=Nt(t,e);!function(t,e,n,r,i,s,o){if(null==s)At(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==o?b(s):o(s,r||"",i);At(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],o,s,t.value,n,r,i)}(ge(),i,t,e,n,r)),Is}function Os(t,e,n,r){return As(t,Xt(),n)?e+b(n)+r:ri}function Ns(t,e,n,r,i,s,o,a){const u=Bt(),c=Gt(),l=t+lt,h=c.firstCreatePass?function(t,e,n,r,i,s,o,a,u){const c=e.consts,l=pi(e,t,4,o||null,Mt(c,a));Ai(e,n,l,Mt(c,u)),me(e,l);const h=l.tViews=Ti(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];$t(h,!1);const d=u[11].createComment("");Mr(c,u,d,h),fr(d,u),qi(u,u[l]=Mi(d,u,d,h)),mt(h)&&_i(c,u,h),null!=o&&wi(u,h,a)}function Ds(t){return Pt(jt.lFrame.contextLView,lt+t)}function Ps(t,e=N.Default){const n=Bt();return null===n?_n(t,e):Be(Zt(),n,m(t),e)}function Rs(t,e,n){const r=Bt();return As(r,Xt(),e)&&xi(Gt(),ge(),r,t,e,r[11],n,!1),Rs}function Fs(t,e,n,r,i){const s=i?"class":"style";Ji(t,n,e.inputs[s],s,r)}function Ls(t,e,n,r){const i=Bt(),s=Gt(),o=lt+t,a=i[11],u=i[o]=kr(a,e,jt.lFrame.currentNamespace),c=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,u=pi(e,t,2,i,Mt(a,s));return Ai(e,n,u,Mt(a,o)),null!==u.attrs&&Wi(u,u.attrs,!1),null!==u.mergedAttrs&&Wi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];$t(c,!0);const l=c.mergedAttrs;null!==l&&Ee(a,u,l);const h=c.classes;null!==h&&Zr(a,u,h);const d=c.styles;null!==d&&zr(a,u,d),64!=(64&c.flags)&&Mr(s,i,u,c),0===jt.lFrame.elementDepthCount&&fr(u,i),jt.lFrame.elementDepthCount++,mt(c)&&(_i(s,i,c),function(t,e,n){if(pt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(s,c,i)),null!==r&&wi(i,c)}function Ms(){let t=Zt();Kt()?jt.lFrame.isParent=!1:(t=t.parent,$t(t,!1));const e=t;jt.lFrame.elementDepthCount--;const n=Gt();n.firstCreatePass&&(me(n,t),pt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Fs(n,e,Bt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Fs(n,e,Bt(),e.stylesWithoutHost,!1)}function Us(t,e,n,r){Ls(t,e,n,r),Ms()}function Vs(){return Bt()}function js(t){return!!t&&"function"==typeof t.then}function qs(t){return!!t&&"function"==typeof t.subscribe}const Bs=qs;function Gs(t,e,n,r){const i=Bt(),s=Gt(),o=Zt();return function(t,e,n,r,i,s,o,a){const u=mt(r),c=t.firstCreatePass&&Ki(t),l=$i(e);let h=!0;if(3&r.type||a){const d=Nt(r,e),f=a?a(d):d,p=l.length,g=a?t=>a(It(t[r.index])):r.index;if(At(n)){let o=null;if(!a&&u&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Zs(r,e,0,s,!1);const t=n.listen(f,i,s);l.push(s,t),c&&c.push(i,g,p,p+1)}}else s=Zs(r,e,0,s,!0),f.addEventListener(i,s,o),l.push(s),c&&c.push(i,g,p,o)}else s=Zs(r,e,0,s,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(s),o=l.length;l.push(s,t),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,t,e,!!n,r),Gs}function zs(t,e,n,r){try{return!1!==n(r)}catch(i){return Qi(t,i),!1}}function Zs(t,e,n,r,i){return function n(s){if(s===Function)return r;const o=2&t.flags?Rt(t.index,e):e;0==(32&e[2])&&Bi(o);let a=zs(e,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=zs(e,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Hs(t=1){return function(t){return(jt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,jt.lFrame.contextLView))[8]}(t)}function $s(t,e,n){return Ks(t,"",e,"",n),$s}function Ks(t,e,n,r,i){const s=Bt(),o=Os(s,e,n,r);return o!==ri&&xi(Gt(),ge(),s,t,o,s[11],i,!1),Ks}function Qs(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?ai(s):ci(s),u=!1;for(;0!==a&&(!1===u||o);){const n=t[a+1];Js(t[a],e)&&(u=!0,t[a+1]=r?hi(n):ui(n)),a=r?ai(n):ci(n)}u&&(t[n+1]=r?ui(s):hi(s))}function Js(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&dn(t,e)>=0}function Ys(t,e){return function(t,e,n,r){const i=Bt(),s=Gt(),o=te(2);s.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[fe()],o=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(s)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=jt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=e.residualClasses;if(null===i)0===e.classBindings&&(n=Xs(n=Ws(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=Ws(i,t,e,n,r),null===s){let n=function(t,e,n){const r=e.classBindings;if(0!==ci(r))return t[ai(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Ws(null,t,e,n[1],r),n=Xs(n,e.attrs,r),function(t,e,n,r){t[ai(e.classBindings)]=r}(t,e,0,n))}else s=function(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Xs(r,t[s].hostAttrs,true);return Xs(r,e.attrs,true)}(t,e)}return void 0!==s&&(e.residualClasses=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=e.classBindings,a=ai(o),u=ci(o);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||dn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ai(t[a+1]);t[r+1]=oi(e,a),0!==e&&(t[e+1]=li(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=oi(a,0),0!==a&&(t[a+1]=li(t[a+1],r)),a=r;else t[r+1]=oi(u,0),0===a?a=r:t[u+1]=li(t[u+1],r),u=r;l&&(t[r+1]=ui(t[r+1])),Qs(t,c,r,!0),Qs(t,c,r,!1),function(t,e,n,r,i){const s=t.residualClasses;null!=s&&"string"==typeof e&&dn(s,e)>=0&&(n[r+1]=hi(n[r+1]))}(e,c,t,r),o=oi(a,u),e.classBindings=o}(i,s,e,n,o)}}(s,t,o,true),e!==ri&&As(i,o,e)&&function(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];eo(1==(1&c)?to(u,e,n,i,ci(c),o):void 0)||(eo(s)||function(t){return 2==(2&t)}(c)&&(s=to(u,null,n,i,a,o)),function(t,e,n,r,i){const s=At(t);i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r)}(r,0,Ot(fe(),n),i,s))}(s,s.data[fe()],i,i[11],t,i[o+1]=function(t,e){return null==t||"object"==typeof t&&(t=d(Rn(t))),t}(e),true,o)}(t,e),Ys}function Ws(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Xs(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Xs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ln(t,o,!!n||e[++s]))}return void 0===t?null:t}function to(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const e=t[i],s=Array.isArray(e),u=s?e[1]:e,c=null===u;let l=n[i+1];l===ri&&(l=c?z:void 0);let h=c?hn(l,r):u===r?l:void 0;if(s&&!eo(h)&&(h=hn(e,r)),eo(h)&&(a=h,o))return a;const d=t[i+1];i=o?ai(d):ci(d)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=hn(t,r))}return a}function eo(t){return void 0!==t}function no(t,e=""){const n=Bt(),r=Gt(),i=t+lt,s=r.firstCreatePass?pi(r,i,1,e,null):r.data[i],o=n[i]=function(t,e){return At(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Mr(r,n,o,s),$t(s,!1)}function ro(t){return io("",t,""),ro}function io(t,e,n){const r=Bt(),i=Os(r,t,e,n);return i!==ri&&Yi(r,fe(),i),io}function so(t,e,n,r,i){const s=Bt(),o=function(t,e,n,r,i,s){const o=ks(t,Wt(),n,i);return te(2),o?e+b(n)+r+b(i)+s:ri}(s,t,e,n,r,i);return o!==ri&&Yi(s,fe(),o),so}function oo(t,e,n,r,i,s,o,a,u){const c=Bt(),l=function(t,e,n,r,i,s,o,a,u,c){const l=function(t,e,n,r,i,s){const o=ks(t,e,n,r);return ks(t,e+2,i,s)||o}(t,Wt(),n,i,o,u);return te(4),l?e+b(n)+r+b(i)+s+b(o)+a+b(u)+c:ri}(c,t,e,n,r,i,s,o,a,u);return l!==ri&&Yi(c,fe(),l),oo}function ao(t,e,n){const r=Bt();return As(r,Xt(),e)&&xi(Gt(),ge(),r,t,e,r[11],n,!0),ao}const uo=void 0;var co=["en",[["a","p"],["AM","PM"],uo],[["AM","PM"],uo,uo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],uo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],uo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",uo,"{1} 'at' {0}",uo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let lo={};function ho(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=po(e);if(n)return n;const r=e.split("-")[0];if(n=po(r),n)return n;if("en"===r)return co;throw new Error(`Missing locale data for the locale "${t}".`)}function fo(t){return ho(t)[go.PluralCase]}function po(t){return t in lo||(lo[t]=B.ng&&B.ng.common&&B.ng.common.locales&&B.ng.common.locales[t]),lo[t]}var go=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const mo="en-US";let yo=mo;function vo(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(yo=t.toLowerCase().replace(/_/g,"-"))}function bo(t,e,n,r,i){if(t=m(t),Array.isArray(t))for(let s=0;s<t.length;s++)bo(t[s],e,n,r,i);else{const s=Gt(),o=Bt();let a=ds(t)?t:m(t.provide),u=cs(t);const c=Zt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(ds(t)||!t.multi){const r=new Te(u,i,Ps),f=So(a,e,i?l:l+d,h);-1===f?(Ve(Fe(c,o),s,a),_o(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=So(a,e,l+d,h),p=So(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){Ve(Fe(c,o),s,a);const l=function(t,e,n,r,i){const s=new Te(t,n,Ps);return s.multi=[],s.index=e,s.componentProviders=0,wo(s,i,r&&!n),s}(i?Eo:To,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),_o(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else _o(s,t,f>-1?f:p,wo(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function _o(t,e,n,r){const i=ds(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,s]):o[t+1].push(r,s)}else o.push(n,s)}}}function wo(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function So(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function To(t,e,n,r){return Co(this.multi,[])}function Eo(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=$e(n,n[1],this.providerFactory.index,r);s=e.slice(0,t),Co(i,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],Co(i,s);return s}function Co(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function xo(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Gt();if(r.firstCreatePass){const i=yt(t);bo(n,r.data,r.blueprint,i,!0),bo(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Ao{}class ko{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${d(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Io=(()=>{class t{}return t.NULL=new ko,t})();function Oo(...t){}function No(t,e){return new Po(Nt(t,e))}const Do=function(){return No(Zt(),Bt())};let Po=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Do,t})();function Ro(t){return t instanceof Po?t.nativeElement:t}class Fo{}let Lo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Mo(),t})();const Mo=function(){const t=Bt(),e=Rt(Zt().index,t);return function(t){return t[11]}(dt(e)?e:t)};let Uo=(()=>{class t{}return t.\u0275prov=S({token:t,providedIn:"root",factory:()=>null}),t})();class Vo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const jo=new Vo("12.0.3");class qo{constructor(){}supports(t){return Es(t)}create(t){return new Go(t)}}const Bo=(t,e)=>e;class Go{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Bo}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<$o(n,r,i)?e:n,o=$o(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Es(t))throw new Error(`Error trying to diff '${d(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ss()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new zo(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ho),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ho),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class zo{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Zo{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ho{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Zo,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $o(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ko{constructor(){}supports(t){return t instanceof Map||Cs(t)}create(){return new Qo}}class Qo{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Cs(t)))throw new Error(`Error trying to diff '${d(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Jo(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Jo{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Yo(){return new Wo([new qo])}let Wo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Yo()),deps:[[t,new Cn,new En]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=S({token:t,providedIn:"root",factory:Yo}),t})();function Xo(){return new ta([new Ko])}let ta=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Xo()),deps:[[t,new Cn,new En]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=S({token:t,providedIn:"root",factory:Xo}),t})();function ea(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(It(s)),ft(s))for(let t=ht;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&ea(e[1],e,n,r)}const o=n.type;if(8&o)ea(t,e,n.child,r);else if(32&o){const t=Sr(n,e);let i;for(;i=t();)r.push(i)}else if(16&o){const t=Vr(e,n);if(Array.isArray(t))r.push(...t);else{const n=Tr(e[16]);ea(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class na{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ea(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ft(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Or(t,n),cn(e,n))}this._attachedToViewContainer=!1}Nr(this._lView[1],this._lView)}onDestroy(t){Ei(this._lView[1],this._lView,null,t)}markForCheck(){Bi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Gi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Jt(!0);try{Gi(t,e,n)}finally{Jt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Br(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ra extends na{constructor(t){super(t),this._view=t}detectChanges(){zi(this._view)}checkNoChanges(){!function(t){Jt(!0);try{zi(t)}finally{Jt(!1)}}(this._view)}get context(){return null}}const ia=function(t){return function(t,e,n){if(gt(t)&&!n){const n=Rt(t.index,e);return new na(n,n)}return 47&t.type?new na(e[16],e):null}(Zt(),Bt(),16==(16&t))};let sa=(()=>{class t{}return t.__NG_ELEMENT_ID__=ia,t})();const oa=[new Ko],aa=new Wo([new qo]),ua=new ta(oa),ca=function(){return fa(Zt(),Bt())};let la=(()=>{class t{}return t.__NG_ELEMENT_ID__=ca,t})();const ha=la,da=class extends ha{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=fi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),mi(e,n,t),new na(n)}};function fa(t,e){return 4&t.type?new da(e,t,No(t,e)):null}class pa{}class ga{}const ma=function(){return Sa(Zt(),Bt())};let ya=(()=>{class t{}return t.__NG_ELEMENT_ID__=ma,t})();const va=ya,ba=class extends va{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return No(this._hostTNode,this._hostLView)}get injector(){return new Je(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ue(this._hostTNode,this._hostLView);if(Ie(t)){const e=Ne(t,this._hostLView),n=Oe(t);return new Je(e[1].data[n+8],e)}return new Je(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=_a(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(pa,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(ft(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ba(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,r){const i=ht+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-ht?(e[4]=n[i],un(n,ht+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,s,i);const o=jr(i,s),a=n[11],u=Lr(a,s[7]);return null!==u&&function(t,e,n,r,i,s){r[0]=i,r[6]=e,Br(t,r,n,1,i,s)}(r,s[6],a,n,u,o),t.attachToViewContainerRef(),un(wa(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=_a(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Or(this._lContainer,e);n&&(cn(wa(this._lContainer),e),Nr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Or(this._lContainer,e);return n&&null!=cn(wa(this._lContainer),e)?new na(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function _a(t){return t[8]}function wa(t){return t[8]||(t[8]=[])}function Sa(t,e){let n;const r=e[t.index];if(ft(r))n=r;else{let i;if(8&t.type)i=It(r);else{const n=e[11];i=n.createComment("");const r=Nt(t,e);Pr(n,Lr(n,r),i,function(t,e){return At(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Mi(r,e,i,t),qi(e,n)}return new ba(n,t,e)}const Ta={};class Ea extends Io{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ut(t);return new Aa(e,this.ngModule)}}function Ca(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const xa=new nn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>br});class Aa extends Ao{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ni).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ca(this.componentDef.inputs)}get outputs(){return Ca(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,Ta,i);return s!==Ta||r===Ta?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(Fo,kt),o=i.get(Uo,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(At(t))return t.selectRootElement(e,n===M.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):kr(s.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:br,clean:Hi,playerHandler:null,flags:0},d=Ti(0,null,null,1,0,null,null,null,null,null),f=fi(null,d,h,l,null,null,s,a,o,i);let p,g;ae(f);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=pi(o,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Wi(a,u,!0),null!==t&&(Ee(i,t,u),null!==a.classes&&Zr(i,t,a.classes),null!==a.styles&&zr(i,t,a.styles)));const c=r.createRenderer(t,e),l=fi(n,Si(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(Ve(Fe(a,n),o,e.type),Oi(o,a),Di(a,n.length,1)),qi(n,l),n[20]=l}(c,this.componentDef,f,s,a);if(c)if(n)Ee(a,c,["ng-version",jo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Wr(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ee(a,c,t),e&&e.length>0&&Zr(a,c,e.join(" "))}if(g=Dt(d,lt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=Zt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Pi(t,r,e,gi(t,e,1,null),n));const i=$e(e,t,r.directiveStart,r);fr(i,e);const s=Nt(r,e);return s&&fr(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries){const t=Zt();e.contentQueries(1,o,t.directiveStart)}const a=Zt();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(pe(a.index),ki(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ii(e,o)),o}(t,this.componentDef,f,h,[gs]),mi(d,f,null)}finally{de()}return new ka(this.componentType,p,No(g,f),f,g)}}class ka extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new ra(r),this.componentType=t}get injector(){return new Je(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ia=new Map;class Oa extends pa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ea(this);const n=ct(t),r=t[Q]||null;r&&vo(r),this._bootstrapComponents=_r(n.bootstrap),this._r3Injector=os(t,e,[{provide:pa,useValue:this},{provide:Io,useValue:this.componentFactoryResolver}],d(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=ps.THROW_IF_NOT_FOUND,n=N.Default){return t===ps||t===pa||t===Xi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Na extends ga{constructor(t){super(),this.moduleType=t,null!==ct(t)&&function(t){const e=new Set;!function t(n){const r=ct(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${d(e)} vs ${d(e.name)}`)}(i,Ia.get(i),n),Ia.set(i,n));const s=_r(r.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new Oa(this.moduleType,t)}}function Da(t,e,n,r){return Fa(Bt(),Yt(),t,e,n,r)}function Pa(t,e,n,r,i){return La(Bt(),Yt(),t,e,n,r,i)}function Ra(t,e){const n=t[e];return n===ri?void 0:n}function Fa(t,e,n,r,i,s){const o=e+n;return As(t,o,i)?xs(t,o+1,s?r.call(s,i):r(i)):Ra(t,o+1)}function La(t,e,n,r,i,s,o){const a=e+n;return ks(t,a,i,s)?xs(t,a+2,o?r.call(o,i,s):r(i,s)):Ra(t,a+2)}function Ma(t,e){const n=Gt();let r;const i=t+lt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new v("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=vt(r.type)),o=P(Ps);try{const t=Pe(!1),e=s();return Pe(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Bt(),i,e),e}finally{P(o)}}function Ua(t,e,n){const r=t+lt,i=Bt(),s=Pt(i,r);return qa(i,ja(i,r)?Fa(i,Yt(),e,s.transform,n,s):s.transform(n))}function Va(t,e,n,r){const i=t+lt,s=Bt(),o=Pt(s,i);return qa(s,ja(s,i)?La(s,Yt(),e,o.transform,n,r,o):o.transform(n,r))}function ja(t,e){return t[1].data[e].pure}function qa(t,e){return Ts.isWrapped(e)&&(e=Ts.unwrap(e),t[Wt()]=ri),e}function Ba(t){return e=>{setTimeout(t,void 0,e)}}const Ga=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,s,o;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(s=e.error)||void 0===s?void 0:s.bind(e),c=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}this.__isAsync&&(u=Ba(u),a&&(a=Ba(a)),c&&(c=Ba(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function za(){return this._results[Ss()]()}class Za{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ss(),n=Za.prototype;n[e]||(n[e]=za)}get changes(){return this._changes||(this._changes=new Ga)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=on(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ha{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ha(this.queryList)}setDirty(){this.queryList.setDirty()}}class $a{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new $a(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==iu(t,e).matches&&this.queries[e].setDirty()}}class Ka{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Qa{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Qa(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ja{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ja(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ya(e,i)),this.matchTNodeWithReadOption(t,e,He(e,t,i,!1,!1))}else n===la?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,He(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Po||r===ya||r===la&&4&e.type)this.addMatch(e.index,-2);else{const n=He(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ya(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Wa(t,e,n,r){return-1===n?function(t,e){return 11&t.type?No(t,e):4&t.type?fa(t,e):null}(e,t):-2===n?function(t,e,n){return n===Po?No(e,t):n===la?fa(e,t):n===ya?Sa(e,t):void 0}(t,e,r):$e(t,t[1],n,e)}function Xa(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const i=s[t];o.push(i<0?null:Wa(e,r[i],s[t+1],n.metadata.read))}i.matches=o}return i.matches}function tu(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=Xa(t,e,i,n);for(let t=0;t<s.length;t+=2){const n=s[t];if(n>0)r.push(o[t/2]);else{const i=s[t+1],o=e[-n];for(let t=ht;t<o.length;t++){const e=o[t];e[17]===e[3]&&tu(e[1],e,i,r)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];tu(n[1],n,i,r)}}}}}return r}function eu(t){const e=Bt(),n=Gt(),r=re();ie(r+1);const i=iu(n,r);if(t.dirty&&Ft(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?tu(n,e,r,[]):Xa(n,e,i,r);t.reset(s,Ro),t.notifyOnChanges()}return!0}return!1}function nu(t,e,n,r){const i=Gt();if(i.firstCreatePass){const s=Zt();(function(t,e,n){null===t.queries&&(t.queries=new Qa),t.queries.track(new Ja(e,n))})(i,new Ka(e,n,r),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Za(4==(4&n));Ei(t,e,r,r.destroy),null===e[19]&&(e[19]=new $a),e[19].queries.push(new Ha(r))}(i,Bt(),n)}function ru(){return t=Bt(),e=re(),t[19].queries[e].queryList;var t,e}function iu(t,e){return t.queries.getByIndex(e)}const su=new nn("Application Initializer");let ou=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Oo,this.reject=Oo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(js(e))t.push(e);else if(Bs(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(_n(su,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const au=new nn("AppId"),uu={provide:au,useFactory:function(){return`${cu()}${cu()}${cu()}`},deps:[]};function cu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const lu=new nn("Platform Initializer"),hu=new nn("Platform ID"),du=new nn("appBootstrapListener");let fu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const pu=new nn("LocaleId"),gu=new nn("DefaultCurrencyCode");class mu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const yu=function(t){return new Na(t)},vu=yu,bu=function(t){return Promise.resolve(yu(t))},_u=function(t){const e=yu(t),n=_r(ct(t).declarations).reduce((t,e)=>{const n=ut(e);return n&&t.push(new Aa(n)),t},[]);return new mu(e,n)},wu=_u,Su=function(t){return Promise.resolve(_u(t))};let Tu=(()=>{class t{constructor(){this.compileModuleSync=vu,this.compileModuleAsync=bu,this.compileModuleAndAllComponentsSync=wu,this.compileModuleAndAllComponentsAsync=Su}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const Eu=(()=>Promise.resolve(0))();function Cu(t){"undefined"==typeof Zone?Eu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class xu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ga(!1),this.onMicrotaskEmpty=new Ga(!1),this.onStable=new Ga(!1),this.onError=new Ga(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=B.requestAnimationFrame,e=B.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(B,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Iu(t),t.isCheckStableRunning=!0,ku(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Iu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Ou(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),Nu(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return Ou(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Nu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Iu(t),ku(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(xu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,Au,Oo,Oo);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Au={};function ku(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Iu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Ou(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Nu(t){t._nesting--,ku(t)}class Du{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ga,this.onMicrotaskEmpty=new Ga,this.onStable=new Ga,this.onError=new Ga}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Pu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xu.assertNotInAngularZone(),Cu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(_n(xu))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})(),Ru=(()=>{class t{constructor(){this._applications=new Map,Uu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Uu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();class Fu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Lu(t){Uu=t}let Mu,Uu=new Fu,Vu=!0,ju=!1;function qu(){return ju=!0,Vu}function Bu(){if(ju)throw new Error("Cannot enable prod mode after platform setup.");Vu=!1}const Gu=new nn("AllowMultipleToken");class zu{constructor(t,e){this.name=t,this.token=e}}function Zu(t,e,n=[]){const r=`Platform: ${e}`,i=new nn(r);return(e=[])=>{let s=Hu();if(!s||s.injector.get(Gu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:es,useValue:"platform"});!function(t){if(Mu&&!Mu.destroyed&&!Mu.injector.get(Gu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Mu=t.get($u);const e=t.get(lu,null);e&&e.forEach(t=>t())}(ps.create({providers:t,name:r}))}return function(t){const e=Hu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Hu(){return Mu&&!Mu.destroyed?Mu:null}let $u=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Du:("zone.js"===t?void 0:t)||new xu({enableLongStackTrace:qu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:xu,useValue:n}];return n.run(()=>{const e=ps.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(vr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{s.handleError(t)}});i.onDestroy(()=>{Ju(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return js(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(ou);return t.runInitializers(),t.donePromise.then(()=>(vo(i.injector.get(pu,mo)||mo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Ku({},e);return function(t,e,n){const r=new Na(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Qu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${d(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(_n(ps))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function Ku(t,e){return Array.isArray(e)?e.reduce(Ku,t):Object.assign(Object.assign({},t),e)}let Qu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new s.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{xu.assertNotInAngularZone(),Cu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{xu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(l,h.pipe(t=>{return(0,u.x)()((e=c,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.N);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Ao?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(pa),i=n.create(ps.NULL,[],e||n.selector,r),s=i.location.nativeElement,o=i.injector.get(Pu,null),a=o&&i.injector.get(Ru);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),Ju(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ju(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(du,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(_n(xu),_n(ps),_n(vr),_n(Io),_n(ou))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function Ju(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Yu{}class Wu{}const Xu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let tc=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Xu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>ec(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>ec(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(_n(Tu),_n(Wu,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function ec(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const nc=function(t){return null},rc=Zu(null,"core",[{provide:hu,useValue:"unknown"},{provide:$u,deps:[ps]},{provide:Ru,deps:[]},{provide:fu,deps:[]}]),ic=[{provide:Qu,useClass:Qu,deps:[xu,ps,vr,Io,ou]},{provide:xa,deps:[xu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ou,useClass:ou,deps:[[new En,su]]},{provide:Tu,useClass:Tu,deps:[]},uu,{provide:Wo,useFactory:function(){return aa},deps:[]},{provide:ta,useFactory:function(){return ua},deps:[]},{provide:pu,useFactory:function(t){return vo(t=t||"undefined"!=typeof $localize&&$localize.locale||mo),t},deps:[[new Tn(pu),new En,new Cn]]},{provide:gu,useValue:"USD"}];let sc=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(_n(Qu))},t.\u0275mod=rt({type:t}),t.\u0275inj=T({providers:ic}),t})()},5912:(t,e,n)=>{"use strict";n.d(e,{zQ:()=>N,ww:()=>D,Qv:()=>C});var r=n(7368),i=n(5959),s=n(878),o=n(8318),a=n(9764),u=n(1906),c=n(8489),l=n(7570),h=n(9971),d=n(3895),f=n(9291);class p extends i.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new g(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new d.N;if(this.isStopped||this.hasError?s=l.w.EMPTY:(this.observers.push(t),s=new f.W(this,t)),r&&t.add(t=new h.ht(t,r)),e)for(let o=0;o<i&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||c.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(t-r[s].time<n);)s++;return i>e&&(s=Math.max(s,i-e)),s>0&&r.splice(0,s),r}}class g{constructor(t,e){this.time=t,this.value=e}}function m(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,u=!1;return function(c){let l;o++,!i||a?(a=!1,i=new p(t,e,r),l=i.subscribe(this),s=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,s=void 0,i.complete()}}),u&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}var y=n(4689);function v(t,e){return e?(0,y.w)(()=>t,e):(0,y.w)(()=>t)}var b=n(9996),_=n(3530),w=n(4187),S=n(3835),T=n(2346),E=n(1116);const C=new r.OlP("angularfire2.auth.use-emulator"),x=new r.OlP("angularfire2.auth.settings"),A=new r.OlP("angularfire2.auth.tenant-id"),k=new r.OlP("angularfire2.auth.langugage-code"),I=new r.OlP("angularfire2.auth.use-device-language"),O=new r.OlP("angularfire.auth.persistence");let N=(()=>{class t{constructor(t,e,r,c,l,d,f,p,g,C){const x=new T.HU(c),A=(0,T.ss)(x),k=new i.xQ,I=(0,s.of)(void 0).pipe((0,h.QV)(x.outsideAngular),(0,y.w)(()=>c.runOutsideAngular(()=>n.e(420).then(n.bind(n,7420)))),(0,b.U)(()=>(0,T.on)(t,c,e)),(0,b.U)(t=>c.runOutsideAngular(()=>{const e=l,n=d;return(0,T.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=c.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),f&&(r.tenantId=f),r.languageCode=p,g&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return C&&r.setPersistence(C),r},[e,f,p,g,n,C])})),m({bufferSize:1,refCount:!1}));if((0,E.PM)(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,s.of)(null);else{I.pipe((0,_.P)()).subscribe();const t=I.pipe((0,y.w)(t=>t.getRedirectResult().then(t=>t,()=>null)),A,m({bufferSize:1,refCount:!1})),e=t=>new o.y(e=>({unsubscribe:c.runOutsideAngular(()=>t(e))})),n=I.pipe((0,y.w)(t=>e(t.onAuthStateChanged.bind(t)))),r=I.pipe((0,y.w)(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(v(n),(0,w.R)(x.outsideAngular),(0,h.QV)(x.insideAngular)),this.user=t.pipe(v(r),(0,w.R)(x.outsideAngular),(0,h.QV)(x.insideAngular)),this.idToken=this.user.pipe((0,y.w)(t=>t?(0,a.D)(t.getIdToken()):(0,s.of)(null))),this.idTokenResult=this.user.pipe((0,y.w)(t=>t?(0,a.D)(t.getIdTokenResult()):(0,s.of)(null))),this.credential=(0,u.T)(t,k,this.authState.pipe((0,S.h)(t=>!t))).pipe((0,b.U)(t=>(null==t?void 0:t.user)?t:null),(0,w.R)(x.outsideAngular),(0,h.QV)(x.insideAngular))}return(0,T.pX)(this,I,c,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>k.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(T.Dh),r.LFG(T.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(C,8),r.LFG(x,8),r.LFG(A,8),r.LFG(k,8),r.LFG(I,8),r.LFG(O,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(T.Dh),r.LFG(T.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(C,8),r.LFG(x,8),r.LFG(A,8),r.LFG(k,8),r.LFG(I,8),r.LFG(O,8))},token:t,providedIn:"any"}),t})();(0,T.GT)(N,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[N]}),t})()},3971:(t,e,n)=>{"use strict";n.d(e,{ST:()=>cp,yb:()=>lp});var r=n(7368),i=n(8569),s=n(8318),o=n(9764),a=n(878),u=n(6673);function c(){return t=>t.lift(new l)}class l{call(t,e){return e.subscribe(new h(t))}}class h extends u.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class d{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new f(t,this.compare,this.keySelector))}}class f extends u.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var p=n(6238),g=n(9996),m=n(2023),y=n(3835),v=n(9971),b=n(2346),_=n(1116),w=n(1858),S=n(1062),T=n(250),E=n(308),C=function(t,e){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function x(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var A,k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},I=I||{},O=k||self;function N(){}function D(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function P(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var R="closure_uid_"+(1e9*Math.random()>>>0),F=0;function L(t,e,n){return t.call.apply(t.bind,arguments)}function M(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function U(t,e,n){return(U=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?L:M).apply(null,arguments)}function V(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function j(){return Date.now()}function q(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Pb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function B(){this.j=this.j,this.i=this.i}B.prototype.j=!1,B.prototype.ka=function(){!this.j&&(this.j=!0,this.H(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,R)&&t[R]||(t[R]=++F)}(this)},B.prototype.H=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var G=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function Z(t){return Array.prototype.concat.apply([],arguments)}function H(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function $(t){return/^[\s\xa0]*$/.test(t)}var K,Q=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function J(t,e){return-1!=t.indexOf(e)}function Y(t,e){return t<e?-1:t>e?1:0}t:{var W=O.navigator;if(W){var X=W.userAgent;if(X){K=X;break t}}K=""}function tt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function et(t){var e={};for(var n in t)e[n]=t[n];return e}var nt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var s=0;s<nt.length;s++)n=nt[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function it(t){return it[" "](t),t}it[" "]=N;var st,ot,at=J(K,"Opera"),ut=J(K,"Trident")||J(K,"MSIE"),ct=J(K,"Edge"),lt=ct||ut,ht=J(K,"Gecko")&&!(J(K.toLowerCase(),"webkit")&&!J(K,"Edge"))&&!(J(K,"Trident")||J(K,"MSIE"))&&!J(K,"Edge"),dt=J(K.toLowerCase(),"webkit")&&!J(K,"Edge");function ft(){var t=O.document;return t?t.documentMode:void 0}t:{var pt="",gt=(ot=K,ht?/rv:([^\);]+)(\)|;)/.exec(ot):ct?/Edge\/([\d\.]+)/.exec(ot):ut?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ot):dt?/WebKit\/(\S+)/.exec(ot):at?/(?:Version)[ \/]?(\S+)/.exec(ot):void 0);if(gt&&(pt=gt?gt[1]:""),ut){var mt=ft();if(null!=mt&&mt>parseFloat(pt)){st=String(mt);break t}}st=pt}var yt={};function vt(t){return function(t,e){var n=yt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Q(String(st)).split("."),r=Q(String(t)).split("."),i=Math.max(n.length,r.length),s=0;0==e&&s<i;s++){var o=n[s]||"",a=r[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=Y(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||Y(0==o[2].length,0==a[2].length)||Y(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e})}var bt=O.document&&ut&&(ft()||parseInt(st,10))||void 0,_t=!ut||9<=Number(bt),wt=ut&&!vt("9"),St=function(){if(!O.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{O.addEventListener("test",N,e),O.removeEventListener("test",N,e)}catch(n){}return t}();function Tt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Et(t,e){if(Tt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ht){t:{try{it(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ct[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Tt.prototype.b=function(){this.defaultPrevented=!0},q(Et,Tt);var Ct={2:"touch",3:"pen",4:"mouse"};Et.prototype.b=function(){Et.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,wt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var xt="closure_listenable_"+(1e6*Math.random()|0),At=0;function kt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++At,this.Y=this.Z=!1}function It(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function Ot(t){this.src=t,this.a={},this.b=0}function Nt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],s=G(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(It(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Dt(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.Y&&s.listener==e&&s.capture==!!n&&s.da==r)return i}return-1}Ot.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.a[s])||(t=this.a[s]=[],this.b++);var o=Dt(t,e,r,i);return-1<o?(e=t[o],n||(e.Z=!1)):((e=new kt(e,this.src,s,!!r,i)).Z=n,t.push(e)),e};var Pt="closure_lm_"+(1e6*Math.random()|0),Rt={};function Ft(t,e,n,r,i){if(r&&r.once)return Mt(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ft(t,e[s],n,r,i);return null}return n=Zt(n),t&&t[xt]?t.wa(e,n,P(r)?!!r.capture:!!r,i):Lt(t,e,n,!1,r,i)}function Lt(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=P(i)?!!i.capture:!!i;if(o&&!_t)return null;var a=Gt(t);if(a||(t[Pt]=a=new Ot(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=Bt,e=_t?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)St||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(jt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Mt(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Mt(t,e[s],n,r,i);return null}return n=Zt(n),t&&t[xt]?t.xa(e,n,P(r)?!!r.capture:!!r,i):Lt(t,e,n,!0,r,i)}function Ut(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Ut(t,e[s],n,r,i);else r=P(r)?!!r.capture:!!r,n=Zt(n),t&&t[xt]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Dt(s=t.a[e],n,r,i))&&(It(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.a[e],t.b--))):t&&(t=Gt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Dt(e,n,r,i)),(n=-1<t?e[t]:null)&&Vt(n))}function Vt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[xt])Nt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(jt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Gt(e))?(Nt(n,t),0==n.b&&(n.src=null,e[Pt]=null)):It(t)}}}function jt(t){return t in Rt?Rt[t]:Rt[t]="on"+t}function qt(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&Vt(t),n.call(r,e)}function Bt(t,e){if(t.Y)return!0;if(!_t){if(!e)t:{e=["window","event"];for(var n=O,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return qt(t,e=new Et(e,this))}return qt(t,new Et(e,this))}function Gt(t){return(t=t[Pt])instanceof Ot?t:null}var zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zt(t){return"function"==typeof t?t:(t[zt]||(t[zt]=function(e){return t.handleEvent(e)}),t[zt])}function Ht(){B.call(this),this.c=new Ot(this),this.J=this,this.D=null}function $t(t,e){var n,r=t.D;if(r)for(n=[];r;r=r.D)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Tt(e,t);else if(e instanceof Tt)e.target=e.target||t;else{var i=e;rt(e=new Tt(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.a=n[s];i=Kt(o,r,!0,e)&&i}if(i=Kt(o=e.a=t,r,!0,e)&&i,i=Kt(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Kt(o=e.a=n[s],r,!1,e)&&i}function Kt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.Y&&o.capture==n){var a=o.listener,u=o.da||o.src;o.Z&&Nt(t.c,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}q(Ht,B),Ht.prototype[xt]=!0,(A=Ht.prototype).addEventListener=function(t,e,n,r){Ft(this,t,e,n,r)},A.removeEventListener=function(t,e,n,r){Ut(this,t,e,n,r)},A.H=function(){if(Ht.X.H.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)It(n[r]);delete e.a[t],e.b--}}this.D=null},A.wa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},A.xa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Qt=O.JSON.stringify;function Jt(){this.b=this.a=null}var Yt,Wt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new te},function(t){t.reset()});function Xt(){var t=ie,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function te(){this.next=this.b=this.a=null}function ee(t){O.setTimeout(function(){throw t},0)}function ne(t,e){Yt||function(){var t=O.Promise.resolve(void 0);Yt=function(){t.then(se)}}(),re||(Yt(),re=!0),ie.add(t,e)}Jt.prototype.add=function(t,e){var n=Wt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},te.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},te.prototype.reset=function(){this.next=this.b=this.a=null};var re=!1,ie=new Jt;function se(){for(var t;t=Xt();){try{t.a.call(t.b)}catch(n){ee(n)}var e=Wt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}re=!1}function oe(t,e){Ht.call(this),this.b=t||1,this.a=e||O,this.f=U(this.eb,this),this.g=j()}function ae(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ue(t,e,n){if("function"==typeof t)n&&(t=U(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=U(t.handleEvent,t)}return 2147483647<Number(e)?-1:O.setTimeout(t,e||0)}function ce(t){t.a=ue(function(){t.a=null,t.c&&(t.c=!1,ce(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}q(oe,Ht),(A=oe.prototype).aa=!1,A.M=null,A.eb=function(){if(this.aa){var t=j()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),$t(this,"tick"),this.aa&&(ae(this),this.start()))}},A.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=j())},A.H=function(){oe.X.H.call(this),ae(this),delete this.a};var le=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}C(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:ce(this)},e.prototype.H=function(){t.prototype.H.call(this),this.a&&(O.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(B);function he(t){B.call(this),this.b=t,this.a={}}q(he,B);var de=[];function fe(t,e,n,r){Array.isArray(n)||(n&&(de[0]=n.toString()),n=de);for(var i=0;i<n.length;i++){var s=Ft(e,n[i],r||t.handleEvent,!1,t.b||t);if(!s)break;t.a[s.key]=s}}function pe(t){tt(t.a,function(t,e){this.a.hasOwnProperty(e)&&Vt(t)},t),t.a={}}function ge(){this.a=!0}function me(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Qt(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}he.prototype.H=function(){he.X.H.call(this),pe(this)},he.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ge.prototype.info=function(){};var ye={},ve=null;function be(){return ve=ve||new Ht}function _e(t){Tt.call(this,ye.Ga,t)}function we(t){var e=be();$t(e,new _e(e,t))}function Se(t,e){Tt.call(this,ye.STAT_EVENT,t),this.stat=e}function Te(t){var e=be();$t(e,new Se(e,t))}function Ee(t){Tt.call(this,ye.Ha,t)}function Ce(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return O.setTimeout(function(){t()},e)}ye.Ga="serverreachability",q(_e,Tt),ye.STAT_EVENT="statevent",q(Se,Tt),ye.Ha="timingevent",q(Ee,Tt);var xe={NO_ERROR:0,fb:1,sb:2,rb:3,mb:4,qb:5,tb:6,Ea:7,TIMEOUT:8,wb:9},Ae={kb:"complete",Gb:"success",Fa:"error",Ea:"abort",yb:"ready",zb:"readystatechange",TIMEOUT:"timeout",ub:"incrementaldata",xb:"progress",nb:"downloadprogress",Ob:"uploadprogress"};function ke(){}function Ie(){}ke.prototype.b=null;var Oe,Ne={OPEN:"a",jb:"b",Fa:"c",vb:"d"};function De(){Tt.call(this,"d")}function Pe(){Tt.call(this,"c")}function Re(){}function Fe(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new he(this),this.P=Le,this.R=new oe(t=lt?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.G=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}q(De,Tt),q(Pe,Tt),q(Re,ke),Re.prototype.a=function(){return new XMLHttpRequest},Re.prototype.c=function(){return{}},Oe=new Re;var Le=45e3,Me={},Ue={};function Ve(t,e,n){t.G=1,t.i=un(en(e)),t.j=n,t.I=!0,je(t,null)}function je(t,e){t.u=j(),Ge(t),t.l=en(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),wn(n.b,"t",r),t.D=0,t.a=gr(t.g,t.g.C?e:null),0<t.O&&(t.F=new le(U(t.Da,t,t.a),t.O)),fe(t.J,t.a,"readystatechange",t.bb),e=t.B?et(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),we(1),function(t,e,n,r,i,s){t.info(function(){if(t.a)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.c,t.m,t.l,t.f,t.S,t.j)}function qe(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Be(t,n);if(i==Ue){4==e&&(t.h=4,Te(14),r=!1),me(t.c,t.f,null,"[Incomplete Response]");break}if(i==Me){t.h=4,Te(15),me(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}me(t.c,t.f,i,null),Ke(t,i)}4==e&&0==n.length&&(t.h=1,Te(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),ar(e),e.F=!0,Te(11))):(me(t.c,t.f,n,"[Invalid Chunked Response]"),$e(t),He(t))}function Be(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ue:(n=Number(e.substring(n,r)),isNaN(n)?Me:(r+=1)+n>e.length?Ue:(e=e.substr(r,n),t.D=r+n,e))}function Ge(t){t.T=j()+t.P,ze(t,t.P)}function ze(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ce(U(t.$a,t),e)}function Ze(t){t.o&&(O.clearTimeout(t.o),t.o=null)}function He(t){0==t.g.v||t.A||lr(t.g,t)}function $e(t){Ze(t);var e=t.F;e&&"function"==typeof e.ka&&e.ka(),t.F=null,ae(t.R),pe(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ka())}function Ke(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||kn(n.b,t)))if(n.I=t.N,!t.C&&kn(n.b,t)&&3==n.v){try{var r=n.la.a.parse(e)}catch(bf){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;cr(n),Wn(n)}or(n),Te(18)}}else n.pa=i[1],0<n.pa-n.P&&37500>i[2]&&n.G&&0==n.o&&!n.m&&(n.m=Ce(U(n.Xa,n),6e3));if(1>=An(n.b)&&n.fa){try{n.fa()}catch(bf){}n.fa=void 0}}else dr(n,11)}else if((t.C||n.a==t)&&cr(n),!$(e))for(e=r=n.la.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ha=i[2];var s=i[3];null!=s&&(n.ia=s,n.c.info("VER="+n.ia));var o=i[4];null!=o&&(n.qa=o,n.c.info("SVER="+n.qa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(J(l,"spdy")||J(l,"quic")||J(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(In(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.oa=d,an(u.B,u.A,d))}}n.v=3,n.f&&n.f.ua(),n.U&&(n.N=j()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).ma=pr(u,u.C?u.ha:null,u.ga),f.C){On(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(Ze(p),Ge(p)),u.a=f}else sr(u);0<n.g.length&&er(n)}else"stop"!=i[0]&&"close"!=i[0]||dr(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?dr(n,7):Yn(n):"noop"!=i[0]&&n.f&&n.f.ta(i),n.o=0);we(4)}catch(bf){}}function Qe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(D(t)||"string"==typeof t)z(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(D(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(D(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function Je(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Je)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ye(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];We(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)We(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function We(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(A=Fe.prototype).setTimeout=function(t){this.P=t},A.bb=function(t){t=t.target;var e=this.F;e&&3==$n(t)?e.f():this.Da(t)},A.Da=function(t){try{if(t==this.a)t:{var e=$n(this.a),n=this.a.va(),r=this.a.W();if(!(3>e||3==e&&!lt&&!this.a.$())){this.A||4!=e||7==n||we(8==n||0>=r?3:2),Ze(this);var i=this.a.W();this.N=i;var s=this.a.$();if(this.b=200==i,function(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var o,a=this.a;if((o=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(o)){var u=o;break e}}u=null}if(!u){this.b=!1,this.h=3,Te(12),$e(this),He(this);break t}me(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ke(this,u)}this.I?(qe(this,e,s),lt&&this.b&&3==e&&(fe(this.J,this.R,"tick",this.ab),this.R.start())):(me(this.c,this.f,s,null),Ke(this,s)),4==e&&$e(this),this.b&&!this.A&&(4==e?lr(this.g,this):(this.b=!1,Ge(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.h=3,Te(12)):(this.h=0,Te(13)),$e(this),He(this)}}}catch(c){}},A.ab=function(){if(this.a){var t=$n(this.a),e=this.a.$();this.D<e.length&&(Ze(this),qe(this,t,e),this.b&&4!=t&&Ge(this))}},A.cancel=function(){this.A=!0,$e(this)},A.$a=function(){this.o=null;var t=j();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.G&&(we(3),Te(17)),$e(this),this.h=2,He(this)):ze(this,this.T-t)},(A=Je.prototype).K=function(){Ye(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},A.L=function(){return Ye(this),this.a.concat()},A.get=function(t,e){return We(this.b,t)?this.b[t]:e},A.set=function(t,e){We(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},A.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var Xe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tn(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof tn){this.a=void 0!==e?e:t.a,nn(this,t.f),this.j=t.j,rn(this,t.c),sn(this,t.h),this.g=t.g,e=t.b;var n=new yn;n.c=e.c,e.a&&(n.a=new Je(e.a),n.b=e.b),on(this,n),this.i=t.i}else t&&(n=String(t).match(Xe))?(this.a=!!e,nn(this,n[1]||"",!0),this.j=cn(n[2]||""),rn(this,n[3]||"",!0),sn(this,n[4]),this.g=cn(n[5]||"",!0),on(this,n[6]||"",!0),this.i=cn(n[7]||"")):(this.a=!!e,this.b=new yn(null,this.a))}function en(t){return new tn(t)}function nn(t,e,n){t.f=n?cn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function rn(t,e,n){t.c=n?cn(e,!0):e}function sn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function on(t,e,n){e instanceof yn?(t.b=e,function(t,e){e&&!t.f&&(vn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(bn(this,e),wn(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=ln(e,gn)),t.b=new yn(e,t.a))}function an(t,e,n){t.b.set(e,n)}function un(t){return an(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^j()).toString(36)),t}function cn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ln(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}tn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ln(e,dn,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ln(e,dn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ln(n,"/"==n.charAt(0)?pn:fn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ln(n,mn)),t.join("")};var dn=/[#\/\?@]/g,fn=/[#\?:]/g,pn=/[#\?]/g,gn=/[#\?@]/g,mn=/#/g;function yn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function vn(t){t.a||(t.a=new Je,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function bn(t,e){vn(t),e=Sn(t,e),We(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,We((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ye(t)))}function _n(t,e){return vn(t),e=Sn(t,e),We(t.a.b,e)}function wn(t,e,n){bn(t,e),0<n.length&&(t.c=null,t.a.set(Sn(t,e),H(n)),t.b+=n.length)}function Sn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(A=yn.prototype).add=function(t,e){vn(this),this.c=null,t=Sn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},A.forEach=function(t,e){vn(this),this.a.forEach(function(n,r){z(n,function(n){t.call(e,n,r,this)},this)},this)},A.L=function(){vn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},A.K=function(t){vn(this);var e=[];if("string"==typeof t)_n(this,t)&&(e=Z(e,this.a.get(Sn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Z(e,t[n])}return e},A.set=function(t,e){return vn(this),this.c=null,_n(this,t=Sn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},A.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},A.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.c=t.join("&")};var Tn=function(){return function(t,e){this.b=t,this.a=e}}();function En(t){this.g=t||Cn,t=O.PerformanceNavigationTiming?0<(t=O.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(O.ja&&O.ja.za&&O.ja.za()&&O.ja.za().Qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Cn=10;function xn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function An(t){return t.b?1:t.a?t.a.size:0}function kn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function In(t,e){t.a?t.a.add(e):t.b=e}function On(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Nn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=x(t.a.values()),s=i.next();!s.done;s=i.next())r=r.concat(s.value.s)}catch(o){e={error:o}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return H(t.c)}function Dn(){}function Pn(){this.a=new Dn}function Rn(t,e,n){var r=n||"";try{Qe(t,function(t,n){var i=t;P(t)&&(i=Qt(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Gf){throw e.push(r+"type="+encodeURIComponent("_badmap")),Gf}}function Fn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}En.prototype.cancel=function(){var t,e;if(this.c=Nn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=x(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Dn.prototype.stringify=function(t){return O.JSON.stringify(t,void 0)},Dn.prototype.parse=function(t){return O.JSON.parse(t,void 0)};var Ln=O.JSON.parse;function Mn(t){Ht.call(this),this.headers=new Je,this.l=t||null,this.b=!1,this.u=this.a=null,this.C="",this.h=0,this.f="",this.g=this.B=this.m=this.A=!1,this.s=0,this.o=null,this.I=Un,this.F=this.G=!1}q(Mn,Ht);var Un="",Vn=/^https?$/i,jn=["POST","PUT"];function qn(t){return"content-type"==t.toLowerCase()}function Bn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Gn(t),Zn(t)}function Gn(t){t.A||(t.A=!0,$t(t,"complete"),$t(t,"error"))}function zn(t){if(t.b&&void 0!==I&&(!t.u[1]||4!=$n(t)||2!=t.W()))if(t.m&&4==$n(t))ue(t.Aa,0,t);else if($t(t,"readystatechange"),4==$n(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.C).match(Xe)[1]||null;if(!s&&O.self&&O.self.location){var o=O.self.location.protocol;s=o.substr(0,o.length-1)}i=!Vn.test(s?s.toLowerCase():"")}e=i}if(e)$t(t,"complete"),$t(t,"success");else{t.h=6;try{var a=2<$n(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Gn(t)}}finally{Zn(t)}}}function Zn(t,e){if(t.a){Hn(t);var n=t.a,r=t.u[0]?N:null;t.a=null,t.u=null,e||$t(t,"ready");try{n.onreadystatechange=r}catch(Gf){}}}function Hn(t){t.a&&t.F&&(t.a.ontimeout=null),t.o&&(O.clearTimeout(t.o),t.o=null)}function $n(t){return t.a?t.a.readyState:0}function Kn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return tt(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):an(t,e,n))}function Qn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Jn(t){this.qa=0,this.g=[],this.c=new ge,this.ha=this.ma=this.B=this.ga=this.a=this.oa=this.A=this.V=this.i=this.O=this.l=null,this.Pa=this.R=0,this.Ma=Qn("failFast",!1,t),this.G=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.pa=this.P=-1,this.T=this.o=this.u=0,this.Ia=Qn("baseRetryDelayMs",5e3,t),this.Sa=Qn("retryDelaySeedMs",1e4,t),this.Na=Qn("forwardChannelMaxRetries",2,t),this.na=Qn("forwardChannelRequestTimeoutMs",2e4,t),this.Oa=t&&t.xmlHttpFactory||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new En(t&&t.concurrentRequestLimit),this.la=new Pn,this.ea=t&&t.fastHandshake||!1,this.Ja=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.ea&&this.S&&t&&t.detectBufferingProxy||!1,this.fa=void 0,this.N=0,this.F=!1,this.s=null,(this.La=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Yn(t){if(Xn(t),3==t.v){var e=t.R++,n=en(t.B);an(n,"SID",t.J),an(n,"RID",e),an(n,"TYPE","terminate"),rr(t,n),(e=new Fe(t,t.c,e,void 0)).G=2,e.i=un(en(n)),n=!1,O.navigator&&O.navigator.sendBeacon&&(n=O.navigator.sendBeacon(e.i.toString(),"")),!n&&O.Image&&((new Image).src=e.i,n=!0),n||(e.a=gr(e.g,null),e.a.ba(e.i)),e.u=j(),Ge(e)}fr(t)}function Wn(t){t.a&&(ar(t),t.a.cancel(),t.a=null)}function Xn(t){Wn(t),t.j&&(O.clearTimeout(t.j),t.j=null),cr(t),t.b.cancel(),t.h&&("number"==typeof t.h&&O.clearTimeout(t.h),t.h=null)}function tr(t,e){t.g.push(new Tn(t.Pa++,e)),3==t.v&&er(t)}function er(t){xn(t.b)||t.h||(t.h=!0,ne(t.Ca,t),t.u=0)}function nr(t,e){var n;n=e?e.f:t.R++;var r=en(t.B);an(r,"SID",t.J),an(r,"RID",n),an(r,"AID",t.P),rr(t,r),t.i&&t.l&&Kn(r,t.i,t.l),n=new Fe(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ir(t,n,1e3),n.setTimeout(Math.round(.5*t.na)+Math.round(.5*t.na*Math.random())),In(t.b,n),Ve(n,r,e)}function rr(t,e){t.f&&Qe({},function(t,n){an(e,n,t)})}function ir(t,e,n){n=Math.min(t.g.length,n);var r=t.f?U(t.f.Ka,t.f,t):null;t:for(var i=t.g,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].b)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=s))s=Math.max(0,i[u].b-100),a=!1;else try{Rn(l,o,"req"+c+"_")}catch(Wr){r&&r(l)}}if(a){r=o.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function sr(t){t.a||t.j||(t.T=1,ne(t.Ba,t),t.o=0)}function or(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Ce(U(t.Ba,t),hr(t,t.o)),t.o++,0))}function ar(t){null!=t.s&&(O.clearTimeout(t.s),t.s=null)}function ur(t){t.a=new Fe(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=en(t.ma);an(e,"RID","rpc"),an(e,"SID",t.J),an(e,"CI",t.G?"0":"1"),an(e,"AID",t.P),rr(t,e),an(e,"TYPE","xmlhttp"),t.i&&t.l&&Kn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ha,n.G=1,n.i=un(en(e)),n.j=null,n.I=!0,je(n,t)}function cr(t){null!=t.m&&(O.clearTimeout(t.m),t.m=null)}function lr(t,e){var n=null;if(t.a==e){cr(t),ar(t),t.a=null;var r=2}else{if(!kn(t.b,e))return;n=e.s,On(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=j()-e.u;var i=t.u;$t(r=be(),new Ee(r,n,e,i)),er(t)}else sr(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(An(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ma?0:t.Na)||(t.h=Ce(U(t.Ca,t,e),hr(t,t.u)),t.u++,0)))}(t,e)||2==r&&or(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:dr(t,5);break;case 4:dr(t,10);break;case 3:dr(t,6);break;default:dr(t,2)}}function hr(t,e){var n=t.Ia+Math.floor(Math.random()*t.Sa);return t.f||(n*=2),n*e}function dr(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=U(t.cb,t);n||(n=new tn("//www.google.com/images/cleardot.gif"),O.location&&"http"==O.location.protocol||nn(n,"https"),un(n)),function(t,e){var n=new ge;if(O.Image){var r=new Image;r.onload=V(Fn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=V(Fn,n,r,"TestLoadImage: error",!1,e),r.onabort=V(Fn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=V(Fn,n,r,"TestLoadImage: timeout",!1,e),O.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Te(2);t.v=0,t.f&&t.f.sa(e),fr(t),Xn(t)}function fr(t){t.v=0,t.I=-1,t.f&&(0==Nn(t.b).length&&0==t.g.length||(t.b.c.length=0,H(t.g),t.g.length=0),t.f.ra())}function pr(t,e,n){var r=function(t){return t instanceof tn?en(t):new tn(t,void 0)}(n);if(""!=r.c)e&&rn(r,e+"."+r.c),sn(r,r.h);else{var i=O.location;r=function(t,e,n,r){var i=new tn(null,void 0);return t&&nn(i,t),e&&rn(i,e),n&&sn(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&tt(t.V,function(t,e){an(r,e,t)}),n=t.oa,(e=t.A)&&n&&an(r,e,n),an(r,"VER",t.ia),rr(t,r),r}function gr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Mn(t.Oa)).G=t.C,e}function mr(){}function yr(){if(ut&&!(10<=Number(bt)))throw Error("Environmental error: no available transport.")}function vr(t,e){Ht.call(this),this.a=new Jn(e),this.g=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!$(t)&&(this.a.i=t),this.o=e&&e.supportsCrossDomainXhr||!1,this.m=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new wr(this)}function br(t){De.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function _r(){Pe.call(this),this.status=1}function wr(t){this.a=t}function Sr(t){this.f=t}function Tr(t){Ht.call(this),this.u=t,this.h=void 0,this.readyState=Er,this.status=0,this.responseType=this.responseText=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.o="",this.a=!1,this.m=this.f=this.g=null}(A=Mn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+t);e=e?e.toUpperCase():"GET",this.C=t,this.f="",this.h=0,this.A=!1,this.b=!0,this.a=this.l?this.l.a():Oe.a(),this.u=function(t){return t.b||(t.b=t.c())}(this.l?this.l:Oe),this.a.onreadystatechange=U(this.Aa,this);try{this.B=!0,this.a.open(e,String(t),!0),this.B=!1}catch(s){return void Bn(this,s)}t=n||"";var i=new Je(this.headers);r&&Qe(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=qn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=O.FormData&&t instanceof O.FormData,!(0<=G(jn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.G&&(this.a.withCredentials=this.G);try{Hn(this),0<this.s&&((this.F=function(t){return ut&&vt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.s,this.a.ontimeout=U(this.ya,this)):this.o=ue(this.ya,this.s,this)),this.m=!0,this.a.send(t),this.m=!1}catch(s){Bn(this,s)}},A.ya=function(){void 0!==I&&this.a&&(this.f="Timed out after "+this.s+"ms, aborting",this.h=8,$t(this,"timeout"),this.abort(8))},A.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,$t(this,"complete"),$t(this,"abort"),Zn(this))},A.H=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Zn(this,!0)),Mn.X.H.call(this)},A.Aa=function(){this.j||(this.B||this.m||this.g?zn(this):this.Za())},A.Za=function(){zn(this)},A.W=function(){try{return 2<$n(this)?this.a.status:-1}catch(ot){return-1}},A.$=function(){try{return this.a?this.a.responseText:""}catch(ot){return""}},A.Qa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ln(e)}},A.va=function(){return this.h},A.Ra=function(){return"string"==typeof this.f?this.f:String(this.f)},(A=Jn.prototype).ia=8,A.v=1,A.Ca=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Fe(this,this.c,t,void 0),r=this.l;if(this.O&&(r?rt(r=et(r),this.O):r=this.O),null===this.i&&(n.B=r),this.ea)t:{for(var i=e=0;i<this.g.length;i++){var s=this.g[i];if(void 0===(s="__data__"in s.a&&"string"==typeof(s=s.a.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ir(this,n,e),an(i=en(this.B),"RID",t),an(i,"CVER",22),this.A&&an(i,"X-HTTP-Session-Id",this.A),rr(this,i),this.i&&r&&Kn(i,this.i,r),In(this.b,n),this.Ja&&an(i,"TYPE","init"),this.ea?(an(i,"$req",e),an(i,"SID","null"),n.U=!0,Ve(n,i,null)):Ve(n,i,e),this.v=2}}else 3==this.v&&(t?nr(this,t):0==this.g.length||xn(this.b)||nr(this))},A.Ba=function(){if(this.j=null,ur(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ce(U(this.Ya,this),t)}},A.Ya=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.F=!0,Te(10),Wn(this),ur(this))},A.Xa=function(){null!=this.m&&(this.m=null,Wn(this),or(this),Te(19))},A.cb=function(t){t?(this.c.info("Successfully pinged google.com"),Te(2)):(this.c.info("Failed to ping google.com"),Te(1))},(A=mr.prototype).ua=function(){},A.ta=function(){},A.sa=function(){},A.ra=function(){},A.Ka=function(){},yr.prototype.a=function(t,e){return new vr(t,e)},q(vr,Ht),vr.prototype.h=function(){this.a.f=this.f,this.o&&(this.a.C=!0);var t=this.a,e=this.g,n=this.b||void 0;Te(0),t.ga=e,t.V=n||{},t.G=t.S,t.B=pr(t,null,t.ga),er(t)},vr.prototype.close=function(){Yn(this.a)},vr.prototype.l=function(t){if("string"==typeof t){var e={};e.__data__=t,tr(this.a,e)}else this.m?((e={}).__data__=Qt(t),tr(this.a,e)):tr(this.a,t)},vr.prototype.H=function(){this.a.f=null,delete this.f,Yn(this.a),delete this.a,vr.X.H.call(this)},q(br,De),q(_r,Pe),q(wr,mr),wr.prototype.ua=function(){$t(this.a,"a")},wr.prototype.ta=function(t){$t(this.a,new br(t))},wr.prototype.sa=function(t){$t(this.a,new _r(t))},wr.prototype.ra=function(){$t(this.a,"b")},q(Sr,ke),Sr.prototype.a=function(){return new Tr(this.f)},Sr.prototype.c=function(t){return function(){return t}}({}),q(Tr,Ht);var Er=0;function Cr(t){t.f.read().then(t.Ta.bind(t)).catch(t.ca.bind(t))}function xr(t){t.readyState=4,t.g=null,t.f=null,t.m=null,Ar(t)}function Ar(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(A=Tr.prototype).open=function(t,e){if(this.readyState!=Er)throw this.abort(),Error("Error reopening a connection");this.s=t,this.o=e,this.readyState=1,Ar(this)},A.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.o,e)).then(this.Wa.bind(this),this.ca.bind(this))},A.abort=function(){this.responseText="",this.l=new Headers,this.status=0,this.f&&this.f.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,xr(this)),this.readyState=Er},A.Wa=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,Ar(this)),this.a&&(this.readyState=3,Ar(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.Ua.bind(this),this.ca.bind(this)):void 0!==O.ReadableStream&&"body"in t?(this.responseText="",this.f=t.body.getReader(),this.m=new TextDecoder,Cr(this)):t.text().then(this.Va.bind(this),this.ca.bind(this)))))},A.Ta=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.responseText+=e),t.done?xr(this):Ar(this),3==this.readyState&&Cr(this)}},A.Va=function(t){this.a&&(this.responseText=t,xr(this))},A.Ua=function(){this.a&&xr(this)},A.ca=function(){this.a&&xr(this)},A.setRequestHeader=function(t,e){this.l.append(t,e)},A.getResponseHeader=function(t){return this.b&&this.b.get(t.toLowerCase())||""},A.getAllResponseHeaders=function(){if(!this.b)return"";for(var t=[],e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Tr.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),yr.prototype.createWebChannel=yr.prototype.a,vr.prototype.send=vr.prototype.l,vr.prototype.open=vr.prototype.h,vr.prototype.close=vr.prototype.close,xe.NO_ERROR=0,xe.TIMEOUT=8,xe.HTTP_ERROR=6,Ae.COMPLETE="complete",Ie.EventType=Ne,Ne.OPEN="a",Ne.CLOSE="b",Ne.ERROR="c",Ne.MESSAGE="d",Ht.prototype.listen=Ht.prototype.wa,Mn.prototype.listenOnce=Mn.prototype.xa,Mn.prototype.getLastError=Mn.prototype.Ra,Mn.prototype.getLastErrorCode=Mn.prototype.va,Mn.prototype.getStatus=Mn.prototype.W,Mn.prototype.getResponseJson=Mn.prototype.Qa,Mn.prototype.getResponseText=Mn.prototype.$,Mn.prototype.send=Mn.prototype.ba;var kr=xe,Ir=Ae,Or=ye,Nr=Sr,Dr=Ie,Pr=Mn,Rr=n(4762),Fr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Fr.o=-1;var Lr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Mr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Rr.ZT)(e,t),e}(Error),Ur=new E.Yd("@firebase/firestore");function Vr(){return Ur.logLevel}function jr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ur.logLevel<=E.in.DEBUG){var r=e.map(Gr);Ur.debug.apply(Ur,(0,Rr.ev)(["Firestore (8.6.5): "+t],r))}}function qr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ur.logLevel<=E.in.ERROR){var r=e.map(Gr);Ur.error.apply(Ur,(0,Rr.ev)(["Firestore (8.6.5): "+t],r))}}function Br(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ur.logLevel<=E.in.WARN){var r=e.map(Gr);Ur.warn.apply(Ur,(0,Rr.ev)(["Firestore (8.6.5): "+t],r))}}function Gr(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Gf){return t}}function zr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.5) INTERNAL ASSERTION FAILED: "+t;throw qr(e),new Error(e)}function Zr(t,e){t||zr()}function Hr(t,e){return t}function $r(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Kr=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=$r(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Qr(t,e){return t<e?-1:t>e?1:0}function Jr(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Yr(t){return t+"\0"}var Wr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Mr(Lr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Mr(Lr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Mr(Lr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Mr(Lr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Qr(this.nanoseconds,t.nanoseconds):Qr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Xr=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Wr(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function ti(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ei(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ni(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ri=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&zr(),void 0===n?n=t.length-e:n>t.length-e&&zr(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),s=e.get(r);if(i<s)return-1;if(i>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ii=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Rr.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,s=t;i<s.length;i++){var o=s[i];if(o.indexOf("//")>=0)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");r.push.apply(r,o.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(ri),si=/^[_a-zA-Z][_a-zA-Z0-9]*$/,oi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Rr.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return si.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,s=function(){if(0===r.length)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},o=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Mr(Lr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Mr(Lr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Mr(Lr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(ri),ai=function(){function t(t){this.fields=t,t.sort(oi.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Jr(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),ui=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Qr(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();ui.EMPTY_BYTE_STRING=new ui("");var ci=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(t){if(Zr(!!t),"string"==typeof t){var e=0,n=ci.exec(t);if(Zr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:hi(t.seconds),nanos:hi(t.nanos)}}function hi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function di(t){return"string"==typeof t?ui.fromBase64String(t):ui.fromUint8Array(t)}function fi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function pi(t){var e=t.mapValue.fields.__previous_value__;return fi(e)?pi(e):e}function gi(t){var e=li(t.mapValue.fields.__local_write_time__.timestampValue);return new Wr(e.seconds,e.nanos)}function mi(t){return null==t}function yi(t){return 0===t&&1/t==-1/0}function vi(t){return"number"==typeof t&&Number.isInteger(t)&&!yi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var bi=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(ii.fromString(e))},t.fromName=function(e){return new t(ii.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ii.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return ii.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new ii(e.slice()))},t}();function _i(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fi(t)?4:10:zr()}function wi(t,e){var n=_i(t);if(n!==_i(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gi(t).isEqual(gi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=li(t.timestampValue),r=li(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return di(t.bytesValue).isEqual(di(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return hi(t.geoPointValue.latitude)===hi(e.geoPointValue.latitude)&&hi(t.geoPointValue.longitude)===hi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return hi(t.integerValue)===hi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=hi(t.doubleValue),r=hi(e.doubleValue);return n===r?yi(n)===yi(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Jr(t.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ti(n)!==ti(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!wi(n[i],r[i])))return!1;return!0}(t,e);default:return zr()}}function Si(t,e){return void 0!==(t.values||[]).find(function(t){return wi(t,e)})}function Ti(t,e){var n=_i(t),r=_i(e);if(n!==r)return Qr(n,r);switch(n){case 0:return 0;case 1:return Qr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=hi(t.integerValue||t.doubleValue),r=hi(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ei(t.timestampValue,e.timestampValue);case 4:return Ei(gi(t),gi(e));case 5:return Qr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=di(t),r=di(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var s=Qr(n[i],r[i]);if(0!==s)return s}return Qr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Qr(hi(t.latitude),hi(e.latitude));return 0!==n?n:Qr(hi(t.longitude),hi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var s=Ti(n[i],r[i]);if(s)return s}return Qr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(var o=0;o<r.length&&o<s.length;++o){var a=Qr(r[o],s[o]);if(0!==a)return a;var u=Ti(n[r[o]],i[s[o]]);if(0!==u)return u}return Qr(r.length,s.length)}(t.mapValue,e.mapValue);default:throw zr()}}function Ei(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Qr(t,e);var n=li(t),r=li(e),i=Qr(n.seconds,r.seconds);return 0!==i?i:Qr(n.nanos,r.nanos)}function Ci(t){return xi(t)}function xi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=li(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?di(t.bytesValue).toBase64():"referenceValue"in t?bi.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=xi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var s=i[r];n?n=!1:e+=",",e+=s+":"+xi(t.fields[s])}return e+"}"}(t.mapValue):zr();var e}function Ai(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function ki(t){return!!t&&"integerValue"in t}function Ii(t){return!!t&&"arrayValue"in t}function Oi(t){return!!t&&"nullValue"in t}function Ni(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Di(t){return!!t&&"mapValue"in t}function Pi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},li(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return ei(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=Pi(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Pi(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Ri=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Di(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Pi(e)},t.prototype.setAll=function(t){var e=this,n=oi.emptyPath(),r={},i=[];t.forEach(function(t,s){if(!n.isImmediateParentOf(s)){var o=e.getFieldsMap(n);e.applyChanges(o,r,i),r={},i=[],n=s.popLast()}t?r[s.lastSegment()]=Pi(t):i.push(s.lastSegment())});var s=this.getFieldsMap(n);this.applyChanges(s,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Di(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return wi(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Di(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){ei(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(Pi(this.value))},t}();function Fi(t){var e=[];return ei(t.fields,function(t,n){var r=new oi([t]);if(Di(n)){var i=Fi(n.mapValue).fields;if(0===i.length)e.push(r);else for(var s=0,o=i;s<o.length;s++)e.push(r.child(o[s]))}else e.push(r)}),new ai(e)}var Li=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Xr.min(),Ri.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Ri.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Ri.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Mi=function(t,e,n,r,i,s,o){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.h=null};function Ui(t,e,n,r,i,s,o){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),new Mi(t,e,n,r,i,s,o)}function Vi(t){var e=Hr(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Ci(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),mi(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Wi(e.startAt)),e.endAt&&(n+="|ub:",n+=Wi(e.endAt)),e.h=n}return e.h}function ji(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ts(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(s=e.filters[r]).op||!i.field.isEqual(s.field)||!wi(i.value,s.value))return!1;var i,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ns(t.startAt,e.startAt)&&ns(t.endAt,e.endAt)}function qi(t){return bi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Bi=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Rr.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Gi(t,n,r):"array-contains"===n?new $i(t,r):"in"===n?new Ki(t,r):"not-in"===n?new Qi(t,r):"array-contains-any"===n?new Ji(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new zi(t,n):new Zi(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Ti(e,this.value)):null!==e&&_i(this.value)===_i(e)&&this.m(Ti(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return zr()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Gi=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=bi.fromName(r.referenceValue),i}return(0,Rr.ZT)(e,t),e.prototype.matches=function(t){var e=bi.comparator(t.key,this.key);return this.m(e)},e}(Bi),zi=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Hi(0,n),r}return(0,Rr.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Bi),Zi=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Hi(0,n),r}return(0,Rr.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Bi);function Hi(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return bi.fromName(t.referenceValue)})}var $i=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Rr.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Ii(e)&&Si(e.arrayValue,this.value)},e}(Bi),Ki=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Rr.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Si(this.value.arrayValue,e)},e}(Bi),Qi=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Rr.ZT)(e,t),e.prototype.matches=function(t){if(Si(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Si(this.value.arrayValue,e)},e}(Bi),Ji=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Rr.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Ii(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Si(e.value.arrayValue,t)})},e}(Bi),Yi=function(t,e){this.position=t,this.before=e};function Wi(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Ci(t)}).join(",")}var Xi=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ts(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function es(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var s=e[i],o=t.position[i];if(r=s.field.isKeyField()?bi.comparator(bi.fromName(o.referenceValue),n.key):Ti(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ns(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!wi(t.position[n],e.position[n]))return!1;return!0}var rs=function(t,e,n,r,i,s,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s="F"),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.p=null,this.T=null};function is(t,e,n,r,i,s,o,a){return new rs(t,e,n,r,i,s,o,a)}function ss(t){return new rs(t)}function os(t){return!mi(t.limit)&&"F"===t.limitType}function as(t){return!mi(t.limit)&&"L"===t.limitType}function us(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function cs(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function ls(t){return null!==t.collectionGroup}function hs(t){var e=Hr(t);if(null===e.p){e.p=[];var n=cs(e),r=us(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Xi(n)),e.p.push(new Xi(oi.keyField(),"asc"));else{for(var i=!1,s=0,o=e.explicitOrderBy;s<o.length;s++){var a=o[s];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Xi(oi.keyField(),u))}}}return e.p}function ds(t){var e=Hr(t);if(!e.T)if("F"===e.limitType)e.T=Ui(e.path,e.collectionGroup,hs(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=hs(e);r<i.length;r++){var s=i[r];n.push(new Xi(s.field,"desc"===s.dir?"asc":"desc"))}var o=e.endAt?new Yi(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Yi(e.startAt.position,!e.startAt.before):null;e.T=Ui(e.path,e.collectionGroup,n,e.filters,e.limit,o,a)}return e.T}function fs(t,e,n){return new rs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ps(t,e){return ji(ds(t),ds(e))&&t.limitType===e.limitType}function gs(t){return Vi(ds(t))+"|lt:"+t.limitType}function ms(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ci(e.value);var e}).join(", ")+"]"),mi(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Wi(t.startAt)),t.endAt&&(e+=", endAt: "+Wi(t.endAt)),"Target("+e+")"}(ds(t))+"; limitType="+t.limitType+")"}function ys(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):bi.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!es(t.startAt,hs(t),e)||t.endAt&&es(t.endAt,hs(t),e))}(t,e)}function vs(t){return function(e,n){for(var r=!1,i=0,s=hs(t);i<s.length;i++){var o=s[i],a=bs(o,e,n);if(0!==a)return a;r=r||o.field.isKeyField()}return 0}}function bs(t,e,n){var r=t.field.isKeyField()?bi.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Ti(r,i):zr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return zr()}}function _s(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yi(e)?"-0":e}}function ws(t){return{integerValue:""+t}}function Ss(t,e){return vi(e)?ws(e):_s(t,e)}var Ts=function(){this._=void 0};function Es(t,e,n){return t instanceof As?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ks?Is(t,e):t instanceof Os?Ns(t,e):function(t,e){var n=xs(t,e),r=Ps(n)+Ps(t.A);return ki(n)&&ki(t.A)?ws(r):_s(t.R,r)}(t,e)}function Cs(t,e,n){return t instanceof ks?Is(t,e):t instanceof Os?Ns(t,e):n}function xs(t,e){return t instanceof Ds?ki(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var As=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Rr.ZT)(e,t),e}(Ts),ks=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Rr.ZT)(e,t),e}(Ts);function Is(t,e){for(var n=Rs(e),r=function(t){n.some(function(e){return wi(e,t)})||n.push(t)},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Os=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Rr.ZT)(e,t),e}(Ts);function Ns(t,e){for(var n=Rs(e),r=function(t){n=n.filter(function(e){return!wi(e,t)})},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Ds=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Rr.ZT)(e,t),e}(Ts);function Ps(t){return hi(t.integerValue||t.doubleValue)}function Rs(t){return Ii(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Fs=function(t,e){this.field=t,this.transform=e},Ls=function(t,e){this.version=t,this.transformResults=e},Ms=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Us(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Vs=function(){};function js(t,e,n){t instanceof Zs?function(t,e,n){var r=t.value.clone(),i=Ks(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Hs?function(t,e,n){if(Us(t.precondition,e)){var r=Ks(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll($s(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function qs(t,e,n){t instanceof Zs?function(t,e,n){if(Us(t.precondition,e)){var r=t.value.clone(),i=Qs(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(zs(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Hs?function(t,e,n){if(Us(t.precondition,e)){var r=Qs(t.fieldTransforms,n,e),i=e.data;i.setAll($s(t)),i.setAll(r),e.convertToFoundDocument(zs(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Us(t.precondition,e)&&e.convertToNoDocument(Xr.min())}(t,e)}function Bs(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var s=i[r],o=e.data.field(s.field),a=xs(s.transform,o||null);null!=a&&(null==n&&(n=Ri.empty()),n.set(s.field,a))}return n||null}function Gs(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Jr(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ks&&e instanceof ks||t instanceof Os&&e instanceof Os?Jr(t.elements,e.elements,wi):t instanceof Ds&&e instanceof Ds?wi(t.A,e.A):t instanceof As&&e instanceof As}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function zs(t){return t.isFoundDocument()?t.version:Xr.min()}var Zs=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var s=this;return(s=t.call(this)||this).key=e,s.value=n,s.precondition=r,s.fieldTransforms=i,s.type=0,s}return(0,Rr.ZT)(e,t),e}(Vs),Hs=function(t){function e(e,n,r,i,s){void 0===s&&(s=[]);var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return(0,Rr.ZT)(e,t),e}(Vs);function $s(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Ks(t,e,n){var r=new Map;Zr(t.length===n.length);for(var i=0;i<n.length;i++){var s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Cs(o,a,n[i]))}return r}function Qs(t,e,n){for(var r=new Map,i=0,s=t;i<s.length;i++){var o=s[i],a=o.transform,u=n.data.field(o.field);r.set(o.field,Es(a,u,e))}return r}var Js,Ys,Ws=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Rr.ZT)(e,t),e}(Vs),Xs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Rr.ZT)(e,t),e}(Vs),to=function(t){this.count=t};function eo(t){switch(t){case Lr.OK:return zr();case Lr.CANCELLED:case Lr.UNKNOWN:case Lr.DEADLINE_EXCEEDED:case Lr.RESOURCE_EXHAUSTED:case Lr.INTERNAL:case Lr.UNAVAILABLE:case Lr.UNAUTHENTICATED:return!1;case Lr.INVALID_ARGUMENT:case Lr.NOT_FOUND:case Lr.ALREADY_EXISTS:case Lr.PERMISSION_DENIED:case Lr.FAILED_PRECONDITION:case Lr.ABORTED:case Lr.OUT_OF_RANGE:case Lr.UNIMPLEMENTED:case Lr.DATA_LOSS:return!0;default:return zr()}}function no(t){if(void 0===t)return qr("GRPC error has no .code"),Lr.UNKNOWN;switch(t){case Js.OK:return Lr.OK;case Js.CANCELLED:return Lr.CANCELLED;case Js.UNKNOWN:return Lr.UNKNOWN;case Js.DEADLINE_EXCEEDED:return Lr.DEADLINE_EXCEEDED;case Js.RESOURCE_EXHAUSTED:return Lr.RESOURCE_EXHAUSTED;case Js.INTERNAL:return Lr.INTERNAL;case Js.UNAVAILABLE:return Lr.UNAVAILABLE;case Js.UNAUTHENTICATED:return Lr.UNAUTHENTICATED;case Js.INVALID_ARGUMENT:return Lr.INVALID_ARGUMENT;case Js.NOT_FOUND:return Lr.NOT_FOUND;case Js.ALREADY_EXISTS:return Lr.ALREADY_EXISTS;case Js.PERMISSION_DENIED:return Lr.PERMISSION_DENIED;case Js.FAILED_PRECONDITION:return Lr.FAILED_PRECONDITION;case Js.ABORTED:return Lr.ABORTED;case Js.OUT_OF_RANGE:return Lr.OUT_OF_RANGE;case Js.UNIMPLEMENTED:return Lr.UNIMPLEMENTED;case Js.DATA_LOSS:return Lr.DATA_LOSS;default:return zr()}}(Ys=Js||(Js={}))[Ys.OK=0]="OK",Ys[Ys.CANCELLED=1]="CANCELLED",Ys[Ys.UNKNOWN=2]="UNKNOWN",Ys[Ys.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ys[Ys.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ys[Ys.NOT_FOUND=5]="NOT_FOUND",Ys[Ys.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ys[Ys.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ys[Ys.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ys[Ys.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ys[Ys.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ys[Ys.ABORTED=10]="ABORTED",Ys[Ys.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ys[Ys.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ys[Ys.INTERNAL=13]="INTERNAL",Ys[Ys.UNAVAILABLE=14]="UNAVAILABLE",Ys[Ys.DATA_LOSS=15]="DATA_LOSS";var ro=function(){function t(t,e){this.comparator=t,this.root=e||so.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,so.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,so.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new io(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new io(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new io(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new io(this.root,t,this.comparator,!0)},t}(),io=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),so=function(){function t(e,n,r,i,s){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=s?s:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,s){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw zr();if(this.right.isRed())throw zr();var t=this.left.check();if(t!==this.right.check())throw zr();return t+(this.isRed()?0:1)},t}();so.EMPTY=null,so.RED=!0,so.BLACK=!1,so.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw zr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw zr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw zr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw zr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw zr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new so(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var oo=function(){function t(t){this.comparator=t,this.data=new ro(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ao(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ao(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ao=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),uo=new ro(bi.comparator);function co(){return uo}var lo=new ro(bi.comparator);function ho(){return lo}var fo=new ro(bi.comparator);function po(){return fo}var go=new oo(bi.comparator);function mo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=go,r=0,i=t;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var yo=new oo(Qr);function vo(){return yo}var bo=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,_o.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Xr.min(),r,vo(),co(),mo())},t}(),_o=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(ui.EMPTY_BYTE_STRING,n,mo(),mo(),mo())},t}(),wo=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},So=function(t,e){this.targetId=t,this.V=e},To=function(t,e,n,r){void 0===n&&(n=ui.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Eo=function(){function t(){this.S=0,this.D=Ao(),this.C=ui.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=mo(),e=mo(),n=mo();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:zr()}}),new _o(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Ao()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Co=function(){function t(t){this.W=t,this.G=new Map,this.H=co(),this.J=xo(),this.Y=new oo(Qr)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,s=t.removedTargetIds;i<s.length;i++)this.tt(r=s[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:zr()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(qi(i))if(0===n){var s=new bi(i.path);this.tt(e,s,Li.newNoDocument(s,Xr.min()))}else Zr(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var s=e.ot(i);if(s){if(r.current&&qi(s.target)){var o=new bi(s.target.path);null!==e.H.get(o)||e.at(i,o)||e.tt(i,o,Li.newNoDocument(o,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=mo();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new bo(t,n,this.Y,this.H,r);return this.H=co(),this.J=xo(),this.Y=new oo(Qr),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Eo,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new oo(Qr),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||jr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Eo),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function xo(){return new ro(bi.comparator)}function Ao(){return new ro(bi.comparator)}var ko={asc:"ASCENDING",desc:"DESCENDING"},Io={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Oo=function(t,e){this.databaseId=t,this.I=e};function No(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Do(t,e){return t.I?e.toBase64():e.toUint8Array()}function Po(t,e){return No(t,e.toTimestamp())}function Ro(t){return Zr(!!t),Xr.fromTimestamp(function(t){var e=li(t);return new Wr(e.seconds,e.nanos)}(t))}function Fo(t,e){return function(t){return new ii(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Lo(t){var e=ii.fromString(t);return Zr(oa(e)),e}function Mo(t,e){return Fo(t.databaseId,e.path)}function Uo(t,e){var n=Lo(e);if(n.get(1)!==t.databaseId.projectId)throw new Mr(Lr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Mr(Lr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new bi(Bo(n))}function Vo(t,e){return Fo(t.databaseId,e)}function jo(t){var e=Lo(t);return 4===e.length?ii.emptyPath():Bo(e)}function qo(t){return new ii(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Bo(t){return Zr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Go(t,e,n){return{name:Mo(t,e),fields:n.value.mapValue.fields}}function zo(t,e,n){var r=Uo(t,e.name),i=Ro(e.updateTime),s=new Ri({mapValue:{fields:e.fields}}),o=Li.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Zo(t,e){var n;if(e instanceof Zs)n={update:Go(t,e.key,e.value)};else if(e instanceof Ws)n={delete:Mo(t,e.key)};else if(e instanceof Hs)n={update:Go(t,e.key,e.data),updateMask:sa(e.fieldMask)};else{if(!(e instanceof Xs))return zr();n={verify:Mo(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof As)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ks)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Os)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ds)return{fieldPath:e.field.canonicalString(),increment:n.A};throw zr()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Po(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:zr()}(t,e.precondition)),n}function Ho(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ms.updateTime(Ro(t.updateTime)):void 0!==t.exists?Ms.exists(t.exists):Ms.none()}(e.currentDocument):Ms.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Zr("REQUEST_TIME"===e.setToServerValue),n=new As):"appendMissingElements"in e?n=new ks(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Os(e.removeAllFromArray.values||[]):"increment"in e?n=new Ds(t,e.increment):zr();var r=oi.fromServerFormat(e.fieldPath);return new Fs(r,n)}(t,e)}):[];if(e.update){var i=Uo(t,e.update.name),s=new Ri({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new ai((t.fieldPaths||[]).map(function(t){return oi.fromServerFormat(t)}))}(e.updateMask);return new Hs(i,s,o,n,r)}return new Zs(i,s,n,r)}if(e.delete){var a=Uo(t,e.delete);return new Ws(a,n)}if(e.verify){var u=Uo(t,e.verify);return new Xs(u,n)}return zr()}function $o(t,e){return{documents:[Vo(t,e.path)]}}function Ko(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Vo(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Vo(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Ni(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NAN"}};if(Oi(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ni(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NOT_NAN"}};if(Oi(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ea(t.field),op:ta(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var s=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:ea(t.field),direction:Xo(t.dir)}}(t)})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);var o=function(t,e){return t.I||mi(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=Yo(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Yo(e.endAt)),n}function Qo(t){var e=jo(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Zr(1===r);var s=n.from[0];s.allDescendants?i=s.collectionId:e=e.child(s.collectionId)}var o=[];n.where&&(o=Jo(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Xi(na(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return mi(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Wo(n.startAt));var l=null;return n.endAt&&(l=Wo(n.endAt)),is(e,i,a,o,u,"F",c,l)}function Jo(t){return t?void 0!==t.unaryFilter?[ia(t)]:void 0!==t.fieldFilter?[ra(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Jo(t)}).reduce(function(t,e){return t.concat(e)}):zr():[]}function Yo(t){return{before:t.before,values:t.position}}function Wo(t){return new Yi(t.values||[],!!t.before)}function Xo(t){return ko[t]}function ta(t){return Io[t]}function ea(t){return{fieldPath:t.canonicalString()}}function na(t){return oi.fromServerFormat(t.fieldPath)}function ra(t){return Bi.create(na(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return zr()}}(t.fieldFilter.op),t.fieldFilter.value)}function ia(t){switch(t.unaryFilter.op){case"IS_NAN":var e=na(t.unaryFilter.field);return Bi.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=na(t.unaryFilter.field);return Bi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=na(t.unaryFilter.field);return Bi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=na(t.unaryFilter.field);return Bi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return zr()}}function sa(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function oa(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function aa(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ca(e)),e=ua(t.get(n),e);return ca(e)}function ua(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function ca(t){return t+"\x01\x01"}function la(t){var e=t.length;if(Zr(e>=2),2===e)return Zr("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ii.emptyPath();for(var n=e-2,r=[],i="",s=0;s<e;){var o=t.indexOf("\x01",s);switch((o<0||o>n)&&zr(),t.charAt(o+1)){case"\x01":var a=t.substring(s,o),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:zr()}s=o+2}return new ii(r)}var ha=function(t,e){this.seconds=t,this.nanoseconds=e},da=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};da.store="owner",da.key="owner";var fa=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};fa.store="mutationQueues",fa.keyPath="userId";var pa=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};pa.store="mutations",pa.keyPath="batchId",pa.userMutationsIndex="userMutationsIndex",pa.userMutationsKeyPath=["userId","batchId"];var ga=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,aa(e)]},t.key=function(t,e,n){return[t,aa(e),n]},t}();ga.store="documentMutations",ga.PLACEHOLDER=new ga;var ma=function(t,e){this.path=t,this.readTime=e},ya=function(t,e){this.path=t,this.version=e},va=function(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};va.store="remoteDocuments",va.readTimeIndex="readTimeIndex",va.readTimeIndexPath="readTime",va.collectionReadTimeIndex="collectionReadTimeIndex",va.collectionReadTimeIndexPath=["parentPath","readTime"];var ba=function(t){this.byteSize=t};ba.store="remoteDocumentGlobal",ba.key="remoteDocumentGlobalKey";var _a=function(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o};_a.store="targets",_a.keyPath="targetId",_a.queryTargetsIndexName="queryTargetsIndex",_a.queryTargetsKeyPath=["canonicalId","targetId"];var wa=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};wa.store="targetDocuments",wa.keyPath=["targetId","path"],wa.documentTargetsIndex="documentTargetsIndex",wa.documentTargetsKeyPath=["path","targetId"];var Sa=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Sa.key="targetGlobalKey",Sa.store="targetGlobal";var Ta=function(t,e){this.collectionId=t,this.parent=e};Ta.store="collectionParents",Ta.keyPath=["collectionId","parent"];var Ea=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ea.store="clientMetadata",Ea.keyPath="clientId";var Ca=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Ca.store="bundles",Ca.keyPath="bundleId";var xa=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};xa.store="namedQueries",xa.keyPath="name";var Aa=(0,Rr.ev)((0,Rr.ev)([],(0,Rr.ev)((0,Rr.ev)([],(0,Rr.ev)((0,Rr.ev)([],(0,Rr.ev)((0,Rr.ev)([],[fa.store,pa.store,ga.store,va.store,_a.store,da.store,Sa.store,wa.store]),[Ea.store])),[ba.store])),[Ta.store])),[Ca.store,xa.store]),ka="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ia=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Oa=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Na=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&zr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,s=!1;e.forEach(function(e){++r,e.next(function(){++i,s&&i===r&&t()},function(t){return n(t)})}),s=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,s=e;i<s.length;i++)r(s[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Da=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Oa,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Fa(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=ja(e.target.error);n.ft.reject(new Fa(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Fa(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(jr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Ma(e)},t}(),Pa=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,T.z$)())&&qr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return jr("SimpleDb","Removing database:",t),Ua(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,T.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Rr.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Rr.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(jr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Fa(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Mr(Lr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Fa(t,n))},i.onupgradeneeded=function(t){jr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){jr("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Rr.mG)(this,void 0,void 0,function(){var i,s,o,a,u;return(0,Rr.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,s=0,o=function(){var e,o,u,c,l;return(0,Rr.Jh)(this,function(h){switch(h.label){case 0:++s,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Da.open(a.db,t,i?"readonly":"readwrite",n),o=r(e).catch(function(t){return e.abort(t),Na.reject(t)}).toPromise(),u={},o.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),o),u)];case 4:return jr("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&s<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,o()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ra=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Ua(this.Pt.delete())},t}(),Fa=function(t){function e(e,n){var r=this;return(r=t.call(this,Lr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Rr.ZT)(e,t),e}(Mr);function La(t){return"IndexedDbTransactionError"===t.name}var Ma=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(jr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(jr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ua(n)},t.prototype.add=function(t){return jr("SimpleDb","ADD",this.store.name,t,t),Ua(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ua(this.store.get(t)).next(function(n){return void 0===n&&(n=null),jr("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return jr("SimpleDb","DELETE",this.store.name,t),Ua(this.store.delete(t))},t.prototype.count=function(){return jr("SimpleDb","COUNT",this.store.name),Ua(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){jr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Na(function(n,r){e.onerror=function(t){var e=ja(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Na(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var s=new Ra(i),o=e(i.primaryKey,i.value,s);if(o instanceof Na){var a=o.catch(function(t){return s.done(),Na.reject(t)});n.push(a)}s.isDone?r():null===s.Dt?i.continue():i.continue(s.Dt)}else r()}}).next(function(){return Na.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ua(t){return new Na(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=ja(t.target.error);n(e)}})}var Va=!1;function ja(t){var e=Pa._t((0,T.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Mr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Va||(Va=!0,setTimeout(function(){throw r},0)),r}}return t}var qa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Rr.ZT)(e,t),e}(Ia);function Ba(t,e){var n=Hr(t);return Pa.It(n.Mt,e)}var Ga=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&js(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(s=n[e]).key.isEqual(t.key)&&qs(s,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var s;(s=i[r]).key.isEqual(t.key)&&qs(s,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Xr.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},mo())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Jr(this.mutations,t.mutations,function(t,e){return Gs(t,e)})&&Jr(this.baseMutations,t.baseMutations,function(t,e){return Gs(t,e)})},t}(),za=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Zr(e.mutations.length===r.length);for(var i=po(),s=e.mutations,o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)},t}(),Za=function(){function t(t,e,n,r,i,s,o){void 0===i&&(i=Xr.min()),void 0===s&&(s=Xr.min()),void 0===o&&(o=ui.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Ha=function(t){this.Lt=t};function $a(t,e){if(e.document)return zo(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=bi.fromSegments(e.noDocument.path),r=Wa(e.noDocument.readTime),i=Li.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var s=bi.fromSegments(e.unknownDocument.path);return r=Wa(e.unknownDocument.version),Li.newUnknownDocument(s,r)}return zr()}function Ka(t,e,n){var r=Qa(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var s=function(t,e){return{name:Mo(t,e.key),fields:e.data.value.mapValue.fields,updateTime:No(t,e.version.toTimestamp())}}(t.Lt,e),o=e.hasCommittedMutations;return new va(null,null,s,o,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Ya(e.version);return o=e.hasCommittedMutations,new va(null,new ma(a,u),null,o,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Ya(e.version);return new va(new ya(c,l),null,null,!0,r,i)}return zr()}function Qa(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ja(t){var e=new Wr(t[0],t[1]);return Xr.fromTimestamp(e)}function Ya(t){var e=t.toTimestamp();return new ha(e.seconds,e.nanoseconds)}function Wa(t){var e=new Wr(t.seconds,t.nanoseconds);return Xr.fromTimestamp(e)}function Xa(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Ho(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Ho(t.Lt,e)}),s=Wr.fromMillis(e.localWriteTimeMs);return new Ga(e.batchId,s,n,i)}function tu(t){var e,n,r=Wa(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Wa(t.lastLimboFreeSnapshotVersion):Xr.min();return void 0!==t.query.documents?(Zr(1===(n=t.query).documents.length),e=ds(ss(jo(n.documents[0])))):e=function(t){return ds(Qo(t))}(t.query),new Za(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ui.fromBase64String(t.resumeToken))}function eu(t,e){var n,r=Ya(e.snapshotVersion),i=Ya(e.lastLimboFreeSnapshotVersion);n=qi(e.target)?$o(t.Lt,e.target):Ko(t.Lt,e.target);var s=e.resumeToken.toBase64();return new _a(e.targetId,Vi(e.target),r,s,e.sequenceNumber,i,n)}function nu(t){var e=Qo({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?fs(e,e.limit,"L"):e}var ru=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return iu(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Wa(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return iu(t).put({bundleId:(n=e).id,createTime:Ya(Ro(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return su(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:nu(e.bundledQuery),readTime:Wa(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return su(t).put(function(t){return{name:t.name,readTime:Ya(Ro(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function iu(t){return Ba(t,Ca.store)}function su(t){return Ba(t,xa.store)}var ou=function(){function t(){this.Bt=new au}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Na.resolve()},t.prototype.getCollectionParents=function(t,e){return Na.resolve(this.Bt.getEntries(e))},t}(),au=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new oo(ii.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new oo(ii.comparator)).toArray()},t}(),uu=function(){function t(){this.qt=new au}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var s={collectionId:r,parent:aa(i)};return cu(t).put(s)}return Na.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Yr(e),""],!1,!0);return cu(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.collectionId!==e)break;n.push(la(s.parent))}return n})},t}();function cu(t){return Ba(t,Ta.store)}var lu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hu=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function du(t,e,n){var r=t.store(pa.store),i=t.store(ga.store),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:o},function(t,e,n){return a++,n.delete()});s.push(u.next(function(){Zr(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=ga.key(e,d.key.path,n.batchId);s.push(i.delete(f)),c.push(d.key)}return Na.waitFor(s).next(function(){return c})}function fu(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw zr();e=t.noDocument}return JSON.stringify(e).length}hu.DEFAULT_COLLECTION_PERCENTILE=10,hu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hu.DEFAULT=new hu(41943040,hu.DEFAULT_COLLECTION_PERCENTILE,hu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hu.DISABLED=new hu(-1,0,0);var pu=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Zr(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mu(t).$t({index:pa.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,s=yu(t),o=mu(t);return o.add({}).next(function(a){Zr("number"==typeof a);for(var u=new Ga(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Zo(t.Lt,e)}),i=n.mutations.map(function(e){return Zo(t.Lt,e)});return new pa(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new oo(function(t,e){return Qr(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=ga.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(o.put(c)),l.push(s.put(g,ga.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Na.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return mu(t).get(e).next(function(t){return t?(Zr(t.userId===n.userId),Xa(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Na.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return mu(t).$t({index:pa.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Zr(e.batchId>=r),s=Xa(n.R,e)),i.done()}).next(function(){return s})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return mu(t).$t({index:pa.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mu(t).Nt(pa.userMutationsIndex,n).next(function(t){return t.map(function(t){return Xa(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=ga.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return yu(t).$t({range:i},function(r,i,o){var a=r[0],u=r[2],c=la(r[1]);if(a===n.userId&&e.path.isEqual(c))return mu(t).get(u).next(function(t){if(!t)throw zr();Zr(t.userId===n.userId),s.push(Xa(n.R,t))});o.done()}).next(function(){return s})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new oo(Qr),i=[];return e.forEach(function(e){var s=ga.prefixForPath(n.userId,e.path),o=IDBKeyRange.lowerBound(s),a=yu(t).$t({range:o},function(t,i,s){var o=t[0],a=t[2],u=la(t[1]);o===n.userId&&e.path.isEqual(u)?r=r.add(a):s.done()});i.push(a)}),Na.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,s=ga.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new oo(Qr);return yu(t).$t({range:o},function(t,e,s){var o=t[0],u=t[2],c=la(t[1]);o===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):s.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(mu(t).get(e).next(function(t){if(null===t)throw zr();Zr(t.userId===n.userId),r.push(Xa(n.R,t))}))}),Na.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return du(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Na.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Na.resolve();var r=IDBKeyRange.lowerBound(ga.prefixForUser(e.userId)),i=[];return yu(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var s=la(t[1]);i.push(s)}else r.done()}).next(function(){Zr(0===i.length)})})},t.prototype.containsKey=function(t,e){return gu(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return vu(t).get(this.userId).next(function(t){return t||new fa(e.userId,-1,"")})},t}();function gu(t,e,n){var r=ga.prefixForPath(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return yu(t).$t({range:s,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(o=!0),r.done()}).next(function(){return o})}function mu(t){return Ba(t,pa.store)}function yu(t){return Ba(t,ga.store)}function vu(t){return Ba(t,fa.store)}var bu=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),_u=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new bu(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Xr.fromTimestamp(new Wr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return wu(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Zr(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return wu(t).$t(function(o,a){var u=tu(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,s.push(r.removeTargetData(t,u)))}).next(function(){return Na.waitFor(s)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return wu(t).$t(function(t,n){var r=tu(n);e(r)})},t.prototype.Xt=function(t){return Su(t).get(Sa.key).next(function(t){return Zr(null!==t),t})},t.prototype.Zt=function(t,e){return Su(t).put(Sa.key,e)},t.prototype.te=function(t,e){return wu(t).put(eu(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Vi(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return wu(t).$t({range:r,index:_a.queryTargetsIndexName},function(t,n,r){var s=tu(n);ji(e,s.target)&&(i=s,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],s=Tu(t);return e.forEach(function(e){var o=aa(e.path);i.push(s.put(new wa(n,o))),i.push(r.referenceDelegate.addReference(t,n,e))}),Na.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Tu(t);return Na.forEach(e,function(e){var s=aa(e.path);return Na.waitFor([i.delete([n,s]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Tu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Tu(t),i=mo();return r.$t({range:n,kt:!0},function(t,e,n){var r=la(t[1]),s=new bi(r);i=i.add(s)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=aa(e.path),r=IDBKeyRange.bound([n],[Yr(n)],!1,!0),i=0;return Tu(t).$t({index:wa.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return wu(t).get(e).next(function(t){return t?tu(t):null})},t}();function wu(t){return Ba(t,_a.store)}function Su(t){return Ba(t,Sa.store)}function Tu(t){return Ba(t,wa.store)}function Eu(t){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(e){if(t.code!==Lr.FAILED_PRECONDITION||t.message!==ka)throw t;return jr("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Cu(t,e){var n=t[1],r=e[1],i=Qr(t[0],e[0]);return 0===i?Qr(n,r):i}var xu=function(){function t(t){this.ne=t,this.buffer=new oo(Cu),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Cu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Au=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;jr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Rr.mG)(e,void 0,void 0,function(){var e;return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return La(e=n.sent())?(jr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Eu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),ku=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Na.resolve(Fr.o);var r=new xu(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(jr("LruGarbageCollector","Garbage collection skipped; disabled"),Na.resolve(lu)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(jr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),lu):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,s,o,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(jr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Vr()<=E.in.DEBUG&&jr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+r+" in "+(o-s)+"ms\n\tRemoved "+i+" targets in "+(a-o)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Na.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Iu=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new ku(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Ou(t,n)},t.prototype.removeReference=function(t,e,n){return Ou(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Ou(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return vu(t).Ot(function(r){return gu(t,r,e).next(function(t){return t&&(n=!0),Na.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.we(t,function(o,a){if(a<=e){var u=n._e(t,o).next(function(e){if(!e)return s++,r.getEntry(t,o).next(function(){return r.removeEntry(o),Tu(t).delete([0,aa(o.path)])})});i.push(u)}}).next(function(){return Na.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return s})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Ou(t,e)},t.prototype.we=function(t,e){var n,r=Tu(t),i=Fr.o;return r.$t({index:wa.documentTargetsIndex},function(t,r){var s=r.path,o=r.sequenceNumber;0===t[0]?(i!==Fr.o&&e(new bi(la(n)),i),i=o,n=s):i=Fr.o}).next(function(){i!==Fr.o&&e(new bi(la(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Ou(t,e){return Tu(t).put(function(t,e){return new wa(0,aa(t.path),e)}(e,t.currentSequenceNumber))}var Nu=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s[1];if(this.equalsFn(s[0],t))return o}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ei(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];t(s[0],s[1])}})},t.prototype.isEmpty=function(){return ni(this.inner)},t}(),Du=function(){function t(){this.changes=new Nu(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Xr.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Li.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Na.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Pu=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Lu(t).put(Mu(e),n)},t.prototype.removeEntry=function(t,e){var n=Lu(t),r=Mu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Lu(t).get(Mu(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Lu(t).get(Mu(e)).next(function(t){return{document:n.ye(e,t),size:fu(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=co();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=co(),i=new ro(bi.comparator);return this.pe(t,e,function(t,e){var s=n.ye(t,e);r=r.insert(t,s),i=i.insert(t,fu(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Na.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),s=i.getNext();return Lu(t).$t({range:r},function(t,e,r){for(var o=bi.fromSegments(t);s&&bi.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,e),s=i.hasNext()?i.getNext():null),s?r.Ct(s.path.toArray()):r.done()}).next(function(){for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=co(),s=e.path.length+1,o={};if(n.isEqual(Xr.min())){var a=e.path.toArray();o.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Qa(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=va.collectionReadTimeIndex}return Lu(t).$t(o,function(t,n,o){if(t.length===s){var a=$a(r.R,n);e.path.isPrefixOf(a.key.path)?ys(e,a)&&(i=i.insert(a.key,a)):o.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Ru(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Fu(t).get(ba.key).next(function(t){return Zr(!!t),t})},t.prototype.me=function(t,e){return Fu(t).put(ba.key,e)},t.prototype.ye=function(t,e){if(e){var n=$a(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Xr.min()))return n}return Li.newInvalidDocument(t)},t}(),Ru=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Nu(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Rr.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new oo(function(t,e){return Qr(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(s,o){var a=e.Ae.get(s);if(o.document.isValidDocument()){var u=Ka(e.Ie.R,o.document,e.getReadTime(s));i=i.add(s.path.popLast());var c=fu(u);r+=c-a,n.push(e.Ie.addEntry(t,s,u))}else if(r-=a,e.trackRemovals){var l=Ka(e.Ie.R,Li.newNoDocument(s,Xr.min()),e.getReadTime(s));n.push(e.Ie.addEntry(t,s,l))}else n.push(e.Ie.removeEntry(t,s))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Na.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Du);function Fu(t){return Ba(t,ba.store)}function Lu(t){return Ba(t,va.store)}function Mu(t){return t.path.toArray()}var Uu=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Zr(n<r&&n>=0&&r<=11);var s=new Da("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(da.store)}(t),function(t){t.createObjectStore(fa.store,{keyPath:fa.keyPath}),t.createObjectStore(pa.store,{keyPath:pa.keyPath,autoIncrement:!0}).createIndex(pa.userMutationsIndex,pa.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ga.store)}(t),Vu(t),function(t){t.createObjectStore(va.store)}(t));var o=Na.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(wa.store),t.deleteObjectStore(_a.store),t.deleteObjectStore(Sa.store)}(t),Vu(t)),o=o.next(function(){return function(t){var e=t.store(Sa.store),n=new Sa(0,0,Xr.min().toTimestamp(),0);return e.put(Sa.key,n)}(s)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(pa.store).Nt().next(function(n){t.deleteObjectStore(pa.store),t.createObjectStore(pa.store,{keyPath:pa.keyPath,autoIncrement:!0}).createIndex(pa.userMutationsIndex,pa.userMutationsKeyPath,{unique:!0});var r=e.store(pa.store),i=n.map(function(t){return r.put(t)});return Na.waitFor(i)})}(t,s)})),o=o.next(function(){!function(t){t.createObjectStore(Ea.store,{keyPath:Ea.keyPath})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.Re(s)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(ba.store)}(t),i.be(s)})),n<7&&r>=7&&(o=o.next(function(){return i.ve(s)})),n<8&&r>=8&&(o=o.next(function(){return i.Pe(t,s)})),n<9&&r>=9&&(o=o.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(va.store);e.createIndex(va.readTimeIndex,va.readTimeIndexPath,{unique:!1}),e.createIndex(va.collectionReadTimeIndex,va.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(o=o.next(function(){return i.Ve(s)})),n<11&&r>=11&&(o=o.next(function(){!function(t){t.createObjectStore(Ca.store,{keyPath:Ca.keyPath})}(t),function(t){t.createObjectStore(xa.store,{keyPath:xa.keyPath})}(t)})),o},t.prototype.be=function(t){var e=0;return t.store(va.store).$t(function(t,n){e+=fu(n)}).next(function(){var n=new ba(e);return t.store(ba.store).put(ba.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(fa.store),r=t.store(pa.store);return n.Nt().next(function(n){return Na.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(pa.userMutationsIndex,i).next(function(r){return Na.forEach(r,function(r){Zr(r.userId===n.userId);var i=Xa(e.R,r);return du(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(wa.store),n=t.store(va.store);return t.store(Sa.store).get(Sa.key).next(function(t){var r=[];return n.$t(function(n,i){var s=new ii(n),o=function(t){return[0,aa(t)]}(s);r.push(e.get(o).next(function(n){return n?Na.resolve():function(n){return e.put(new wa(0,aa(n),t.highestListenSequenceNumber))}(s)}))}).next(function(){return Na.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Ta.store,{keyPath:Ta.keyPath});var n=e.store(Ta.store),r=new au,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:aa(i)})}};return e.store(va.store).$t({kt:!0},function(t,e){var n=new ii(t);return i(n.popLast())}).next(function(){return e.store(ga.store).$t({kt:!0},function(t,e){var n=la(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(_a.store);return n.$t(function(t,r){var i=tu(r),s=eu(e.R,i);return n.put(s)})},t}();function Vu(t){t.createObjectStore(wa.store,{keyPath:wa.keyPath}).createIndex(wa.documentTargetsIndex,wa.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(_a.store,{keyPath:_a.keyPath}).createIndex(_a.queryTargetsIndexName,_a.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Sa.store)}var ju="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qu=function(){function t(e,n,r,i,s,o,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=o,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Mr(Lr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Iu(this,i),this.Le=n+"main",this.R=new Ha(u),this.Be=new Pa(this.Le,11,new Uu(this.R)),this.qe=new _u(this.referenceDelegate,this.R),this.Ut=new uu,this.Ue=function(t,e){return new Pu(t,e)}(this.R,this.Ut),this.Qe=new ru,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&qr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Mr(Lr.FAILED_PRECONDITION,ju);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Fr(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Rr.mG)(e,void 0,void 0,function(){return(0,Rr.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Rr.mG)(e,void 0,void 0,function(){return(0,Rr.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Rr.mG)(e,void 0,void 0,function(){return(0,Rr.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Gu(e).put(new Ea(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(La(e))return jr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return jr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Bu(t).get(da.key).next(function(t){return Na.resolve(e.tn(t))})},t.prototype.en=function(t){return Gu(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Rr.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Rr.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Ba(t,Ea.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Na.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Na.resolve(!0):Bu(t).get(da.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Mr(Lr.FAILED_PRECONDITION,ju);return!1}}return!(!e.networkEnabled||!e.inForeground)||Gu(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&jr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Rr.mG)(this,void 0,void 0,function(){var t=this;return(0,Rr.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[da.store,Ea.store],function(e){var n=new qa(e,Fr.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Gu(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return pu.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return jr("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Aa,function(s){return r=new qa(s,i.Ne?i.Ne.next():Fr.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw qr("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Mr(Lr.FAILED_PRECONDITION,ka);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Bu(t).get(da.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Mr(Lr.FAILED_PRECONDITION,ju)})},t.prototype.Ze=function(t){var e=new da(this.clientId,this.allowTabSynchronization,Date.now());return Bu(t).put(da.key,e)},t.yt=function(){return Pa.yt()},t.prototype.Xe=function(t){var e=this,n=Bu(t);return n.get(da.key).next(function(t){return e.tn(t)?(jr("IndexedDbPersistence","Releasing primary lease."),n.delete(da.key)):Na.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(qr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return jr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return qr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){qr("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Bu(t){return Ba(t,da.store)}function Gu(t){return Ba(t,Ea.store)}function zu(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Zu=function(t,e){this.progress=t,this.wn=e},Hu=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return bi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):ls(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new bi(e)).next(function(t){var e=ho();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,s=ho();return this.Ut.getCollectionParents(t,i).next(function(o){return Na.forEach(o,function(o){var a=function(t,e){return new rs(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){s=s.insert(t,e)})})}).next(function(){return s})})},t.prototype.An=function(t,e,n){var r,i,s=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,s._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return s.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var s=n[e],o=0,a=s.mutations;o<a.length;o++){var u=a[o],c=u.key,l=r.get(c);null==l&&(l=Li.newInvalidDocument(c),r=r.insert(c,l)),qs(u,l,s.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){ys(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=mo(),i=0,s=e;i<s.length;i++)for(var o=0,a=s[i].mutations;o<a.length;o++){var u=a[o];u instanceof Hs&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),$u=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=mo(),i=mo(),s=0,o=n.docChanges;s<o.length;s++){var a=o[s];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ku=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Xr.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(s){var o=i.Cn(e,s);return(os(e)||as(e))&&i.Nn(e.limitType,o,r,n)?i.Dn(t,e):(Vr()<=E.in.DEBUG&&jr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ms(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return o.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new oo(vs(t));return e.forEach(function(e,r){ys(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Vr()<=E.in.DEBUG&&jr("QueryEngine","Using full collection scan to execute query:",ms(e)),this.Sn.getDocumentsMatchingQuery(t,e,Xr.min())},t}(),Qu=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new ro(Qr),this.kn=new Nu(function(t){return Vi(t)},ji),this.$n=Xr.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Hu(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Ju(t,e,n,r){return new Qu(t,e,n,r)}function Yu(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,Rr.Jh)(this,function(o){switch(o.label){case 0:return n=Hr(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var s;return n._n.getAllMutationBatches(t).next(function(o){return s=o,r=n.persistence.getMutationQueue(e),i=new Hu(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],o=mo(),a=0,u=s;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)o=o.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)o=o.add(m[g].key)}return i.pn(t,o).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return s=o.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s)]}})})}function Wu(t,e){var n=Hr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,s=i.keys(),o=Na.resolve();return s.forEach(function(t){o=o.next(function(){return r.getEntry(e,t)}).next(function(e){var s=n.docVersions.get(t);Zr(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),o.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Xu(t){var e=Hr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function tc(t,e){var n=Hr(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var s=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var o=[];e.targetChanges.forEach(function(e,s){var a=i.get(s);if(a){o.push(n.qe.removeMatchingKeys(t,e.removedDocuments,s).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,s)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(s,c),function(t,e,n){return Zr(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&o.push(n.qe.updateTargetData(t,c))}}});var a=co();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),o.push(ec(t,s,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Xr.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});o.push(u)}return Na.waitFor(o).next(function(){return s.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function ec(t,e,n,r,i){var s=mo();return n.forEach(function(t){return s=s.add(t)}),e.getEntries(t,s).next(function(t){var s=co();return n.forEach(function(n,o){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Xr.min())?(e.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,u),s=s.insert(n,o)):jr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function nc(t,e){var n=Hr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function rc(t,e){var n=Hr(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Na.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Za(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function ic(t,e,n){return(0,Rr.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,Rr.Jh)(this,function(a){switch(a.label){case 0:r=Hr(t),i=r.Fn.get(e),s=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!La(o=a.sent()))throw o;return jr("LocalStore","Failed to update sequence numbers for target "+e+": "+o),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function sc(t,e,n){var r=Hr(t),i=Xr.min(),s=mo();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Hr(t),i=r.kn.get(n);return void 0!==i?Na.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,ds(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){s=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Xr.min(),n?s:mo())}).next(function(t){return{documents:t,Bn:s}})})}function oc(t,e){var n=Hr(t),r=Hr(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function ac(t){var e=Hr(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Hr(t),i=co(),s=Qa(n),o=Lu(e),a=IDBKeyRange.lowerBound(s,!0);return o.$t({index:va.readTimeIndex,range:a},function(t,e){var n=$a(r.R,e);i=i.insert(n.key,n),s=e.readTime}).next(function(){return{wn:i,readTime:Ja(s)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function uc(t){return(0,Rr.mG)(this,void 0,void 0,function(){var e;return(0,Rr.Jh)(this,function(n){return[2,(e=Hr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Lu(t),n=Xr.min();return e.$t({index:va.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Ja(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function cc(t,e,n,r){return(0,Rr.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c,l,h,d,f;return(0,Rr.Jh)(this,function(p){switch(p.label){case 0:for(i=Hr(t),s=mo(),o=co(),a=po(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(s=s.add(h)),o=o.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.On.newChangeBuffer({trackRemovals:!0}),[4,rc(i,function(t){return ds(ss(ii.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return ec(t,d,o,Xr.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,s,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function lc(t,e,n){return void 0===n&&(n=mo()),(0,Rr.mG)(this,void 0,void 0,function(){var r,i;return(0,Rr.Jh)(this,function(s){switch(s.label){case 0:return[4,rc(t,ds(nu(e.bundledQuery)))];case 1:return r=s.sent(),[2,(i=Hr(t)).persistence.runTransaction("Save named query","readwrite",function(t){var s=Ro(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Qe.saveNamedQuery(t,e);var o=r.withResumeToken(ui.EMPTY_BYTE_STRING,s);return i.Fn=i.Fn.insert(o.targetId,o),i.qe.updateTargetData(t,o).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var hc=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Na.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Ro(n.createTime)}),Na.resolve()},t.prototype.getNamedQuery=function(t,e){return Na.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:nu(t.bundledQuery),readTime:Ro(t.readTime)}}(e)),Na.resolve()},t}(),dc=function(){function t(){this.Wn=new oo(fc.Gn),this.zn=new oo(fc.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new fc(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new fc(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new bi(new ii([])),r=new fc(n,t),i=new fc(n,t+1),s=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),s.push(t.key)}),s},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new bi(new ii([])),n=new fc(e,t),r=new fc(e,t+1),i=mo();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new fc(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),fc=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return bi.comparator(t.key,e.key)||Qr(t.ns,e.ns)},t.Hn=function(t,e){return Qr(t.ns,e.ns)||bi.comparator(t.key,e.key)},t}(),pc=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new oo(fc.Gn)}return t.prototype.checkEmpty=function(t){return Na.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var s=new Ga(i,e,n,r);this._n.push(s);for(var o=0,a=r;o<a.length;o++){var u=a[o];this.rs=this.rs.add(new fc(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Na.resolve(s)},t.prototype.lookupMutationBatch=function(t,e){return Na.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Na.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Na.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Na.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new fc(e,0),i=new fc(e,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);s.push(e)}),Na.resolve(s)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new oo(Qr);return e.forEach(function(t){var e=new fc(t,0),i=new fc(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Na.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;bi.isDocumentKey(i)||(i=i.child(""));var s=new fc(new bi(i),0),o=new oo(Qr);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.ns)),!0)},s),Na.resolve(this.us(o))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Zr(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Na.forEach(e.mutations,function(i){var s=new fc(i.key,e.batchId);return r=r.delete(s),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new fc(e,0),r=this.rs.firstAfterOrEqual(n);return Na.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Na.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),gc=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new ro(bi.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Na.resolve(n?n.document.clone():Li.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=co();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Li.newInvalidDocument(t))}),Na.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=co(),i=new bi(e.path.child("")),s=this.docs.getIteratorFrom(i);s.hasNext();){var o=s.getNext(),a=o.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(o.key.path))break;c.compareTo(n)<=0||ys(e,u)&&(r=r.insert(u.key,u.clone()))}return Na.resolve(r)},t.prototype.fs=function(t,e){return Na.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new mc(this)},t.prototype.getSize=function(t){return Na.resolve(this.size)},t}(),mc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Rr.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Na.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Du),yc=function(){function t(t){this.persistence=t,this.ds=new Nu(function(t){return Vi(t)},ji),this.lastRemoteSnapshotVersion=Xr.min(),this.highestTargetId=0,this.ws=0,this._s=new dc,this.targetCount=0,this.ys=bu.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Na.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Na.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Na.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Na.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Na.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new bu(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Na.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Na.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Na.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return this.ds.forEach(function(o,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(o),s.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Na.waitFor(s).next(function(){return i})},t.prototype.getTargetCount=function(t){return Na.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Na.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Na.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Na.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Na.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Na.resolve(n)},t.prototype.containsKey=function(t,e){return Na.resolve(this._s.containsKey(e))},t}(),vc=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Fr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new yc(this),this.Ut=new ou,this.Ue=function(t,e){return new gc(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Ha(e),this.Qe=new hc(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new pc(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;jr("MemoryPersistence","Starting transaction:",t);var i=new bc(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Na.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),bc=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Rr.ZT)(e,t),e}(Ia),_c=function(){function t(t){this.persistence=t,this.As=new dc,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw zr()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Na.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Na.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Na.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Na.forEach(this.vs,function(r){var i=bi.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Na.or([function(){return Na.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),wc=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Sc(t,e){return"firestore_clients_"+t+"_"+e}function Tc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Ec(t,e){return"firestore_targets_"+t+"_"+e}wc.UNAUTHENTICATED=new wc(null),wc.GOOGLE_CREDENTIALS=new wc("google-credentials-uid"),wc.FIRST_PARTY=new wc("first-party-uid");var Cc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,s=JSON.parse(r),o="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return o&&s.error&&(o="string"==typeof s.error.message&&"string"==typeof s.error.code)&&(i=new Mr(s.error.code,s.error.message)),o?new t(e,n,s.state,i):(qr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),xc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Mr(i.error.code,i.error.message)),s?new t(e,i.state,r):(qr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ac=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,s=vo(),o=0;i&&o<r.activeTargetIds.length;++o)i=vi(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(qr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),kc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(qr("SharedClientState","Failed to parse online state: "+e),null)},t}(),Ic=function(){function t(){this.activeTargetIds=vo()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Oc=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new ro(Qr),this.started=!1,this.$s=[];var s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Sc(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Ic),this.Ls=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Rr.mG)(this,void 0,void 0,function(){var t,e,n,r,i,s,o,a,u,c,l=this;return(0,Rr.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Sc(this.persistenceKey,r)))&&(s=Ac.Vs(r,i))&&(this.ks=this.ks.insert(s.clientId,s));for(this.Ks(),(o=this.storage.getItem(this.Us))&&(a=this.js(o))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Ec(this.persistenceKey,t));if(n){var r=xc.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Ec(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return jr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){jr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){jr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(jr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void qr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Rr.mG)(e,void 0,void 0,function(){var t,e,r,i,s,o;return(0,Rr.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(s=this.js(n.newValue)))return[2,this.Ws(s)]}else if(n.key===this.Ms)(o=function(t){var e=Fr.o;if(null!=t)try{var n=JSON.parse(t);Zr("number"==typeof n),e=n}catch(t){qr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Fr.o&&this.sequenceNumberHandler(o);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Cc(this.currentUser,t,e,n),i=Tc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Tc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Ec(this.persistenceKey,t),i=new xc(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Ac.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Cc.Vs(new wc(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return xc.Vs(r,e)},t.prototype.js=function(t){return kc.Vs(t)},t.prototype.ii=function(t){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(jr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),s=this.Gs(r),o=[],a=[];return s.forEach(function(t){i.has(t)||o.push(t)}),i.forEach(function(t){s.has(t)||a.push(t)}),this.syncEngine.hi(o,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=vo();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Nc=function(){function t(){this.li=new Ic,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Ic,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Dc=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Pc=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){jr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){jr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Rc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Fc=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Lc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,Rr.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,s){var o=new Pr;o.listenOnce(Ir.COMPLETE,function(){try{switch(o.getLastErrorCode()){case kr.NO_ERROR:var e=o.getResponseJson();jr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case kr.TIMEOUT:jr("Connection",'RPC "'+t+'" timed out'),s(new Mr(Lr.DEADLINE_EXCEEDED,"Request time out"));break;case kr.HTTP_ERROR:var n=o.getStatus();if(jr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Lr).indexOf(e)>=0?e:Lr.UNKNOWN}(r.status);s(new Mr(a,r.message))}else s(new Mr(Lr.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Mr(Lr.UNAVAILABLE,"Connection failed."));break;default:zr()}}finally{jr("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);o.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new yr,i=be(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new Nr({})),this.Fi(s.initMessageHeaders,e),(0,T.uI)()||(0,T.b$)()||(0,T.d)()||(0,T.w1)()||(0,T.Mn)()||(0,T.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");jr("Connection","Creating WebChannel: "+o,s);var a=r.createWebChannel(o,s),u=!1,c=!1,l=new Fc({Ei:function(t){c?jr("Connection","Not sending because WebChannel is closed:",t):(u||(jr("Connection","Opening WebChannel transport."),a.open(),u=!0),jr("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Dr.EventType.OPEN,function(){c||jr("Connection","WebChannel transport opened.")}),h(a,Dr.EventType.CLOSE,function(){c||(c=!0,jr("Connection","WebChannel transport closed"),l.Vi())}),h(a,Dr.EventType.ERROR,function(t){c||(c=!0,Br("Connection","WebChannel transport errored:",t),l.Vi(new Mr(Lr.UNAVAILABLE,"The operation could not be completed")))}),h(a,Dr.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Zr(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){jr("Connection","WebChannel received error:",r);var i=r.status,s=function(t){var e=Js[t];if(void 0!==e)return no(e)}(i),o=r.message;void 0===s&&(s=Lr.INTERNAL,o="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Mr(s,o)),a.close()}else jr("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Or.STAT_EVENT,function(t){10===t.stat?jr("Connection","Detected buffering proxy"):11===t.stat&&jr("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);jr("RestConnection","Sending: ",i,n);var s={};return this.Fi(s,r),this.ki(t,i,s,n).then(function(t){return jr("RestConnection","Received: ",t),t},function(e){throw Br("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.5",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Rc[t]},t}());function Mc(){return"undefined"!=typeof window?window:null}function Uc(){return"undefined"!=typeof document?document:null}function Vc(t){return new Oo(t,!0)}var jc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&jr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),qc=function(){function t(t,e,n,r,i,s){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new jc(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Lr.RESOURCE_EXHAUSTED?(qr(e.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Lr.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Mr(Lr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Rr.mG)(t,void 0,void 0,function(){return(0,Rr.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return jr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(jr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Bc=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s)||this).R=i,o}return(0,Rr.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:zr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.I?(Zr(void 0===e||"string"==typeof e),ui.fromBase64String(e||"")):(Zr(void 0===e||e instanceof Uint8Array),ui.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Lr.UNKNOWN:no(t.code);return new Mr(e,t.message||"")}(a);n=new To(r,i,s,o||null)}else if("documentChange"in e){i=Uo(t,(r=e.documentChange).document.name),s=Ro(r.document.updateTime);var a=new Ri({mapValue:{fields:r.document.fields}}),u=(o=Li.newFoundDocument(i,s,a),r.targetIds||[]);n=new wo(u,r.removedTargetIds||[],o.key,o)}else if("documentDelete"in e)i=Uo(t,(r=e.documentDelete).document),s=r.readTime?Ro(r.readTime):Xr.min(),a=Li.newNoDocument(i,s),n=new wo([],o=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Uo(t,(r=e.documentRemove).document),n=new wo([],s=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return zr();var c=e.filter;i=new to(r=c.count||0),n=new So(s=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Xr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Xr.min():e.readTime?Ro(e.readTime):Xr.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=qo(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=qi(r)?{documents:$o(t,r)}:{query:Ko(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Do(t,e.resumeToken):e.snapshotVersion.compareTo(Xr.min())>0&&(n.readTime=No(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zr()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=qo(this.R),e.removeTarget=t,this.cr(e)},e}(qc),Gc=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,s)||this).R=i,o.gr=!1,o}return(0,Rr.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Zr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Zr(void 0!==e),t.map(function(t){return function(t,e){var n=Ro(t.updateTime?t.updateTime:e);return n.isEqual(Xr.min())&&(n=Ro(e)),new Ls(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Ro(t.commitTime);return this.listener.Tr(n,e)}return Zr(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=qo(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Zo(e.R,t)})};this.cr(n)},e}(qc),zc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Rr.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new Mr(Lr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Lr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Mr(Lr.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Lr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Mr(Lr.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Zc=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(qr(e),this.Vr=!1):jr("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Hc=function(t,e,n,r,i){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Rr.mG)(s,void 0,void 0,function(){return(0,Rr.Jh)(this,function(t){switch(t.label){case 0:return el(this)?(jr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Rr.mG)(this,void 0,void 0,function(){var e;return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:return(e=Hr(t)).Or.add(4),[4,Kc(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,$c(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Zc(n,r)};function $c(t){return(0,Rr.mG)(this,void 0,void 0,function(){var e,n;return(0,Rr.Jh)(this,function(r){switch(r.label){case 0:if(!el(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Kc(t){return(0,Rr.mG)(this,void 0,void 0,function(){var e,n;return(0,Rr.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Qc(t,e){var n=Hr(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),tl(n)?Xc(n):ml(n).er()&&Yc(n,e))}function Jc(t,e){var n=Hr(t),r=ml(n);n.$r.delete(e),r.er()&&Wc(n,e),0===n.$r.size&&(r.er()?r.ir():el(n)&&n.Br.set("Unknown"))}function Yc(t,e){t.qr.U(e.targetId),ml(t).mr(e)}function Wc(t,e){t.qr.U(e),ml(t).yr(e)}function Xc(t){t.qr=new Co({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),ml(t).start(),t.Br.Sr()}function tl(t){return el(t)&&!ml(t).tr()&&t.$r.size>0}function el(t){return 0===Hr(t).Or.size}function nl(t){t.qr=void 0}function rl(t){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(e){return t.$r.forEach(function(e,n){Yc(t,e)}),[2]})})}function il(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(n){return nl(t),tl(t)?(t.Br.Nr(e),Xc(t)):t.Br.set("Unknown"),[2]})})}function sl(t,e,n){return(0,Rr.mG)(this,void 0,void 0,function(){var r,i,s;return(0,Rr.Jh)(this,function(o){switch(o.label){case 0:if(t.Br.set("Online"),!(e instanceof To&&2===e.state&&e.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,function(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,Rr.Jh)(this,function(o){switch(o.label){case 0:n=e.cause,r=0,i=e.targetIds,o.label=1;case 1:return r<i.length?t.$r.has(s=i[r])?[4,t.remoteSyncer.rejectListen(s,n)]:[3,3]:[3,5];case 2:o.sent(),t.$r.delete(s),t.qr.removeTarget(s),o.label=3;case 3:o.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return o.sent(),[3,5];case 3:return r=o.sent(),jr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,ol(t,r)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof wo?t.qr.X(e):e instanceof So?t.qr.rt(e):t.qr.et(e),n.isEqual(Xr.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,Xu(t.localStore)];case 8:return i=o.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(ui.EMPTY_BYTE_STRING,n.snapshotVersion)),Wc(t,e);var r=new Za(n.target,e,1,n.sequenceNumber);Yc(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return jr("RemoteStore","Failed to raise snapshot:",s=o.sent()),[4,ol(t,s)];case 12:return o.sent(),[3,13];case 13:return[2]}})})}function ol(t,e,n){return(0,Rr.mG)(this,void 0,void 0,function(){var r=this;return(0,Rr.Jh)(this,function(i){switch(i.label){case 0:if(!La(e))throw e;return t.Or.add(1),[4,Kc(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Xu(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Rr.mG)(r,void 0,void 0,function(){return(0,Rr.Jh)(this,function(e){switch(e.label){case 0:return jr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,$c(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function al(t,e){return e().catch(function(n){return ol(t,n,e)})}function ul(t){return(0,Rr.mG)(this,void 0,void 0,function(){var e,n,r,i,s;return(0,Rr.Jh)(this,function(o){switch(o.label){case 0:e=Hr(t),n=yl(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,o.label=1;case 1:if(!function(t){return el(t)&&t.kr.length<10}(e))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,nc(e.localStore,r)];case 3:return null===(i=o.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=yl(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return s=o.sent(),[4,ol(e,s)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return cl(e)&&ll(e),[2]}})})}function cl(t){return el(t)&&!yl(t).tr()&&t.kr.length>0}function ll(t){yl(t).start()}function hl(t){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(e){return yl(t).Ar(),[2]})})}function dl(t){return(0,Rr.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Rr.Jh)(this,function(i){for(e=yl(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function fl(t,e,n){return(0,Rr.mG)(this,void 0,void 0,function(){var r,i;return(0,Rr.Jh)(this,function(s){switch(s.label){case 0:return r=t.kr.shift(),i=za.from(r,e,n),[4,al(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return s.sent(),[4,ul(t)];case 2:return s.sent(),[2]}})})}function pl(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:return e&&yl(t).pr?[4,function(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r;return(0,Rr.Jh)(this,function(i){switch(i.label){case 0:return eo(r=e.code)&&r!==Lr.ABORTED?(n=t.kr.shift(),yl(t).sr(),[4,al(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,ul(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return cl(t)&&ll(t),[2]}})})}function gl(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n;return(0,Rr.Jh)(this,function(r){switch(r.label){case 0:return n=Hr(t),e?(n.Or.delete(2),[4,$c(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Kc(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function ml(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Hr(t);return r.br(),new Bc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:rl.bind(null,t),Ri:il.bind(null,t),_r:sl.bind(null,t)}),t.Mr.push(function(n){return(0,Rr.mG)(e,void 0,void 0,function(){return(0,Rr.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),tl(t)?Xc(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),nl(t),e.label=3;case 3:return[2]}})})})),t.Ur}function yl(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Hr(t);return r.br(),new Gc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:hl.bind(null,t),Ri:pl.bind(null,t),Ir:dl.bind(null,t),Tr:fl.bind(null,t)}),t.Mr.push(function(n){return(0,Rr.mG)(e,void 0,void 0,function(){return(0,Rr.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,ul(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(jr("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var vl=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Oa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,s){var o=new t(e,n,Date.now()+r,i,s);return o.start(r),o},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Mr(Lr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function bl(t,e){if(qr("AsyncQueue",e+": "+t),La(t))return new Mr(Lr.UNAVAILABLE,e+": "+t);throw t}var _l=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||bi.comparator(e.key,n.key)}:function(t,e){return bi.comparator(t.key,e.key)},this.keyedMap=ho(),this.sortedSet=new ro(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),wl=function(){function t(){this.Kr=new ro(bi.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):zr():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Sl=function(){function t(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var s=[];return n.forEach(function(t){s.push({type:0,doc:t})}),new t(e,n,_l.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ps(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Tl=function(){this.Wr=void 0,this.listeners=[]},El=function(){this.queries=new Nu(function(t){return gs(t)},ps),this.onlineState="Unknown",this.Gr=new Set};function Cl(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,Rr.Jh)(this,function(c){switch(c.label){case 0:if(n=Hr(t),i=!1,(s=n.queries.get(r=e.query))||(i=!0,s=new Tl),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),o=s,[4,n.onListen(r)];case 2:return o.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=bl(a,"Initialization of query '"+ms(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&Il(n),[2]}})})}function xl(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,Rr.Jh)(this,function(a){return n=Hr(t),i=!1,(s=n.queries.get(r=e.query))&&(o=s.listeners.indexOf(e))>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Al(t,e){for(var n=Hr(t),r=!1,i=0,s=e;i<s.length;i++){var o=s[i],a=n.queries.get(o.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(o)&&(r=!0);a.Wr=o}}r&&Il(n)}function kl(t,e,n){var r=Hr(t),i=r.queries.get(e);if(i)for(var s=0,o=i.listeners;s<o.length;s++)o[s].onError(n);r.queries.delete(e)}function Il(t){t.Gr.forEach(function(t){t.next()})}var Ol=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Sl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var s=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),s=!0):this.eo(t,this.onlineState)&&(this.no(t),s=!0),this.Xr=t,s},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Sl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Nl=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Dl=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Uo(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?zo(this.R,t.document,!1):Li.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Ro(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Dl(this.R),r=0,i=t;r<i.length;r++){var s=i[r];if(s.metadata.queries)for(var o=n.qn(s.metadata.name),a=0,u=s.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||mo()).add(o);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Rr.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Rr.Jh)(this,function(s){switch(s.label){case 0:return[4,cc(this.localStore,new Dl(this.R),this.documents,this.ro.id)];case 1:t=s.sent(),e=this.co(this.documents),n=0,r=this.queries,s.label=2;case 2:return n<r.length?[4,lc(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:s.sent(),s.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Zu(Object.assign({},this.progress),t))]}})})}}();var Pl=function(t){this.key=t},Rl=function(t){this.key=t},Fl=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=mo(),this.mutatedKeys=mo(),this.lo=vs(t),this.fo=new _l(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new wl,i=e?e.fo:this.fo,s=e?e.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=os(this.query)&&i.size===this.query.limit?i.last():null,c=as(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=ys(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(o=o.add(h),s=f?s.add(t):s.delete(t)):(o=o.delete(t),s=s.delete(t)))}),os(this.query)||as(this.query))for(;o.size>this.query.limit;){var l=os(this.query)?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{fo:o,mo:r,Nn:a,mutatedKeys:s}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var s=t.mo.jr();s.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zr()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var o=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==s.length||u?{snapshot:new Sl(this.query,t.fo,i,s,t.mutatedKeys,0===a,u,!1),To:o}:{To:o}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new wl,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=mo(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Rl(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Pl(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=mo();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Sl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Ll=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ml=function(t){this.key=t,this.bo=!1},Ul=function(){function t(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.vo={},this.Po=new Nu(function(t){return gs(t)},ps),this.Vo=new Map,this.So=new Set,this.Do=new ro(bi.comparator),this.Co=new Map,this.No=new dc,this.xo={},this.Fo=new Map,this.ko=bu.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Vl(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,Rr.Jh)(this,function(a){switch(a.label){case 0:return n=ph(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,rc(n.localStore,ds(e))];case 2:return s=a.sent(),o=n.sharedClientState.addLocalQueryTarget(s.targetId),[4,jl(n,e,s.targetId,"current"===o)];case 3:r=a.sent(),n.isPrimaryClient&&Qc(n.remoteStore,s),a.label=4;case 4:return[2,r]}})})}function jl(t,e,n,r){return(0,Rr.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c;return(0,Rr.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,Rr.mG)(this,void 0,void 0,function(){var i,s,o;return(0,Rr.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,sc(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s),[2,(Xl(t,e.targetId,o.To),o.snapshot)]}})})}(t,e,n,r)},[4,sc(t.localStore,e,!0)];case 1:return i=l.sent(),s=new Fl(e,i.Bn),o=s._o(i.documents),a=_o.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=s.applyChanges(o,t.isPrimaryClient,a),Xl(t,n,u.To),c=new Ll(e,n,s),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function ql(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Rr.Jh)(this,function(s){switch(s.label){case 0:return n=Hr(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!ps(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,ic(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Jc(n.remoteStore,r.targetId),Yl(n,r.targetId)}).catch(Eu)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return Yl(n,r.targetId),[4,ic(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function Bl(t,e,n){return(0,Rr.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,Rr.Jh)(this,function(a){switch(a.label){case 0:r=gh(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Hr(t),i=Wr.now(),s=e.reduce(function(t,e){return t.add(e.key)},mo());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,s).next(function(s){n=s;for(var o=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Bs(c,n.get(c.key));null!=l&&o.push(new Hs(c.key,l,Fi(l.value.mapValue),Ms.exists(!0)))}return r._n.addMutationBatch(t,i,o,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new ro(Qr)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,nh(r,i.changes)];case 3:return a.sent(),[4,ul(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return s=a.sent(),o=bl(s,"Failed to persist write"),n.reject(o),[3,6];case 6:return[2]}})})}function Gl(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r;return(0,Rr.Jh)(this,function(i){switch(i.label){case 0:n=Hr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,tc(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Zr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Zr(r.bo):t.removedDocuments.size>0&&(Zr(r.bo),r.bo=!1))}),[4,nh(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Eu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function zl(t,e,n){var r=Hr(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Hr(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,s=n.listeners;i<s.length;i++)s[i].zr(e)&&(r=!0)}),r&&Il(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Zl(t,e,n){return(0,Rr.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u;return(0,Rr.Jh)(this,function(c){switch(c.label){case 0:return(r=Hr(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(s=i&&i.key)?(o=(o=new ro(bi.comparator)).insert(s,Li.newNoDocument(s,Xr.min())),a=mo().add(s),u=new bo(Xr.min(),new Map,new oo(Qr),o,a),[4,Gl(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(s),r.Co.delete(e),eh(r),[3,4];case 2:return[4,ic(r.localStore,e,!1).then(function(){return Yl(r,e,n)}).catch(Eu)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Hl(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Rr.Jh)(this,function(s){switch(s.label){case 0:n=Hr(t),r=e.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,Wu(n.localStore,e)];case 2:return i=s.sent(),Jl(n,r,null),Ql(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,nh(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,Eu(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function $l(t,e,n){return(0,Rr.mG)(this,void 0,void 0,function(){var r,i;return(0,Rr.Jh)(this,function(s){switch(s.label){case 0:r=Hr(t),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(t,e){var n=Hr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Zr(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=s.sent(),Jl(r,e,n),Ql(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,nh(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,Eu(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function Kl(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,Rr.Jh)(this,function(a){switch(a.label){case 0:el((n=Hr(t)).remoteStore)||jr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Hr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return s=a.sent(),o=bl(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(o),[3,4];case 4:return[2]}})})}function Ql(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Jl(t,e,n){var r=Hr(t),i=r.xo[r.currentUser.toKey()];if(i){var s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Yl(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var s=i[r];t.Po.delete(s),n&&t.vo.Mo(s,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Wl(t,e)})}function Wl(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Jc(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),eh(t))}function Xl(t,e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof Pl?(t.No.addReference(s.key,e),th(t,s)):s instanceof Rl?(jr("SyncEngine","Document no longer in limbo: "+s.key),t.No.removeReference(s.key,e),t.No.containsKey(s.key)||Wl(t,s.key)):zr()}}function th(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(jr("SyncEngine","New document in limbo: "+n),t.So.add(r),eh(t))}function eh(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new bi(ii.fromString(e)),r=t.ko.next();t.Co.set(r,new Ml(n)),t.Do=t.Do.insert(n,r),Qc(t.remoteStore,new Za(ds(ss(n.path)),r,2,Fr.o))}}function nh(t,e,n){return(0,Rr.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,Rr.Jh)(this,function(a){switch(a.label){case 0:return r=Hr(t),i=[],s=[],o=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){o.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=$u.Pn(a.targetId,t);s.push(e)}}))}),[4,Promise.all(o)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c;return(0,Rr.Jh)(this,function(l){switch(l.label){case 0:n=Hr(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Na.forEach(e,function(e){return Na.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Na.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!La(r=l.sent()))throw r;return jr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,s=e;i<s.length;i++)a=(o=s[i]).targetId,o.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,s)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function rh(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r;return(0,Rr.Jh)(this,function(i){switch(i.label){case 0:return(n=Hr(t)).currentUser.isEqual(e)?[3,3]:(jr("SyncEngine","User change. New user:",e.toKey()),[4,Yu(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Mr(Lr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,nh(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function ih(t,e){var n=Hr(t),r=n.Co.get(e);if(r&&r.bo)return mo().add(r.key);var i=mo(),s=n.Vo.get(e);if(!s)return i;for(var o=0,a=s;o<a.length;o++){var u=n.Po.get(a[o]);i=i.unionWith(u.view.wo)}return i}function sh(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Rr.Jh)(this,function(s){switch(s.label){case 0:return[4,sc((n=Hr(t)).localStore,e.query,!0)];case 1:return r=s.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Xl(n,e.targetId,i.To),i)]}})})}function oh(t){return(0,Rr.mG)(this,void 0,void 0,function(){var e;return(0,Rr.Jh)(this,function(n){return[2,ac((e=Hr(t)).localStore).then(function(t){return nh(e,t)})]})})}function ah(t,e,n,r){return(0,Rr.mG)(this,void 0,void 0,function(){var i,s;return(0,Rr.Jh)(this,function(o){switch(o.label){case 0:return[4,function(t,e){var n=Hr(t),r=Hr(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Na.resolve(null)})})}((i=Hr(t)).localStore,e)];case 1:return null===(s=o.sent())?[3,6]:"pending"!==n?[3,3]:[4,ul(i.remoteStore)];case 2:return o.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Jl(i,e,r||null),Ql(i,e),function(t,e){Hr(Hr(t)._n).Gt(e)}(i.localStore,e)):zr(),o.label=4;case 4:return[4,nh(i,s)];case 5:return o.sent(),[3,7];case 6:jr("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}})})}function uh(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,Rr.Jh)(this,function(c){switch(c.label){case 0:return ph(n=Hr(t)),gh(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,ch(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,gl(n.remoteStore,!0)];case 2:for(c.sent(),s=0,o=i;s<o.length;s++)Qc(n.remoteStore,o[s]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Yl(n,e),ic(n.localStore,e,!0)}),Jc(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,ch(n,a)];case 5:return c.sent(),function(t){var e=Hr(t);e.Co.forEach(function(t,n){Jc(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new ro(bi.comparator)}(n),n.$o=!1,[4,gl(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function ch(t,e,n){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c,l,h,d,f,p;return(0,Rr.Jh)(this,function(g){switch(g.label){case 0:n=Hr(t),r=[],i=[],s=0,o=e,g.label=1;case 1:return s<o.length?(u=void 0,(c=n.Vo.get(a=o[s]))&&0!==c.length?[4,rc(n.localStore,ds(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,sh(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,oc(n.localStore,a)];case 8:return p=g.sent(),[4,rc(n.localStore,p)];case 9:return u=g.sent(),[4,jl(n,lh(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function lh(t){return is(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function hh(t){var e=Hr(t);return Hr(Hr(e.localStore).persistence).fn()}function dh(t,e,n,r){return(0,Rr.mG)(this,void 0,void 0,function(){var i,s,o;return(0,Rr.Jh)(this,function(a){switch(a.label){case 0:return(i=Hr(t)).$o?(jr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ac(i.localStore)];case 3:return s=a.sent(),o=bo.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,nh(i,s,o)];case 4:return a.sent(),[3,8];case 5:return[4,ic(i.localStore,e,!0)];case 6:return a.sent(),Yl(i,e,r),[3,8];case 7:zr(),a.label=8;case 8:return[2]}})})}function fh(t,e,n){return(0,Rr.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u,c,l,h;return(0,Rr.Jh)(this,function(d){switch(d.label){case 0:if(!(r=ph(t)).$o)return[3,10];i=0,s=e,d.label=1;case 1:return i<s.length?r.Vo.has(o=s[i])?(jr("SyncEngine","Adding an already active target "+o),[3,5]):[4,oc(r.localStore,o)]:[3,6];case 2:return a=d.sent(),[4,rc(r.localStore,a)];case 3:return u=d.sent(),[4,jl(r,lh(a),u.targetId,!1)];case 4:d.sent(),Qc(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Rr.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,ic(r.localStore,t,!1).then(function(){Jc(r.remoteStore,t),Yl(r,t)}).catch(Eu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function ph(t){var e=Hr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ih.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zl.bind(null,e),e.vo._r=Al.bind(null,e.eventManager),e.vo.Mo=kl.bind(null,e.eventManager),e}function gh(t){var e=Hr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hl.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$l.bind(null,e),e}var mh=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(e){switch(e.label){case 0:return this.R=Vc(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Ju(this.persistence,new Ku,t.initialUser,this.R)},t.prototype.qo=function(t){return new vc(_c.bs,this.R)},t.prototype.Bo=function(t){return new Nc},t.prototype.terminate=function(){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),yh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Rr.ZT)(e,t),e.prototype.initialize=function(e){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,uc(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,gh(this.Ko.syncEngine)];case 4:return n.sent(),[4,ul(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return Ju(this.persistence,new Ku,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Au(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=zu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?hu.withCacheSize(this.cacheSizeBytes):hu.DEFAULT;return new qu(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Mc(),Uc(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Nc},e}(mh),vh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Rr.ZT)(e,t),e.prototype.initialize=function(e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r=this;return(0,Rr.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Oc?(this.sharedClientState.syncEngine={ui:ah.bind(null,n),ai:dh.bind(null,n),hi:fh.bind(null,n),fn:hh.bind(null,n),ci:oh.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Rr.mG)(r,void 0,void 0,function(){return(0,Rr.Jh)(this,function(e){switch(e.label){case 0:return[4,uh(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Mc();if(!Oc.yt(e))throw new Mr(Lr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=zu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Oc(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(yh),bh=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n=this;return(0,Rr.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return zl(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=rh.bind(null,this.syncEngine),[4,gl(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new El},t.prototype.createDatastore=function(t){var e=Vc(t.databaseInfo.databaseId),n=new Lc(t.databaseInfo);return function(t,e,n){return new zc(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,s,o=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return zl(o.syncEngine,t,0)},s=Pc.yt()?new Pc:new Dc,new Hc(e,n,r,i,s)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,s,o){var a=new Ul(t,e,n,r,i,s);return o&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Rr.mG)(this,void 0,void 0,function(){var e;return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:return e=Hr(t),jr("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Kc(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),_h=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),wh=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Oa,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Rr.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,Rr.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Nl(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Rr.mG)(this,void 0,void 0,function(){var t,e;return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Rr.mG)(this,void 0,void 0,function(){var e;return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Rr.mG)(this,void 0,void 0,function(){var t,e;return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Rr.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Rr.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Mr(Lr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a;return(0,Rr.Jh)(this,function(u){switch(u.label){case 0:return n=Hr(t),r=qo(n.R)+"/documents",i={documents:e.map(function(t){return Mo(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return s=u.sent(),o=new Map,s.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Zr(!!e.found);var n=Uo(t,e.found.name),r=Ro(e.found.updateTime),i=new Ri({mapValue:{fields:e.found.fields}});return Li.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Zr(!!e.missing),Zr(!!e.readTime);var n=Uo(t,e.missing),r=Ro(e.readTime);return Li.newNoDocument(n,r)}(t,e):zr()}(n.R,t);o.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=o.get(t.toString());Zr(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ws(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Rr.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=bi.fromPath(n);e.mutations.push(new Xs(r,e.precondition(r)))}),[4,function(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Rr.Jh)(this,function(s){switch(s.label){case 0:return n=Hr(t),r=qo(n.R)+"/documents",i={writes:e.map(function(t){return Zo(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return s.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw zr();e=Xr.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Mr(Lr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ms.updateTime(e):Ms.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Xr.min()))throw new Mr(Lr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ms.updateTime(e)}return Ms.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Sh=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new jc(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Rr.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,Rr.Jh)(this,function(r){return t=new wh(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!mi(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!eo(e)}return!1},t}(),Th=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=wc.UNAUTHENTICATED,this.clientId=Kr.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,Rr.mG)(r,void 0,void 0,function(){return(0,Rr.Jh)(this,function(e){switch(e.label){case 0:return jr("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Mr(Lr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Oa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Rr.mG)(t,void 0,void 0,function(){var t,n;return(0,Rr.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=bl(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Eh(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,Rr.Jh)(this,function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),jr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=s.sent(),[4,e.initialize(n)];case 2:return s.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,Rr.mG)(i,void 0,void 0,function(){return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Yu(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Ch(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r;return(0,Rr.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,xh(t)];case 1:return n=i.sent(),jr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,Rr.mG)(this,void 0,void 0,function(){var n,r;return(0,Rr.Jh)(this,function(i){switch(i.label){case 0:return(n=Hr(t)).asyncQueue.verifyOperationInProgress(),jr("RemoteStore","RemoteStore received new credentials"),r=el(n),n.Or.add(3),[4,Kc(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,$c(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function xh(t){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(jr("FirestoreClient","Using default OfflineComponentProvider"),[4,Eh(t,new mh)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Ah(t){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(jr("FirestoreClient","Using default OnlineComponentProvider"),[4,Ch(t,new bh)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function kh(t){return xh(t).then(function(t){return t.persistence})}function Ih(t){return xh(t).then(function(t){return t.localStore})}function Oh(t){return Ah(t).then(function(t){return t.remoteStore})}function Nh(t){return Ah(t).then(function(t){return t.syncEngine})}function Dh(t){return(0,Rr.mG)(this,void 0,void 0,function(){var e,n;return(0,Rr.Jh)(this,function(r){switch(r.label){case 0:return[4,Ah(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Vl.bind(null,e.syncEngine),n.onUnlisten=ql.bind(null,e.syncEngine),n)]}})})}function Ph(t,e,n){var r=this;void 0===n&&(n={});var i=new Oa;return t.asyncQueue.enqueueAndForget(function(){return(0,Rr.mG)(r,void 0,void 0,function(){var r;return(0,Rr.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new _h({next:function(s){e.enqueueAndForget(function(){return xl(t,o)});var a=s.docs.has(n);!a&&s.fromCache?i.reject(new Mr(Lr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Mr(Lr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:function(t){return i.reject(t)}}),o=new Ol(ss(n.path),s,{includeMetadataChanges:!0,so:!0});return Cl(t,o)},[4,Dh(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Rh(t,e,n){var r=this;void 0===n&&(n={});var i=new Oa;return t.asyncQueue.enqueueAndForget(function(){return(0,Rr.mG)(r,void 0,void 0,function(){var r;return(0,Rr.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new _h({next:function(n){e.enqueueAndForget(function(){return xl(t,o)}),n.fromCache&&"server"===r.source?i.reject(new Mr(Lr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),o=new Ol(n,s,{includeMetadataChanges:!0,so:!0});return Cl(t,o)},[4,Dh(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Fh=function(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a},Lh=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Mh=new Map,Uh=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Vh=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(wc.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),jh=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),qh=function(){function t(t){var e=this;this.currentUser=wc.UNAUTHENTICATED,this.oc=new Oa,this.cc=0,this.changeListener=function(){return Promise.resolve()},this.uc=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.ac=function(){e.cc++,e.currentUser=e.hc(),e.oc.resolve(),e.uc&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){jr("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.lc(),e.auth.addAuthTokenListener(e.ac)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):e.uc&&(jr("FirebaseCredentialsProvider","Auth not yet detected"),e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)}))}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(jr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Zr("string"==typeof n.accessToken),new Uh(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){this.uc=!0,this.asyncQueue=t,this.changeListener=e},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.ac),this.changeListener=function(){return Promise.resolve()}},t.prototype.hc=function(){var t=this.auth&&this.auth.getUid();return Zr(null===t||"string"==typeof t),new wc(t)},t.prototype.lc=function(){var t=this;this.uc&&(this.uc=!1,this.asyncQueue.enqueueRetryable(function(){return(0,Rr.mG)(t,void 0,void 0,function(){return(0,Rr.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,this.changeListener(this.currentUser)];case 2:return t.sent(),this.uc=!0,[2]}})})}))},t}(),Bh=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n,this.type="FirstParty",this.user=wc.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.dc},e=this.fc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.wc&&(t["X-Goog-Iam-Authorization-Token"]=this.wc),t},enumerable:!1,configurable:!0}),t}(),Gh=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n}return t.prototype.getToken=function(){return Promise.resolve(new Bh(this.fc,this.dc,this.wc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(wc.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function zh(t,e,n){if(!n)throw new Mr(Lr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Zh(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Hh(t,e,n,r){if(!0===e&&!0===r)throw new Mr(Lr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function $h(t){if(!bi.isDocumentKey(t))throw new Mr(Lr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Kh(t){if(bi.isDocumentKey(t))throw new Mr(Lr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Qh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":zr()}function Jh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Mr(Lr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Qh(t);throw new Mr(Lr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Yh(t,e){if(e<=0)throw new Mr(Lr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Wh=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Mr(Lr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Mr(Lr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Hh("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Xh=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wh({}),this._settingsFrozen=!1,t instanceof Lh?(this._databaseId=t,this._credentials=new Vh):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Mr(Lr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lh(t.options.projectId)}(t),this._credentials=new qh(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Mr(Lr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Mr(Lr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wh(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Vh;switch(t.type){case"gapi":var e=t.client;return Zr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Gh(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Mr(Lr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Mh.get(this))&&(jr("ComponentProvider","Removing Datastore"),Mh.delete(this),t.terminate()),Promise.resolve();var t},t}(),td=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new nd(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),ed=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),nd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ss(r))||this)._path=r,i.type="collection",i}return(0,Rr.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new td(this.firestore,null,new bi(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(ed);function rd(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,T.m9)(t),zh("collection","path",e),t instanceof Xh)return Kh(n=ii.fromString.apply(ii,(0,Rr.ev)([e],r))),new nd(t,null,n);if(!(t instanceof td||t instanceof nd))throw new Mr(Lr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Kh(n=ii.fromString.apply(ii,(0,Rr.ev)([t.path],r)).child(ii.fromString(e))),new nd(t.firestore,null,n)}function id(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,T.m9)(t),1===arguments.length&&(e=Kr.u()),zh("doc","path",e),t instanceof Xh)return $h(n=ii.fromString.apply(ii,(0,Rr.ev)([e],r))),new td(t,null,new bi(n));if(!(t instanceof td||t instanceof nd))throw new Mr(Lr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return $h(n=t._path.child(ii.fromString.apply(ii,(0,Rr.ev)([e],r)))),new td(t.firestore,t instanceof nd?t.converter:null,new bi(n))}function sd(t,e){return t=(0,T.m9)(t),e=(0,T.m9)(e),(t instanceof td||t instanceof nd)&&(e instanceof td||e instanceof nd)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function od(t,e){return t=(0,T.m9)(t),e=(0,T.m9)(e),t instanceof ed&&e instanceof ed&&t.firestore===e.firestore&&ps(t._query,e._query)&&t.converter===e.converter}var ad=function(){function t(){var t=this;this._c=Promise.resolve(),this.mc=[],this.yc=!1,this.gc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new jc(this,"async_queue_retry"),this.Ac=function(){var e=Uc();e&&jr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Uc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ac)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.yc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Rc(),this.bc(t)},t.prototype.enterRestrictedMode=function(){if(!this.yc){this.yc=!0;var t=Uc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ac)}},t.prototype.enqueue=function(t){return this.Rc(),this.yc?new Promise(function(t){}):this.bc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.mc.push(t),e.vc()})},t.prototype.vc=function(){return(0,Rr.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:if(0===this.mc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.mc[0]()];case 2:return n.sent(),this.mc.shift(),this.Zi.reset(),[3,4];case 3:if(!La(t=n.sent()))throw t;return jr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.mc.length>0&&this.Zi.ji(function(){return e.vc()}),n.label=5;case 5:return[2]}})})},t.prototype.bc=function(t){var e=this,n=this._c.then(function(){return e.Tc=!0,t().catch(function(t){throw e.Ec=t,e.Tc=!1,qr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.Tc=!1,t})});return this._c=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Rc(),this.Ic.indexOf(t)>-1&&(e=0);var i=vl.createAndSchedule(this,t,e,n,function(t){return r.Pc(t)});return this.gc.push(i),i},t.prototype.Rc=function(){this.Ec&&zr()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Vc=function(){return(0,Rr.mG)(this,void 0,void 0,function(){var t;return(0,Rr.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this._c];case 1:e.sent(),e.label=2;case 2:if(t!==this._c)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Sc=function(t){for(var e=0,n=this.gc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Dc=function(t){var e=this;return this.Vc().then(function(){e.gc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.gc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Vc()})},t.prototype.Cc=function(t){this.Ic.push(t)},t.prototype.Pc=function(t){var e=this.gc.indexOf(t);this.gc.splice(e,1)},t}();function ud(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var s=i[r];if(s in n&&"function"==typeof n[s])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Oa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var cd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new ad,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Rr.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||hd(this),this._firestoreClient.terminate()},e}(Xh);function ld(t){return t._firestoreClient||hd(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function hd(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Fh(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Th(t._credentials,t._queue,r)}function dd(t,e,n){var r=this,i=new Oa;return t.asyncQueue.enqueue(function(){return(0,Rr.mG)(r,void 0,void 0,function(){var r;return(0,Rr.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,Eh(t,n)];case 1:return s.sent(),[4,Ch(t,e)];case 2:return s.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Lr.FAILED_PRECONDITION||t.code===Lr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=s.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function fd(t){if(t._initialized||t._terminated)throw new Mr(Lr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var pd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oi(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),gd=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(ui.fromBase64String(e))}catch(e){throw new Mr(Lr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(ui.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),md=function(t){this._methodName=t},yd=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Mr(Lr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Mr(Lr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Qr(this._lat,t._lat)||Qr(this._long,t._long)},t}(),vd=/^__.*__$/,bd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Hs(t,this.data,this.fieldMask,e,this.fieldTransforms):new Zs(t,this.data,e,this.fieldTransforms)},t}(),_d=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Hs(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function wd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zr()}}var Sd=function(){function t(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Nc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xc",{get:function(){return this.settings.xc},enumerable:!1,configurable:!0}),t.prototype.Fc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,$c:!1});return r.Oc(t),r},t.prototype.Mc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,$c:!1});return r.Nc(),r},t.prototype.Lc=function(t){return this.Fc({path:void 0,$c:!0})},t.prototype.Bc=function(t){return Bd(t,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Uc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Nc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Oc(this.path.get(t))},t.prototype.Oc=function(t){if(0===t.length)throw this.Bc("Document fields must not be empty");if(wd(this.xc)&&vd.test(t))throw this.Bc('Document fields cannot begin and end with "__"')},t}(),Td=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Vc(t)}return t.prototype.Qc=function(t,e,n,r){return void 0===r&&(r=!1),new Sd({xc:t,methodName:e,Uc:n,path:oi.emptyPath(),$c:!1,qc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Ed(t){var e=t._freezeSettings(),n=Vc(t._databaseId);return new Td(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Cd(t,e,n,r,i,s){void 0===s&&(s={});var o=t.Qc(s.merge||s.mergeFields?2:0,e,n,i);Ud("Data must be an object, but it was:",o,r);var a,u,c=Ld(r,o);if(s.merge)a=new ai(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){for(var l=[],h=0,d=s.mergeFields;h<d.length;h++){var f=Vd(e,d[h],n);if(!o.contains(f))throw new Mr(Lr.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Gd(l,f)||l.push(f)}a=new ai(l),u=o.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=o.fieldTransforms;return new bd(new Ri(c),a,u)}var xd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Rr.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.xc)throw t.Bc(1===t.xc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(md);function Ad(t,e,n){return new Sd({xc:3,Uc:e.settings.Uc,methodName:t._methodName,$c:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var kd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Rr.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new Fs(t.path,new As)},e.prototype.isEqual=function(t){return t instanceof e},e}(md),Id=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,Rr.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Ad(this,t,!0),n=this.Kc.map(function(t){return Fd(t,e)}),r=new ks(n);return new Fs(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(md),Od=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,Rr.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Ad(this,t,!0),n=this.Kc.map(function(t){return Fd(t,e)}),r=new Os(n);return new Fs(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(md),Nd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return(0,Rr.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new Ds(t.R,Ss(t.R,this.jc));return new Fs(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(md);function Dd(t,e,n,r){var i=t.Qc(1,e,n);Ud("Data must be an object, but it was:",i,r);var s=[],o=Ri.empty();ei(r,function(t,r){var a=qd(e,t,n);r=(0,T.m9)(r);var u=i.Mc(a);if(r instanceof xd)s.push(a);else{var c=Fd(r,u);null!=c&&(s.push(a),o.set(a,c))}});var a=new ai(s);return new _d(o,a,i.fieldTransforms)}function Pd(t,e,n,r,i,s){var o=t.Qc(1,e,n),a=[Vd(e,r,n)],u=[i];if(s.length%2!=0)throw new Mr(Lr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<s.length;c+=2)a.push(Vd(e,s[c])),u.push(s[c+1]);for(var l=[],h=Ri.empty(),d=a.length-1;d>=0;--d)if(!Gd(l,a[d])){var f=a[d],p=u[d];p=(0,T.m9)(p);var g=o.Mc(f);if(p instanceof xd)l.push(f);else{var m=Fd(p,g);null!=m&&(l.push(f),h.set(f,m))}}var y=new ai(l);return new _d(h,y,o.fieldTransforms)}function Rd(t,e,n,r){return void 0===r&&(r=!1),Fd(n,t.Qc(r?4:3,e))}function Fd(t,e){if(Md(t=(0,T.m9)(t)))return Ud("Unsupported field value:",e,t),Ld(t,e);if(t instanceof md)return function(t,e){if(!wd(e.xc))throw e.Bc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Bc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.$c&&4!==e.xc)throw e.Bc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,s=t;i<s.length;i++){var o=Fd(s[i],e.Lc(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,T.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ss(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Wr.fromDate(t);return{timestampValue:No(e.R,n)}}if(t instanceof Wr)return n=new Wr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:No(e.R,n)};if(t instanceof yd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof gd)return{bytesValue:Do(e.R,t._byteString)};if(t instanceof td){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Bc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Fo(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Bc("Unsupported field value: "+Qh(t))}(t,e)}function Ld(t,e){var n={};return ni(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ei(t,function(t,r){var i=Fd(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Md(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Wr||t instanceof yd||t instanceof gd||t instanceof td||t instanceof md)}function Ud(t,e,n){if(!Md(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Qh(n);throw e.Bc("an object"===r?t+" a custom object":t+" "+r)}}function Vd(t,e,n){if((e=(0,T.m9)(e))instanceof pd)return e._internalPath;if("string"==typeof e)return qd(t,e);throw Bd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var jd=new RegExp("[~\\*/\\[\\]]");function qd(t,e,n){if(e.search(jd)>=0)throw Bd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(pd.bind.apply(pd,(0,Rr.ev)([void 0],e.split(".")))))._internalPath}catch(q){throw Bd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Bd(t,e,n,r,i){var s=r&&!r.isEmpty(),o=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(s||o)&&(u+=" (found",s&&(u+=" in field "+r),o&&(u+=" in document "+i),u+=")"),new Mr(Lr.INVALID_ARGUMENT,(a+=". ")+t+u)}function Gd(t,e){return t.some(function(t){return t.isEqual(e)})}var zd=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new td(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Zd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Hd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Zd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Rr.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(zd);function Hd(t,e){return"string"==typeof e?qd(t,e):e instanceof pd?e._internalPath:e._delegate._internalPath}var $d=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Kd=function(t){function e(e,n,r,i,s,o){var a=this;return(a=t.call(this,e,n,r,i,o)||this)._firestore=e,a._firestoreImpl=e,a.metadata=s,a}return(0,Rr.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Hd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(zd),Qd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Rr.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Kd),Jd=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new $d(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Qd(n._firestore,n._userDataWriter,r.key,r,new $d(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Mr(Lr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Qd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new $d(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Qd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new $d(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,s=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(s=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Yd(e.type),doc:n,oldIndex:i,newIndex:s}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Yd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zr()}}function Wd(t,e){return t instanceof Kd&&e instanceof Kd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Jd&&e instanceof Jd&&t._firestore===e._firestore&&od(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Xd(t){if(as(t)&&0===t.explicitOrderBy.length)throw new Mr(Lr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var tf=function(){};function ef(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var s=i[r];t=s._apply(t)}return t}var nf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Wc=e,i.Gc=n,i.zc=r,i.type="where",i}return(0,Rr.ZT)(e,t),e.prototype._apply=function(t){var e=Ed(t.firestore),n=function(t,e,n,r,i,s,o){var a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s+"' queries on FieldPath.documentId().");if("in"===s||"not-in"===s){lf(o,s);for(var u=[],c=0,l=o;c<l.length;c++)u.push(cf(r,t,l[c]));a={arrayValue:{values:u}}}else a=cf(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||lf(o,s),a=Rd(n,"where",o,"in"===s||"not-in"===s);var h=Bi.create(i,s,a);return function(t,e){if(e.g()){var n=cs(t);if(null!==n&&!n.isEqual(e.field))throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=us(t);null!==r&&hf(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Mr(Lr.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Wc,this.Gc,this.zc);return new ed(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new rs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(tf),rf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wc=e,r.Hc=n,r.type="orderBy",r}return(0,Rr.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Xi(e,n);return function(t,e){if(null===us(t)){var n=cs(t);null!==n&&hf(0,n,e.field)}}(t,r),r}(t._query,this.Wc,this.Hc);return new ed(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new rs(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(tf),sf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,Rr.ZT)(e,t),e.prototype._apply=function(t){return new ed(t.firestore,t.converter,fs(t._query,this.Jc,this.Yc))},e}(tf),of=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return(0,Rr.ZT)(e,t),e.prototype._apply=function(t){var e=uf(t,this.type,this.Xc,this.Zc);return new ed(t.firestore,t.converter,function(t,e){return new rs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(tf),af=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return(0,Rr.ZT)(e,t),e.prototype._apply=function(t){var e=uf(t,this.type,this.Xc,this.Zc);return new ed(t.firestore,t.converter,function(t,e){return new rs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(tf);function uf(t,e,n,r){if(n[0]=(0,T.m9)(n[0]),n[0]instanceof zd)return function(t,e,n,r,i){if(!r)throw new Mr(Lr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var s=[],o=0,a=hs(t);o<a.length;o++){var u=a[o];if(u.field.isKeyField())s.push(Ai(e,r.key));else{var c=r.data.field(u.field);if(fi(c))throw new Mr(Lr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}s.push(c)}}return new Yi(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Ed(t.firestore);return function(t,e,n,r,i,s){var o=t.explicitOrderBy;if(i.length>o.length)throw new Mr(Lr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ls(t)&&-1!==c.indexOf("/"))throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(ii.fromString(c));if(!bi.isDocumentKey(l))throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new bi(l);a.push(Ai(e,h))}else{var d=Rd(n,r,c);a.push(d)}}return new Yi(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}function cf(t,e,n){if("string"==typeof(n=(0,T.m9)(n))){if(""===n)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ls(e)&&-1!==n.indexOf("/"))throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ii.fromString(n));if(!bi.isDocumentKey(r))throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ai(t,new bi(r))}if(n instanceof td)return Ai(t,n._key);throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Qh(n)+".")}function lf(t,e){if(!Array.isArray(t)||0===t.length)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function hf(t,e,n){if(!n.isEqual(e))throw new Mr(Lr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var df=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),_i(t)){case 0:return null;case 1:return t.booleanValue;case 2:return hi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(di(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw zr()}},t.prototype.convertObject=function(t,e){var n=this,r={};return ei(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new yd(hi(t.latitude),hi(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=pi(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(gi(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=li(t);return new Wr(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=ii.fromString(t);Zr(oa(n));var r=new Lh(n.get(1),n.get(3)),i=new bi(n.popFirst(5));return r.isEqual(e)||qr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function ff(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var pf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Rr.ZT)(e,t),e.prototype.convertBytes=function(t){return new gd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new td(this.firestore,null,e)},e}(df),gf=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Ed(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=mf(t,this._firestore),i=ff(r.converter,e,n),s=Cd(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Ms.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var s,o=mf(t,this._firestore);return s="string"==typeof(e=(0,T.m9)(e))||e instanceof pd?Pd(this._dataReader,"WriteBatch.update",o._key,e,n,r):Dd(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,Ms.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=mf(t,this._firestore);return this._mutations=this._mutations.concat(new Ws(e._key,Ms.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Mr(Lr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function mf(t,e){if((t=(0,T.m9)(t)).firestore!==e)throw new Mr(Lr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var yf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Rr.ZT)(e,t),e.prototype.convertBytes=function(t){return new gd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new td(this.firestore,null,e)},e}(df);function vf(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Jh(t,td);var s=Jh(t.firestore,cd),o=Ed(s);return _f(s,[("string"==typeof(e=(0,T.m9)(e))||e instanceof pd?Pd(o,"updateDoc",t._key,e,n,r):Dd(o,"updateDoc",t._key,e)).toMutation(t._key,Ms.exists(!0))])}function bf(t){for(var e,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];t=(0,T.m9)(t);var o={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||ud(i[a])||(o=i[a],a++);var u,c,l,h={includeMetadataChanges:o.includeMetadataChanges};if(ud(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof td)c=Jh(t.firestore,cd),l=ss(t._key.path),u={next:function(e){i[a]&&i[a](wf(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=Jh(t,ed);c=Jh(f.firestore,cd),l=f._query;var p=new yf(c);u={next:function(t){i[a]&&i[a](new Jd(c,p,f,t))},error:i[a+1],complete:i[a+2]},Xd(t._query)}return function(t,e,n,r){var i=this,s=new _h(r),o=new Ol(e,s,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Rr.mG)(i,void 0,void 0,function(){var e;return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:return e=Cl,[4,Dh(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})}),function(){s.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Rr.mG)(i,void 0,void 0,function(){var e;return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:return e=xl,[4,Dh(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})})}}(ld(c),l,h,u)}function _f(t,e){return function(t,e){var n=this,r=new Oa;return t.asyncQueue.enqueueAndForget(function(){return(0,Rr.mG)(n,void 0,void 0,function(){var n;return(0,Rr.Jh)(this,function(i){switch(i.label){case 0:return n=Bl,[4,Nh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(ld(t),e)}function wf(t,e,n){var r=n.docs.get(e._key),i=new yf(t);return new Kd(t,i,e._key,r,new $d(n.hasPendingWrites,n.fromCache),e.converter)}var Sf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Rr.ZT)(e,t),e.prototype.get=function(e){var n=this,r=mf(e,this._firestore),i=new yf(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Kd(n._firestore,i,r._key,t._document,new $d(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Ed(t)}return t.prototype.get=function(t){var e=this,n=mf(t,this._firestore),r=new pf(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return zr();var i=t[0];if(i.isFoundDocument())return new zd(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new zd(e._firestore,r,n._key,null,n.converter);throw zr()})},t.prototype.set=function(t,e,n){var r=mf(t,this._firestore),i=ff(r.converter,e,n),s=Cd(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var s,o=mf(t,this._firestore);return s="string"==typeof(e=(0,T.m9)(e))||e instanceof pd?Pd(this._dataReader,"Transaction.update",o._key,e,n,r):Dd(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,s),this},t.prototype.delete=function(t){var e=mf(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Tf(){if("undefined"==typeof Uint8Array)throw new Mr(Lr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ef(){if("undefined"==typeof atob)throw new Mr(Lr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Cf=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Ef(),new t(gd.fromBase64String(e))},t.fromUint8Array=function(e){return Tf(),new t(gd.fromUint8Array(e))},t.prototype.toBase64=function(){return Ef(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Tf(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),xf=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){fd(t=Jh(t,cd));var n=ld(t),r=t._freezeSettings(),i=new bh;return dd(n,i,new yh(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){fd(t=Jh(t,cd));var e=ld(t),n=t._freezeSettings(),r=new bh;return dd(e,r,new vh(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Mr(Lr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Oa;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Rr.mG)(e,void 0,void 0,function(){var e;return(0,Rr.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Rr.mG)(this,void 0,void 0,function(){return(0,Rr.Jh)(this,function(e){switch(e.label){case 0:return Pa.yt()?[4,Pa.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(zu(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Af=function(){function t(t,e,n){var r=this;this._delegate=e,this.tu=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Lh||(this.eu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Br("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Jh(t,Xh))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Br("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s=(0,T.Sg)(r.mockUserToken),o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Mr(Lr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new jh(new Uh(s,new wc(o)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Rr.mG)(e,void 0,void 0,function(){var e,n;return(0,Rr.Jh)(this,function(r){switch(r.label){case 0:return[4,kh(t)];case 1:return e=r.sent(),[4,Oh(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Hr(t);return e.Or.delete(0),$c(e)}(n))]}})})})}(ld(Jh(this._delegate,cd)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Rr.mG)(e,void 0,void 0,function(){var e,n;return(0,Rr.Jh)(this,function(r){switch(r.label){case 0:return[4,kh(t)];case 1:return e=r.sent(),[4,Oh(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Rr.mG)(this,void 0,void 0,function(){var e;return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:return(e=Hr(t)).Or.add(0),[4,Kc(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(ld(Jh(this._delegate,cd)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Hh("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.tu.enableMultiTabIndexedDbPersistence(this):this.tu.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.tu.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.eu&&(this.eu._removeServiceInstance("firestore"),this.eu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Oa;return t.asyncQueue.enqueueAndForget(function(){return(0,Rr.mG)(e,void 0,void 0,function(){var e;return(0,Rr.Jh)(this,function(r){switch(r.label){case 0:return e=Kl,[4,Nh(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(ld(Jh(this._delegate,cd)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new _h(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Rr.mG)(n,void 0,void 0,function(){var e;return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){Hr(t).Gr.add(e),e.next()},[4,Dh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Rr.mG)(n,void 0,void 0,function(){var e;return(0,Rr.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){Hr(t).Gr.delete(e)},[4,Dh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(ld(t=Jh(t,cd)),ud(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.eu)throw new Mr(Lr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.eu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new qf(this,rd(this._delegate,t))}catch(t){throw Pf(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Df(this,id(this._delegate,t))}catch(t){throw Pf(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Uf(this,function(t,e){if(t=Jh(t,Xh),zh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ed(t,null,function(t){return new rs(ii.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Pf(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Oa;return t.asyncQueue.enqueueAndForget(function(){return(0,Rr.mG)(n,void 0,void 0,function(){var n;return(0,Rr.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return Ah(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Sh(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(ld(t),function(n){return e(new Sf(t,n))})}(this._delegate,function(n){return t(new If(e,n))})},t.prototype.batch=function(){var t=this;return ld(this._delegate),new Of(new gf(this._delegate,function(e){return _f(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Mr(Lr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Mr(Lr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),kf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Rr.ZT)(e,t),e.prototype.convertBytes=function(t){return new Cf(new gd(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Df.nu(e,this.firestore,null)},e}(df),If=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new kf(t)}return t.prototype.get=function(t){var e=this,n=Bf(t);return this._delegate.get(n).then(function(t){return new Lf(e._firestore,new Kd(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=Bf(t);return n?(Zh("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=Bf(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,Rr.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=Bf(t);return this._delegate.delete(e),this},t}(),Of=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Bf(t);return n?(Zh("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=Bf(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,Rr.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=Bf(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Nf=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Qd(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Mf(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.su=function(e,n){var r=t.iu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var s=i.get(n);return s||(s=new t(e,new kf(e),n),i.set(n,s)),s},t}();Nf.iu=new WeakMap;var Df=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new kf(t)}return t.ru=function(e,n,r){if(e.length%2!=0)throw new Mr(Lr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new td(n._delegate,r,new bi(e)))},t.nu=function(e,n,r){return new t(n,new td(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new qf(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new qf(this.firestore,rd(this._delegate,t))}catch(t){throw Pf(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,T.m9)(t))instanceof td&&sd(this._delegate,t)},t.prototype.set=function(t,e){e=Zh("DocumentReference.set",e);try{return function(t,e,n){t=Jh(t,td);var r=Jh(t.firestore,cd),i=ff(t.converter,e,n);return _f(r,[Cd(Ed(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Ms.none())])}(this._delegate,t,e)}catch(t){throw Pf(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?vf(this._delegate,t):vf.apply(void 0,(0,Rr.ev)([this._delegate,t,e],n))}catch(t){throw Pf(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return _f(Jh((t=this._delegate).firestore,cd),[new Ws(t._key,Ms.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Rf(e),i=Ff(e,function(e){return new Lf(t.firestore,new Kd(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return bf(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Jh(t,td);var e=Jh(t.firestore,cd),n=ld(e),r=new yf(e);return function(t,e){var n=this,r=new Oa;return t.asyncQueue.enqueueAndForget(function(){return(0,Rr.mG)(n,void 0,void 0,function(){var n;return(0,Rr.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Rr.mG)(this,void 0,void 0,function(){var r,i;return(0,Rr.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=Hr(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=s.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Mr(Lr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=s.sent(),i=bl(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Ih(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Kd(e,r,t._key,n,new $d(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Jh(t,td);var e=Jh(t.firestore,cd);return Ph(ld(e),t._key,{source:"server"}).then(function(n){return wf(e,t,n)})}(this._delegate):function(t){t=Jh(t,td);var e=Jh(t.firestore,cd);return Ph(ld(e),t._key).then(function(n){return wf(e,t,n)})}(this._delegate)).then(function(t){return new Lf(e.firestore,new Kd(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Nf.su(this.firestore,e):null))},t}();function Pf(t,e,n){return t.message=t.message.replace(e,n),t}function Rf(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!ud(r))return r}return{}}function Ff(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=ud(t[0])?t[0]:ud(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Lf=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Df(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Wd(this._delegate,t._delegate)},t}(),Mf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Rr.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Lf),Uf=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new kf(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,ef(this._delegate,function(t,e,n){var r=e,i=Hd("where",t);return new nf(i,r,n)}(e,n,r)))}catch(e){throw Pf(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,ef(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Hd("orderBy",t);return new rf(r,n)}(e,n)))}catch(e){throw Pf(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,ef(this._delegate,function(t){return Yh("limit",t),new sf("limit",t,"F")}(e)))}catch(e){throw Pf(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,ef(this._delegate,function(t){return Yh("limitToLast",t),new sf("limitToLast",t,"L")}(e)))}catch(e){throw Pf(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ef(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new of("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Pf(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ef(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new of("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Pf(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ef(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new af("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Pf(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ef(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new af("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Pf(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return od(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Jh(t,ed);var e=Jh(t.firestore,cd),n=ld(e),r=new yf(e);return function(t,e){var n=this,r=new Oa;return t.asyncQueue.enqueueAndForget(function(){return(0,Rr.mG)(n,void 0,void 0,function(){var n;return(0,Rr.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Rr.mG)(this,void 0,void 0,function(){var r,i,s,o,a;return(0,Rr.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,sc(t,e,!0)];case 1:return a=u.sent(),r=new Fl(e,a.Bn),i=r._o(a.documents),s=r.applyChanges(i,!1),n.resolve(s.snapshot),[3,3];case 2:return o=u.sent(),a=bl(o,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Ih(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Jd(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Jh(t,ed);var e=Jh(t.firestore,cd),n=ld(e),r=new yf(e);return Rh(n,t._query,{source:"server"}).then(function(n){return new Jd(e,r,t,n)})}(this._delegate):function(t){t=Jh(t,ed);var e=Jh(t.firestore,cd),n=ld(e),r=new yf(e);return Xd(t._query),Rh(n,t._query).then(function(n){return new Jd(e,r,t,n)})}(this._delegate)).then(function(t){return new jf(e.firestore,new Jd(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Rf(e),i=Ff(e,function(e){return new jf(t.firestore,new Jd(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return bf(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Nf.su(this.firestore,e):null))},t}(),Vf=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Mf(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),jf=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Uf(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Mf(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Vf(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Mf(n._firestore,r))})},t.prototype.isEqual=function(t){return Wd(this._delegate,t._delegate)},t}(),qf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Rr.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Df(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Df(this.firestore,void 0===t?id(this._delegate):id(this._delegate,t))}catch(t){throw Pf(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Jh(t.firestore,cd),r=id(t),i=ff(t.converter,e);return _f(n,[Cd(Ed(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Ms.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Df(e.firestore,t)})},e.prototype.isEqual=function(t){return sd(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Nf.su(this.firestore,t):null))},e}(Uf);function Bf(t){return Jh(t,td)}var Gf,zf=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(pd.bind.apply(pd,(0,Rr.ev)([void 0],t)))}return t.documentId=function(){return new t(oi.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,T.m9)(t))instanceof pd&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Zf=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new kd("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new xd("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Id("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Od("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Nd("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Hf=n(5119),$f={Firestore:Af,GeoPoint:yd,Timestamp:Wr,Blob:Cf,Transaction:If,WriteBatch:Of,DocumentReference:Df,DocumentSnapshot:Lf,Query:Uf,QueryDocumentSnapshot:Mf,QuerySnapshot:jf,CollectionReference:qf,FieldPath:zf,FieldValue:Zf,setLogLevel:function(t){Ur.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Hf.wA("firestore",function(t){return function(t,e){return new Af(t,new cd(t,e),new xf)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},$f)))})(Gf=S.Z),Gf.registerVersion("@firebase/firestore","2.3.4");var Kf=n(5912);function Qf(t,e){return function(t,e=i.z){return new s.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Jf(t,e){return Qf(t,e).pipe((0,g.U)(t=>({payload:t,type:"query"})))}function Yf(t,e){return Jf(t,e).pipe((0,p.O)(void 0),c(),(0,g.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const s=n.find(t=>t.doc.ref.isEqual(e.ref)),o=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(e.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Wf(t,e,n){return Yf(t,n).pipe((0,m.R)((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Xf(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Xf(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Xf(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new d(void 0,void 0)),(0,g.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function Xf(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function tp(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class ep{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Yf(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,g.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe((0,p.O)(void 0),c(),(0,y.h)(([t,e])=>e.length>0||!t),(0,g.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe((0,m.R)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=tp(t);return Wf(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Jf(this.query,this.afs.schedulers.outsideAngular).pipe((0,g.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,o.D)(this.query.get(t)).pipe((0,v.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new np(this.ref.doc(t),this.afs)}}class np{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=up(n,e);return new ep(r,i,this.afs)}snapshotChanges(){return Qf(this.ref,this.afs.schedulers.outsideAngular).pipe((0,p.O)(void 0),c(),(0,g.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,g.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,o.D)(this.ref.get(t)).pipe((0,v.QV)(this.afs.schedulers.insideAngular))}}class rp{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Yf(this.query,this.afs.schedulers.outsideAngular).pipe((0,g.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),(0,y.h)(t=>t.length>0),this.afs.keepUnstableUntilFirst):Yf(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe((0,m.R)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=tp(t);return Wf(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Jf(this.query,this.afs.schedulers.outsideAngular).pipe((0,g.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,o.D)(this.query.get(t)).pipe((0,v.QV)(this.afs.schedulers.insideAngular))}}const ip=new r.OlP("angularfire2.enableFirestorePersistence"),sp=new r.OlP("angularfire2.firestore.persistenceSettings"),op=new r.OlP("angularfire2.firestore.settings"),ap=new r.OlP("angularfire2.firestore.use-emulator");function up(t,e=(t=>t)){return{query:e(t),ref:t}}let cp=(()=>{class t{constructor(t,e,n,r,i,s,u,c,l){this.schedulers=new b.HU(s),this.keepUnstableUntilFirst=(0,b.ss)(this.schedulers);const h=(0,b.on)(t,s,e);!w.Z.auth&&l&&(0,b.yq)();const d=c;[this.firestore,this.persistenceEnabled$]=(0,b.sI)(`${h.name}.firestore`,"AngularFirestore",h,()=>{const t=s.runOutsideAngular(()=>h.firestore());if(r&&t.settings(r),d&&t.useEmulator(...d),n&&!(0,_.PM)(i)){const e=()=>{try{return(0,o.D)(t.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(Gf){return"undefined"!=typeof console&&console.warn(Gf),(0,a.of)(!1)}};return[t,s.runOutsideAngular(e)]}return[t,(0,a.of)(!1)]},[r,d,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=up(n,e),s=this.schedulers.ngZone.run(()=>r);return new ep(s,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new rp(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new np(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(b.Dh),r.LFG(b.xv,8),r.LFG(ip,8),r.LFG(op,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(sp,8),r.LFG(ap,8),r.LFG(Kf.Qv,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(b.Dh),r.LFG(b.xv,8),r.LFG(ip,8),r.LFG(op,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(sp,8),r.LFG(ap,8),r.LFG(Kf.Qv,8))},token:t,providedIn:"any"}),t})(),lp=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:ip,useValue:!0},{provide:sp,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[cp]}),t})()},71:(t,e,n)=>{"use strict";n.d(e,{Q1:()=>qt,TE:()=>Gt});var r=n(8318),i=n(878),s=n(9764),o=n(7701),a=n(9996),u=n(9971),c=n(4689),l=n(7368),h=n(2346),d=n(1062),f=n(4762),p=n(250),g=n(5119),m="firebasestorage.googleapis.com",y=function(t){function e(n,r){var i=t.call(this,v(n),"Firebase Storage: "+r+" ("+v(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return(0,f.ZT)(e,t),e.prototype._codeEquals=function(t){return v(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(p.ZR);function v(t){return"storage/"+t}function b(){return new y("unknown","An unknown error occurred, please check the error payload for server response.")}function _(){return new y("canceled","User canceled the upload/download.")}function w(){return new y("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function S(t){return new y("invalid-argument",t)}function T(){return new y("app-deleted","The Firebase app was deleted.")}function E(t){return new y("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function C(t,e){return new y("invalid-format","String does not match format '"+t+"': "+e)}function x(t){throw new y("internal-error","Internal error: "+t)}var A={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},k=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function I(t,e){switch(t){case A.RAW:return new k(O(e));case A.BASE64:case A.BASE64URL:return new k(N(t,e));case A.DATA_URL:return new k((n=new D(e)).base64?N(A.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw C(A.DATA_URL,"Malformed data URL.")}return O(e)}(n.rest),new D(e).contentType)}var n;throw b()}function O(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,s=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&s)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function N(t,e){switch(t){case A.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw C(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case A.BASE64URL:var i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw C(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(e)}catch(c){throw C(t,"Invalid character found")}for(var a=new Uint8Array(o.length),u=0;u<o.length;u++)a[u]=o.charCodeAt(u);return a}var D=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw C(A.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),P={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function R(t){switch(t){case"running":case"pausing":case"canceling":return P.RUNNING;case"paused":return P.PAUSED;case"success":return P.SUCCESS;case"canceled":return P.CANCELED;case"error":default:return P.ERROR}}var F=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),L=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=F.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=F.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=F.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw x("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw x("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw x("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw x("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),M=function(){function t(){}return t.prototype.createXhrIo=function(){return new L},t}(),U=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(i){return new t(e,"")}if(""===r.path)return r;throw new y("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",s=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:s,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://"+(n===m?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var d=h[l.indices.path];d||(d=""),r=new t(h[l.indices.bucket],d),l.postModify(r);break}}if(null==r)throw function(t){return new y("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),V=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function j(t){return"string"==typeof t||t instanceof String}function q(t){return B()&&t instanceof Blob}function B(){return"undefined"!=typeof Blob}function G(t,e,n,r){if(r<e)throw S("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw S("Invalid value for '"+t+"'. Expected "+n+" or less.")}function z(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function Z(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var H=function(){function t(t,e,n,r,i,s,o,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=s.slice(),this.callback_=o,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,s=t.reject_,o=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(o,o.getResponseText());void 0!==a?i(a):i()}catch(u){s(u)}else null!==o?((r=b()).serverResponse=o.getResponseText(),s(t.errorCallback_?t.errorCallback_(o,r):r)):s(r=n.canceled?t.appDelete_?T():_():new y("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new $(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,s=null,o=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){s=setTimeout(function(){s=null,function(e,n){if(n)e(!1,new $(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===F.NO_ERROR,s=n.getStatus();if(r&&!t.isRetryStatusCode_(s)){var o=-1!==t.successCodes_.indexOf(s);e(!0,new $(o,n))}else{var a=n.getErrorCode()===F.ABORT;e(!1,new $(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,u())},e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,(0,f.ev)([null,t],e));else{var r;u()||o?l.call.apply(l,(0,f.ev)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var p=!1;function g(t){p||(p=!0,c||(null!==s?(t||(a=2),clearTimeout(s),h(0)):t||(a=1)))}return h(0),setTimeout(function(){o=!0,g(!0)},r),g}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),$=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function K(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=K();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(B())return new Blob(t);throw new y("unsupported-environment","This browser doesn't seem to support creating Blobs")}var J=function(){function t(t,e){var n=0,r="";q(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(q(this.data_)){var r=(s=e,o=n,(i=this.data_).webkitSlice?i.webkitSlice(s,o):i.mozSlice?i.mozSlice(s,o):i.slice?i.slice(s,o):null);return null===r?null:new t(r)}var i,s,o;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(B()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(Q.apply(null,r))}var i=e.map(function(t){return j(t)?I(A.RAW,t).data:t.data_}),s=0;i.forEach(function(t){s+=t.byteLength});var o=new Uint8Array(s),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)o[a++]=t[e]}),new t(o,!0)},t.prototype.uploadData=function(){return this.data_},t}();function Y(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function W(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function X(t,e){return e}var tt=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||X}}(),et=null;function nt(){if(et)return et;var t=[];t.push(new tt("bucket")),t.push(new tt("generation")),t.push(new tt("metageneration")),t.push(new tt("name","fullPath",!0));var e=new tt("name");e.xform=function(t,e){return function(t){return!j(t)||t.length<2?t:W(t)}(e)},t.push(e);var n=new tt("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new tt("timeCreated")),t.push(new tt("updated")),t.push(new tt("md5Hash",null,!0)),t.push(new tt("cacheControl",null,!0)),t.push(new tt("contentDisposition",null,!0)),t.push(new tt("contentEncoding",null,!0)),t.push(new tt("contentLanguage",null,!0)),t.push(new tt("contentType",null,!0)),t.push(new tt("metadata","customMetadata",!0)),et=t}function rt(t,e,n){var r=Y(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,s=0;s<i;s++){var o=n[s];r[o.local]=o.xform(r,e[o.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new U(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function it(t,e){for(var n={},r=e.length,i=0;i<r;i++){var s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var st=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function ot(t){if(!t)throw b()}function at(t,e){return function(n,r){var i=rt(t,r,e);return ot(null!==i),i}}function ut(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new y("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new y("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new y("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new y("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function ct(t){var e=ut(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new y("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function lt(t,e,n){var r=z(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,s=new st(r,"GET",at(t,n),i);return s.errorHandler=ct(e),s}function ht(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var dt=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function ft(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){ot(!1)}return ot(!!n&&-1!==(e||["active"]).indexOf(n)),n}var pt=262144,gt=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function mt(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var yt=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=nt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var s=e.bucketOnlyServerUrl(),o=ht(e,r,i),a={name:o.fullPath},u=z(s,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=it(o,n),h=new st(u,"POST",function(t){var e;ft(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){ot(!1)}return ot(j(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=ut(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new st(n,"POST",function(t){var e=ft(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(s){ot(!1)}n||ot(!1);var i=Number(n);return ot(!isNaN(i)),new dt(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=ut(e),i}(t._ref.storage,t._ref._location,e,t._blob),s=t._ref.storage._makeRequest(i,n,r);t._request=s,s.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=pt*this._chunkMultiplier,n=new dt(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,s){var o;try{o=function(t,e,n,r,i,s,o,a){var u=new dt(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new y("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},f=r.slice(h,h+l);if(null===f)throw w();var p=new st(n,"POST",function(t,n){var i,o=ft(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===o?at(e,s)(t,n):null,new dt(a,c,"final"===o,i)},e.maxUploadRetryTime);return p.headers=d,p.body=f.uploadData(),p.progressCallback=a||null,p.errorHandler=ut(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(u){return t._error=u,void t._transition("error")}var a=t._ref.storage._makeRequest(o,i,s);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){pt*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=lt(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();o["Content-Type"]="multipart/related; boundary="+a;var u=ht(e,r,i),c=it(u,n),l=J.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw w();var h={name:u.fullPath},d=z(s,t.host),f=t.maxUploadRetryTime,p=new st(d,"POST",at(t,n),f);return p.urlParams=h,p.headers=o,p.body=l.uploadData(),p.errorHandler=ut(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=_(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=R(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,s=new gt(e,n,r);return this._addObserver(s),function(){i._removeObserver(s)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(R(this._state)){case P.SUCCESS:mt(this._resolve.bind(null,this.snapshot))();break;case P.CANCELED:case P.ERROR:mt(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(R(this._state)){case P.RUNNING:case P.PAUSED:t.next&&mt(t.next.bind(t,this.snapshot))();break;case P.SUCCESS:t.complete&&mt(t.complete.bind(t))();break;case P.CANCELED:case P.ERROR:t.error&&mt(t.error.bind(t,this._error))();break;default:t.error&&mt(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),vt=function(){function t(t,e){this._service=t,this._location=e instanceof U?e:U.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new U(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return W(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new U(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw E(t)},t}();function bt(t){var e={prefixes:[],items:[]};return _t(t,e).then(function(){return e})}function _t(t,e,n){return(0,f.mG)(this,void 0,void 0,function(){var r,i,s;return(0,f.Jh)(this,function(o){switch(o.label){case 0:return[4,wt(t,{pageToken:n})];case 1:return r=o.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(s=e.items).push.apply(s,r.items),null==r.nextPageToken?[3,3]:[4,_t(t,e,r.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}})})}function wt(t,e){return(0,f.mG)(this,void 0,void 0,function(){var n,r;return(0,f.Jh)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&G("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var s={};s.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);var o=z(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new st(o,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=Y(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,s=n.prefixes;i<s.length;i++){var o=s[i].replace(/\/$/,""),a=t._makeStorageReference(new U(e,o));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new U(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return ot(null!==i),i}}(t,e.bucket),a);return u.urlParams=s,u.errorHandler=ut(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function St(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new U(t._location.bucket,n);return new vt(t.storage,r)}function Tt(t){return/^[A-Za-z]+:\/\//.test(t)}function Et(t,e){if(t instanceof At){var n=t;if(null==n._bucket)throw new y("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new vt(n,n._bucket);return null!=e?Et(r,e):r}if(void 0!==e){if(e.includes(".."))throw S('`path` param cannot contain ".."');return St(t,e)}return t}function Ct(t,e){if(e&&Tt(e)){if(t instanceof At)return new vt(t,e);throw S("To use ref(service, url), the first argument must be a Storage instance.")}return Et(t,e)}function xt(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:U.makeFromBucketSpec(n,t)}var At=function(){function t(t,e,n,r,i,s){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=m,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?U.makeFromBucketSpec(i,this._host):xt(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?U.makeFromBucketSpec(this._url,t):xt(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){G("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){G("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,f.mG)(this,void 0,void 0,function(){var t,e;return(0,f.Jh)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return(0,f.mG)(this,void 0,void 0,function(){var t;return(0,f.Jh)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new vt(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new V(T());var i=function(t,e,n,r,i,s){var o=Z(t.urlParams),a=t.url+o,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,s),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new H(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return(0,f.mG)(this,void 0,void 0,function(){var e;return(0,f.Jh)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function kt(t,e){return Ct(t=(0,p.m9)(t),e)}var It,Ot,Nt=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Dt=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Nt(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new Nt(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,s=void 0;return e&&(s="function"==typeof e?function(t){return e(new Nt(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Nt(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,n||void 0,r||void 0)},t}(),Pt=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new Rt(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new Rt(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Rt=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return St(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Dt(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new yt(t,new J(e),n)}(t=(0,p.m9)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=A.RAW),this._throwIfRoot("putString");var r=I(e,t),i=(0,f.pi)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Dt(new yt(this._delegate,new J(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return bt(t=(0,p.m9)(t))}(this._delegate).then(function(e){return new Pt(e,t.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return wt(t=(0,p.m9)(t),e)}(this._delegate,t||void 0).then(function(t){return new Pt(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return function(t){return(0,f.mG)(this,void 0,void 0,function(){var e;return(0,f.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=lt(t.storage,t._location,nt()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,p.m9)(t))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return(0,f.mG)(this,void 0,void 0,function(){var n;return(0,f.Jh)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=z(e.fullServerUrl(),t.host),s=it(n,r),o=t.maxOperationRetryTime,a=new st(i,"PATCH",at(t,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=ct(e),a}(t.storage,t._location,e,nt()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=(0,p.m9)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return function(t){return(0,f.mG)(this,void 0,void 0,function(){var e;return(0,f.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=z(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,s=new st(r,"GET",function(t,e){return function(n,r){var i=rt(t,r,e);return ot(null!==i),function(t,e,n){var r=Y(e);if(null===r)return null;if(!j(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var s=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return z("/b/"+s(t.bucket)+"/o/"+s(r),n)+Z({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return s.errorHandler=ct(e),s}(t.storage,t._location,nt()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new y("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=(0,p.m9)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return function(t){return(0,f.mG)(this,void 0,void 0,function(){var e;return(0,f.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=z(e.fullServerUrl(),t.host),r=new st(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=ct(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,p.m9)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw E(t)},t}(),Ft=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Tt(t))throw S("ref() expected a child path but got a URL, use refFromURL instead.");return new Rt(kt(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Tt(t))throw S("refFromURL() expected a full URL but got a child path, use ref() instead.");try{U.makeFromUrl(t,this._delegate.host)}catch(e){throw S("refFromUrl() expected a valid full URL but got an invalid one.")}return new Rt(kt(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function Lt(t){const e=function(t){return new r.y(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe((0,o.b)(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,a.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Mt(t,e,n){return{getDownloadURL:()=>(0,i.of)(void 0).pipe((0,u.QV)(e.outsideAngular),(0,c.w)(()=>t.getDownloadURL()),n),getMetadata:()=>(0,i.of)(void 0).pipe((0,u.QV)(e.outsideAngular),(0,c.w)(()=>t.getMetadata()),n),delete:()=>(0,s.D)(t.delete()),child:r=>Mt(t.child(r),e,n),updateMetadata:e=>(0,s.D)(t.updateMetadata(e)),put:(e,n)=>Lt(t.put(e,n)),putString:(e,n,r)=>Lt(t.putString(e,n,r)),listAll:()=>(0,s.D)(t.listAll())}}Ot={TaskState:P,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:A,Storage:At,Reference:Rt},(It=d.Z).INTERNAL.registerComponent(new g.wA("storage",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ft(r,new At(r,i,s,new M,n,d.Z.SDK_VERSION))},"PUBLIC").setServiceProps(Ot).setMultipleInstances(!0)),It.registerVersion("@firebase/storage","0.5.3"),n(1116);const Ut=new l.OlP("angularfire2.storageBucket"),Vt=new l.OlP("angularfire2.storage.maxUploadRetryTime"),jt=new l.OlP("angularfire2.storage.maxOperationRetryTime");let qt=(()=>{class t{constructor(t,e,n,r,i,s,o){this.schedulers=new h.HU(i),this.keepUnstableUntilFirst=(0,h.ss)(this.schedulers);const a=(0,h.on)(t,i,e);this.storage=(0,h.sI)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return s&&t.setMaxUploadRetryTime(s),o&&t.setMaxOperationRetryTime(o),t},[s,o])}ref(t){return Mt(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return Mt(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return Mt(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(h.Dh),l.LFG(h.xv,8),l.LFG(Ut,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Vt,8),l.LFG(jt,8))},t.\u0275prov=l.Yz7({factory:function(){return new t(l.LFG(h.Dh),l.LFG(h.xv,8),l.LFG(Ut,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Vt,8),l.LFG(jt,8))},token:t,providedIn:"any"}),t})(),Bt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({}),t})(),Gt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({providers:[qt],imports:[Bt]}),t})()},2346:(t,e,n)=>{"use strict";n.d(e,{hO:()=>x,xv:()=>b,Dh:()=>v,HU:()=>f,GT:()=>y,sI:()=>E,on:()=>w,ss:()=>p,pX:()=>m,yq:()=>S});var r=n(8489),i=n(8569),s=n(6599),o=n(4187),a=n(9971),u=n(7368),c=n(1858);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,s.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe((0,o.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(t[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,t[s]),t[s];if(g.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(t=>{const e=t&&t[s];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>o[e],apply:(t,e,n)=>o.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(s,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),b=new u.OlP("angularfire2.app.nameOrConfig"),_=new u.GfV("6.1.5");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const s=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(s.options)&&T("error",`${s.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(o){}return s}const S=()=>{T("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},T=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,s){const[o,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(o){try{s.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&T("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return o}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...s]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const C={provide:class{},useFactory:w,deps:[v,u.R0b,[new u.FiY,b]]};let x=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",_.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[C]}),t})()},1462:(t,e,n)=>{"use strict";n.d(e,{Fj:()=>m,CE:()=>Ct,qu:()=>jt,NI:()=>ut,u:()=>kt,cw:()=>ct,sg:()=>wt,x0:()=>Tt,u5:()=>Ut,JJ:()=>j,JL:()=>q,On:()=>pt,YN:()=>Dt,wV:()=>yt,UX:()=>Vt,EJ:()=>Nt,kI:()=>S,_Y:()=>gt,Kr:()=>Lt});var r=n(7368),i=n(1116),s=n(8318),o=n(8470),a=n(9996),u=n(2056),c=n(9764);function l(t,e){return new s.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const u=(0,c.D)(t[a]);let l=!1;n.add(u.subscribe({next:t=>{l||(l=!0,o++),i[a]=t},error:t=>n.error(t),complete:()=>{s++,s!==r&&l||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let h=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),d=(()=>{class t extends h{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const f=new r.OlP("NgValueAccessor"),p={provide:f,useExisting:(0,r.Gpc)(()=>m),multi:!0},g=new r.OlP("CompositionEventMode");let m=(()=>{class t extends h{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=(0,i.q)()?(0,i.q)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(g,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r._Bn([p]),r.qOj]}),t})();function y(t){return null==t||0===t.length}function v(t){return null!=t&&"number"==typeof t.length}const b=new r.OlP("NgValidators"),_=new r.OlP("NgAsyncValidators"),w=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class S{static min(t){return function(t){return e=>{if(y(e.value)||y(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(y(e.value)||y(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return function(t){return y(t.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return y(t.value)||w.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>y(e.value)||!v(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>v(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return T;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(y(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return I(t)}static composeAsync(t){return N(t)}}function T(t){return null}function E(t){return null!=t}function C(t){const e=(0,r.QGY)(t)?(0,c.D)(t):t;return(0,r.CqO)(e),e}function x(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function A(t,e){return e.map(e=>e(t))}function k(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function I(t){if(!t)return null;const e=t.filter(E);return 0==e.length?null:function(t){return x(A(t,e))}}function O(t){return null!=t?I(k(t)):null}function N(t){if(!t)return null;const e=t.filter(E);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if((0,o.k)(e))return l(e,null);if((0,u.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return l(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return l(t=1===t.length&&(0,o.k)(t[0])?t[0]:t,null).pipe((0,a.U)(t=>e(...t)))}return l(t,null)}(A(t,e).map(C)).pipe((0,a.U)(x))}}function D(t){return null!=t?N(k(t)):null}function P(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function R(t){return t._rawValidators}function F(t){return t._rawAsyncValidators}let L=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=O(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=D(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),M=(()=>{class t extends L{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();class U extends L{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class V{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let j=(()=>{class t extends V{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(U,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})(),q=(()=>{class t extends V{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(M,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})();function B(t,e){return[...e.path,t]}function G(t,e){H(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&K(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&K(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function z(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),$(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Z(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function H(t,e){const n=R(t);null!==e.validator?t.setValidators(P(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=F(t);null!==e.asyncValidator?t.setAsyncValidators(P(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Z(e._rawValidators,i),Z(e._rawAsyncValidators,i)}function $(t,e){let n=!1;if(null!==t){if(null!==e.validator){const r=R(t);if(Array.isArray(r)&&r.length>0){const i=r.filter(t=>t!==e.validator);i.length!==r.length&&(n=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const r=F(t);if(Array.isArray(r)&&r.length>0){const i=r.filter(t=>t!==e.asyncValidator);i.length!==r.length&&(n=!0,t.setAsyncValidators(i))}}}const r=()=>{};return Z(e._rawValidators,r),Z(e._rawAsyncValidators,r),n}function K(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Q(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}function J(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===m?n=t:Object.getPrototypeOf(t.constructor)===d?r=t:i=t}),i||r||n||null}function Y(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const W="VALID",X="INVALID",tt="PENDING",et="DISABLED";function nt(t){return(ot(t)?t.validators:t)||null}function rt(t){return Array.isArray(t)?O(t):t||null}function it(t,e){return(ot(e)?e.asyncValidators:t)||null}function st(t){return Array.isArray(t)?D(t):t||null}function ot(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class at{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=rt(this._rawValidators),this._composedAsyncValidatorFn=st(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===W}get invalid(){return this.status===X}get pending(){return this.status==tt}get disabled(){return this.status===et}get enabled(){return this.status!==et}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=rt(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=st(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=tt,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=et,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=W,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==W&&this.status!==tt||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?et:W}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=tt,this._hasOwnPendingAsyncValidator=!0;const e=C(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof ct?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof lt&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?et:this.errors?X:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(tt)?tt:this._anyControlsHaveStatus(X)?X:W}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ot(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ut extends at{constructor(t=null,e,n){super(nt(e),it(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Y(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Y(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class ct extends at{constructor(t,e,n){super(nt(e),it(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof ut?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class lt extends at{constructor(t,e,n){super(nt(e),it(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof ut?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let ht=(()=>{class t extends M{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return B(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const dt={provide:U,useExisting:(0,r.Gpc)(()=>pt)},ft=(()=>Promise.resolve(null))();let pt=(()=>{class t extends U{constructor(t,e,n,i){super(),this.control=new ut,this._registered=!1,this.update=new r.vpe,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=J(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),Q(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?B(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){G(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){ft.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;ft.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(M,9),r.Y36(b,10),r.Y36(_,10),r.Y36(f,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([dt]),r.qOj,r.TTD]}),t})(),gt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const mt={provide:f,useExisting:(0,r.Gpc)(()=>yt),multi:!0};let yt=(()=>{class t extends d{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r._Bn([mt]),r.qOj]}),t})(),vt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const bt=new r.OlP("NgModelWithFormControlWarning"),_t={provide:M,useExisting:(0,r.Gpc)(()=>wt)};let wt=(()=>{class t extends M{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.vpe,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return G(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){z(t.control||null,t,!1),Y(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(z(e||null,t),n instanceof ut&&(G(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){H(t,e)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return $(t,e)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){H(this.form,this),this._oldForm&&$(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(b,10),r.Y36(_,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([_t]),r.qOj,r.TTD]}),t})();const St={provide:M,useExisting:(0,r.Gpc)(()=>Tt)};let Tt=(()=>{class t extends ht{constructor(t,e,n){super(),this._parent=t,this._setValidators(e),this._setAsyncValidators(n)}_checkParentType(){xt(this._parent)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(M,13),r.Y36(b,10),r.Y36(_,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[r._Bn([St]),r.qOj]}),t})();const Et={provide:M,useExisting:(0,r.Gpc)(()=>Ct)};let Ct=(()=>{class t extends M{constructor(t,e,n){super(),this._parent=t,this._setValidators(e),this._setAsyncValidators(n)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return B(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){xt(this._parent)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(M,13),r.Y36(b,10),r.Y36(_,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[r._Bn([Et]),r.qOj]}),t})();function xt(t){return!(t instanceof Tt||t instanceof wt||t instanceof Ct)}const At={provide:U,useExisting:(0,r.Gpc)(()=>kt)};let kt=(()=>{class t extends U{constructor(t,e,n,i,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new r.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=J(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Q(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return B(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(M,13),r.Y36(b,10),r.Y36(_,10),r.Y36(f,10),r.Y36(bt,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r._Bn([At]),r.qOj,r.TTD]}),t._ngModelWarningSentOnce=!1,t})();const It={provide:f,useExisting:(0,r.Gpc)(()=>Nt),multi:!0};function Ot(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Nt=(()=>{class t extends d{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this.setProperty("selectedIndex",-1);const n=Ot(e,t);this.setProperty("value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.NdJ("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([It]),r.qOj]}),t})(),Dt=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Ot(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Nt,9))},t.\u0275dir=r.lG2({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const Pt={provide:f,useExisting:(0,r.Gpc)(()=>Ft),multi:!0};function Rt(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Ft=(()=>{class t extends d{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.NdJ("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Pt]),r.qOj]}),t})(),Lt=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Rt(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Rt(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Ft,9))},t.\u0275dir=r.lG2({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),Mt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[vt]]}),t})(),Ut=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[Mt]}),t})(),Vt=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:bt,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[Mt]}),t})(),jt=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,s=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,s=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,s=null!=e.asyncValidator?e.asyncValidator:null)),new ct(n,{asyncValidators:s,updateOn:r,validators:i})}control(t,e,n){return new ut(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new lt(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof ut||t instanceof ct||t instanceof lt?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t},token:t,providedIn:Vt}),t})()},4051:(t,e,n)=>{"use strict";n.d(e,{F0:()=>Cn,rH:()=>xn,yS:()=>An,Bz:()=>Vn,lC:()=>In});var r=n(1116),i=n(7368),s=n(6163),o=n(8470),a=n(6673);class u extends a.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class c extends a.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var l=n(6015),h=n(8318);function d(t,e,n,r,i=new c(t,n,r)){if(!i.closed)return e instanceof h.y?e.subscribe(i):(0,l.s)(e)(i)}var f=n(9342);const p={};class g{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new m(t,this.resultSelector))}}class m extends u{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(p),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(d(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===p?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}var y=n(9764),v=n(653);function b(t){return new h.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,y.D)(n):(0,v.c)()).subscribe(e)})}var _=n(878),w=n(8512),S=n(9665),T=n(7930),E=n(2875),C=n(5959),x=n(3835),A=n(8402);function k(t){return function(e){return 0===t?(0,v.c)():e.lift(new I(t))}}class I{constructor(t){if(this.total=t,this.total<0)throw new A.W}call(t,e){return e.subscribe(new O(t,this.total))}}class O extends a.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var N=n(790),D=n(7768),P=n(3392),R=n(7570);class F{constructor(t){this.callback=t}call(t,e){return e.subscribe(new L(t,this.callback))}}class L extends a.L{constructor(t,e){super(t),this.add(new R.w(e))}}var M=n(9996),U=n(4689),V=n(611),j=n(6238),q=n(2023),B=n(7727),G=n(436),z=n(3530),Z=n(3982),H=n(6599),$=n(1564),K=n(7471);class Q{constructor(t,e){this.id=t,this.url=e}}class J extends Q{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Y extends Q{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class W extends Q{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class X extends Q{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class tt extends Q{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class et extends Q{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nt extends Q{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rt extends Q{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class it extends Q{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class st{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ot{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class at{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ut{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ct{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lt{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ht{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const dt="primary";class ft{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function pt(t){return new ft(t)}function gt(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function mt(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function yt(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!vt(t[i],e[i]))return!1;return!0}function vt(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function bt(t){return Array.prototype.concat.apply([],t)}function _t(t){return t.length>0?t[t.length-1]:null}function wt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function St(t){return(0,i.CqO)(t)?t:(0,i.QGY)(t)?(0,y.D)(Promise.resolve(t)):(0,_.of)(t)}const Tt={exact:function t(e,n,r){if(!Dt(e.segments,n.segments))return!1;if(!kt(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:xt},Et={exact:function(t,e){return yt(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>vt(t[n],e[n]))},ignored:()=>!0};function Ct(t,e,n){return Tt[n.paths](t.root,e.root,n.matrixParams)&&Et[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function xt(t,e,n){return At(t,e,e.segments,n)}function At(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!Dt(i,n)&&!e.hasChildren()&&!!kt(i,n,r)}if(t.segments.length===n.length){if(!Dt(t.segments,n))return!1;if(!kt(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!xt(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!Dt(t.segments,i)&&!!kt(t.segments,i,r)&&!!t.children.primary&&At(t.children.primary,e,s,r)}}function kt(t,e,n){return e.every((e,r)=>Et[n](t[r].parameters,e.parameters))}class It{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pt(this.queryParams)),this._queryParamMap}toString(){return Ft.serialize(this)}}class Ot{constructor(t,e){this.segments=t,this.children=e,this.parent=null,wt(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Lt(this)}}class Nt{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=pt(this.parameters)),this._parameterMap}toString(){return Gt(this)}}function Dt(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Pt{}class Rt{parse(t){const e=new Kt(t);return new It(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Mt(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Vt(e)}=${Vt(t)}`).join("&"):`${Vt(e)}=${Vt(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Ft=new Rt;function Lt(t){return t.segments.map(t=>Gt(t)).join("/")}function Mt(t,e){if(!t.hasChildren())return Lt(t);if(e){const e=t.children.primary?Mt(t.children.primary,!1):"",n=[];return wt(t.children,(t,e)=>{e!==dt&&n.push(`${e}:${Mt(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return wt(t.children,(t,r)=>{r===dt&&(n=n.concat(e(t,r)))}),wt(t.children,(t,r)=>{r!==dt&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===dt?[Mt(t.children.primary,!1)]:[`${n}:${Mt(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Lt(t)}/${e[0]}`:`${Lt(t)}/(${e.join("//")})`}}function Ut(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vt(t){return Ut(t).replace(/%3B/gi,";")}function jt(t){return Ut(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qt(t){return decodeURIComponent(t)}function Bt(t){return qt(t.replace(/\+/g,"%20"))}function Gt(t){return`${jt(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${jt(t)}=${jt(e[t])}`).join("")}`;var e}const zt=/^[^\/()?;=#]+/;function Zt(t){const e=t.match(zt);return e?e[0]:""}const Ht=/^[^=?&#]+/,$t=/^[^?&#]+/;class Kt{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ot([],{}):new Ot([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Ot(t,e)),n}parseSegment(){const t=Zt(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Nt(qt(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Zt(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Zt(this.remaining);t&&(n=t,this.capture(n))}t[qt(e)]=qt(n)}parseQueryParam(t){const e=function(t){const e=t.match(Ht);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match($t);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Bt(e),i=Bt(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Zt(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=dt);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new Ot([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Qt{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Jt(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Jt(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Yt(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Yt(t,this._root).map(t=>t.value)}}function Jt(t,e){if(t===e.value)return e;for(const n of e.children){const e=Jt(t,n);if(e)return e}return null}function Yt(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Yt(t,n);if(r.length)return r.unshift(e),r}return[]}class Wt{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Xt(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class te extends Qt{constructor(t,e){super(t),this.snapshot=e,oe(this,t)}toString(){return this.snapshot.toString()}}function ee(t,e){const n=function(t,e){const n=new ie([],{},{},"",{},dt,e,null,t.root,-1,{});return new se("",new Wt(n,[]))}(t,e),r=new w.X([new Nt("",{})]),i=new w.X({}),s=new w.X({}),o=new w.X({}),a=new w.X(""),u=new ne(r,i,o,a,s,dt,e,n.root);return u.snapshot=n.root,new te(new Wt(u,[]),n)}class ne{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,M.U)(t=>pt(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,M.U)(t=>pt(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function re(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class ie{constructor(t,e,n,r,i,s,o,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=pt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class se extends Qt{constructor(t,e){super(e),this.url=t,oe(this,e)}toString(){return ae(this._root)}}function oe(t,e){e.value._routerState=t,e.children.forEach(e=>oe(t,e))}function ae(t){const e=t.children.length>0?` { ${t.children.map(ae).join(", ")} } `:"";return`${t.value}${e}`}function ue(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,yt(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),yt(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!yt(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),yt(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function ce(t,e){var n,r;return yt(t.params,e.params)&&Dt(n=t.url,r=e.url)&&n.every((t,e)=>yt(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||ce(t.parent,e.parent))}function le(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return le(t,e,r);return le(t,e)})}(t,e,n);return new Wt(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return he(e,t),t}}const n=new ne(new w.X((r=e.value).url),new w.X(r.params),new w.X(r.queryParams),new w.X(r.fragment),new w.X(r.data),r.outlet,r.component,r),i=e.children.map(e=>le(t,e));return new Wt(n,i)}var r}function he(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)he(t.children[n],e.children[n])}function de(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function fe(t){return"object"==typeof t&&null!=t&&t.outlets}function pe(t,e,n,r,i){let s={};return r&&wt(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new It(n.root===t?e:ge(n.root,t,e),s,i)}function ge(t,e,n){const r={};return wt(t.children,(t,i)=>{r[i]=t===e?n:ge(t,e,n)}),new Ot(t.segments,r)}class me{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&de(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(fe);if(r&&r!==_t(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ye{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function ve(t,e,n){if(t||(t=new Ot([],{})),0===t.segments.length&&t.hasChildren())return be(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=n[r];if(fe(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Te(a,u,e))return s;r+=2}else{if(!Te(a,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Ot(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Ot(t.segments.slice(r.pathIndex),t.children),be(e,0,i)}return r.match&&0===i.length?new Ot(t.segments,{}):r.match&&!t.hasChildren()?_e(t,e,n):r.match?be(t,0,i):_e(t,e,n)}function be(t,e,n){if(0===n.length)return new Ot(t.segments,{});{const r=function(t){return fe(t[0])?t[0].outlets:{[dt]:t}}(n),i={};return wt(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=ve(t.children[r],e,n))}),wt(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Ot(t.segments,i)}}function _e(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(fe(s)){const t=we(s.outlets);return new Ot(r,t)}if(0===i&&de(n[0])){r.push(new Nt(t.segments[e].path,Se(n[0]))),i++;continue}const o=fe(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&de(a)?(r.push(new Nt(o,Se(a))),i+=2):(r.push(new Nt(o,{})),i++)}return new Ot(r,{})}function we(t){const e={};return wt(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=_e(new Ot([],{}),0,t))}),e}function Se(t){const e={};return wt(t,(t,n)=>e[n]=`${t}`),e}function Te(t,e,n){return t==n.path&&yt(e,n.parameters)}class Ee{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),ue(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Xt(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),wt(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Xt(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Xt(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new lt(t.value.snapshot))}),t.children.length&&this.forwardEvent(new ut(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(ue(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Ce(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Ce(t){ue(t.value),t.children.forEach(Ce)}class xe{constructor(t,e){this.routes=t,this.module=e}}function Ae(t){return"function"==typeof t}function ke(t){return t instanceof It}const Ie=Symbol("INITIAL_VALUE");function Oe(){return(0,U.w)(t=>function(...t){let e,n;return(0,s.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,o.k)(t[0])&&(t=t[0]),(0,f.n)(t,n).lift(new g(e))}(t.map(t=>t.pipe((0,V.q)(1),(0,j.O)(Ie)))).pipe((0,q.R)((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Ie)return t;if(r===Ie&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||ke(r))return r}return t},t)},Ie),(0,x.h)(t=>t!==Ie),(0,M.U)(t=>ke(t)?t:!0===t),(0,V.q)(1)))}let Ne=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&i._UZ(0,"router-outlet")},directives:function(){return[In]},encapsulation:2}),t})();function De(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Pe(r,Re(e,r))}}function Pe(t,e){t.children&&De(t.children,e)}function Re(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Fe(t){const e=t.children&&t.children.map(Fe),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==dt&&(n.component=Ne),n}function Le(t){return t.outlet||dt}function Me(t,e){const n=t.filter(t=>Le(t)===e);return n.push(...t.filter(t=>Le(t)!==e)),n}const Ue={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Ve(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Ue):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||mt)(n,t,e);if(!i)return Object.assign({},Ue);const s={};wt(i.posParams,(t,e)=>{s[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function je(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>qe(t,e,n)&&Le(n)!==dt)}(t,n,r)){const i=new Ot(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&Le(s)!==dt){const n=new Ot([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Le(s)]=n}return i}(t,e,r,new Ot(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>qe(t,e,n))}(t,n,r)){const s=new Ot(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if(qe(t,n,a)&&!i[Le(a)]){const n=new Ot([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[Le(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new Ot(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function qe(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Be(t,e,n,r){return!!(Le(t)===r||r!==dt&&qe(e,n,t))&&("**"===t.path||Ve(e,t,n).matched)}function Ge(t,e,n){return 0===e.length&&!t.children[n]}class ze{constructor(t){this.segmentGroup=t||null}}class Ze{constructor(t){this.urlTree=t}}function He(t){return new h.y(e=>e.error(new ze(t)))}function $e(t){return new h.y(e=>e.error(new Ze(t)))}function Ke(t){return new h.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Qe{constructor(t,e,n,r,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(i.h0i)}apply(){const t=je(this.urlTree.root,[],[],this.config).segmentGroup,e=new Ot(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,dt).pipe((0,M.U)(t=>this.createUrlTree(Je(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,B.K)(t=>{if(t instanceof Ze)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof ze)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,dt).pipe((0,M.U)(e=>this.createUrlTree(Je(e),t.queryParams,t.fragment))).pipe((0,B.K)(t=>{if(t instanceof ze)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Ot([],{[dt]:t}):t;return new It(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,M.U)(t=>new Ot([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,y.D)(r).pipe((0,G.b)(r=>{const i=n.children[r],s=Me(e,r);return this.expandSegmentGroup(t,s,i,r).pipe((0,M.U)(t=>({segment:t,outlet:r})))}),(0,q.R)((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?(0,x.h)((e,n)=>t(e,n,r)):P.y,k(1),n?(0,D.d)(e):(0,N.T)(()=>new S.K))}())}expandSegment(t,e,n,r,i,s){return(0,y.D)(n).pipe((0,G.b)(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe((0,B.K)(t=>{if(t instanceof ze)return(0,_.of)(null);throw t}))),(0,z.P)(t=>!!t),(0,B.K)((t,n)=>{if(t instanceof S.K||"EmptyError"===t.name){if(Ge(e,r,i))return(0,_.of)(new Ot([],{}));throw new ze(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return Be(r,e,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):He(e):He(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?$e(i):this.lineralizeSegments(n,i).pipe((0,Z.zg)(n=>{const i=new Ot(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Ve(e,r,i);if(!o)return He(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?$e(l):this.lineralizeSegments(r,l).pipe((0,Z.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,_.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,M.U)(t=>(n._loadedConfig=t,new Ot(r,{})))):(0,_.of)(new Ot(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=Ve(e,n,r);if(!s)return He(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,Z.zg)(t=>{const r=t.module,s=t.routes,{segmentGroup:a,slicedSegments:c}=je(e,o,u,s),l=new Ot(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,M.U)(t=>new Ot(o,t)));if(0===s.length&&0===c.length)return(0,_.of)(new Ot(o,{}));const h=Le(n)===i;return this.expandSegment(r,l,s,c,h?dt:i,!0).pipe((0,M.U)(t=>new Ot(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,_.of)(new xe(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,_.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,Z.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,M.U)(t=>(e._loadedConfig=t,t))):function(t){return new h.y(e=>e.error(gt(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,_.of)(new xe([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,_.of)(!0);const i=r.map(r=>{const i=t.get(r);let s;if(function(t){return t&&Ae(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!Ae(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return St(s)});return(0,_.of)(i).pipe(Oe(),(0,H.b)(t=>{if(!ke(t))return;const e=gt(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,M.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,_.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Ke(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new It(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return wt(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return wt(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new Ot(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Je(t){const e={};for(const n of Object.keys(t.children)){const r=Je(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Ot(t.segments.concat(e.segments),e.children)}return t}(new Ot(t.segments,e))}class Ye{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class We{constructor(t,e){this.component=t,this.route=e}}function Xe(t,e,n){const r=t._root;return en(r,e?e._root:null,n,[r.value])}function tn(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function en(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Xt(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Dt(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Dt(t.url,e.url)||!yt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ce(t,e)||!yt(t.queryParams,e.queryParams);case"paramsChange":default:return!ce(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ye(r)):(s.data=o.data,s._resolvedData=o._resolvedData),en(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new We(a.outlet.component,o))}else o&&nn(e,a,i),i.canActivateChecks.push(new Ye(r)),en(t,null,s.component?a?a.children:null:n,r,i)}(t,s[t.value.outlet],n,r.concat([t.value]),i),delete s[t.value.outlet]}),wt(s,(t,e)=>nn(t,n.getContext(e),i)),i}function nn(t,e,n){const r=Xt(t),i=t.value;wt(r,(t,r)=>{nn(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new We(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class rn{}function sn(t){return new h.y(e=>e.error(t))}class on{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const t=je(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,dt);if(null===e)return null;const n=new ie([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},dt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Wt(n,e),i=new se(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=re(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],s=Me(t,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=un(n);return r.sort((t,e)=>t.value.outlet===dt?-1:e.value.outlet===dt?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Ge(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Be(t,e,n,r))return null;let i,s=[],o=[];if("**"===t.path){const r=n.length>0?_t(n).parameters:{};i=new ie(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hn(t),Le(t),t.component,t,cn(e),ln(e)+n.length,dn(t))}else{const r=Ve(e,t,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new ie(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hn(t),Le(t),t.component,t,cn(e),ln(e)+s.length,dn(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=je(e,s,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Wt(i,t)]}if(0===a.length&&0===c.length)return[new Wt(i,[])];const l=Le(t)===r,h=this.processSegment(a,u,c,l?dt:r);return null===h?null:[new Wt(i,h)]}}function an(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function un(t){const e=[],n=new Set;for(const r of t){if(!an(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=un(r.children);e.push(new Wt(r.value,t))}return e.filter(t=>!n.has(t))}function cn(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ln(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function hn(t){return t.data||{}}function dn(t){return t.resolve||{}}function fn(t){return(0,U.w)(e=>{const n=t(e);return n?(0,y.D)(n).pipe((0,M.U)(()=>e)):(0,_.of)(e)})}class pn extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const gn=new i.OlP("ROUTES");class mn{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,M.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new xe(bt(r.injector.get(gn,void 0,i.XFs.Self|i.XFs.Optional)).map(Fe),r)}),(0,B.K)(t=>{throw e._loader$=void 0,t}));return e._loader$=new E.c(n,()=>new C.xQ).pipe((0,$.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,y.D)(this.loader.load(t)):St(t()).pipe((0,Z.zg)(t=>t instanceof i.YKP?(0,_.of)(t):(0,y.D)(this.compiler.compileModuleAsync(t))))}}class yn{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new vn,this.attachRef=null}}class vn{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new yn,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class bn{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function _n(t){throw t}function wn(t,e,n){return e.parse("/")}function Sn(t,e){return(0,_.of)(null)}const Tn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},En={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Cn=(()=>{class t{constructor(t,e,n,r,s,o,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new C.xQ,this.errorHandler=_n,this.malformedUriErrorHandler=wn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Sn,afterPreactivation:Sn},this.urlHandlingStrategy=new bn,this.routeReuseStrategy=new pn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=s.get(i.h0i),this.console=s.get(i.c2e);const c=s.get(i.R0b);this.isNgZoneEnabled=c instanceof i.R0b&&i.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new It(new Ot([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new mn(o,a,t=>this.triggerEvent(new st(t)),t=>this.triggerEvent(new ot(t))),this.routerState=ee(this.currentUrlTree,this.rootComponentType),this.transitions=new w.X({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe((0,x.h)(t=>0!==t.id),(0,M.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),(0,U.w)(t=>{let n=!1,r=!1;return(0,_.of)(t).pipe((0,H.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,U.w)(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,_.of)(t).pipe((0,U.w)(t=>{const n=this.transitions.getValue();return e.next(new J(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?v.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,(0,U.w)(t=>function(t,e,n,r,i){return new Qe(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,o).pipe((0,M.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,H.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,Z.zg)(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){try{const o=new on(t,e,n,r,i,s).recognize();return null===o?sn(new rn):(0,_.of)(o)}catch(o){return sn(o)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,M.U)(t=>Object.assign(Object.assign({},s),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,H.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new tt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new J(n,this.serializeUrl(r),i,s);e.next(a);const u=ee(r,this.rootComponentType).snapshot;return(0,_.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),v.E}),fn(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,H.b)(t=>{const e=new et(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,M.U)(t=>Object.assign(Object.assign({},t),{guards:Xe(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,Z.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,_.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,y.D)(t).pipe((0,Z.zg)(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,_.of)(!0);const o=s.map(s=>{const o=tn(s,e,i);let a;if(function(t){return t&&Ae(t.canDeactivate)}(o))a=St(o.canDeactivate(t,e,n,r));else{if(!Ae(o))throw new Error("Invalid CanDeactivate guard");a=St(o(t,e,n,r))}return a.pipe((0,z.P)())});return(0,_.of)(o).pipe(Oe())}(t.component,t.route,n,e,r)),(0,z.P)(t=>!0!==t,!0))}(o,r,i,t).pipe((0,Z.zg)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return(0,y.D)(e).pipe((0,G.b)(e=>(0,T.z)(function(t,e){return null!==t&&e&&e(new at(t)),(0,_.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new ct(t)),(0,_.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>b(()=>{const i=e.guards.map(i=>{const s=tn(i,e.node,n);let o;if(function(t){return t&&Ae(t.canActivateChild)}(s))o=St(s.canActivateChild(r,t));else{if(!Ae(s))throw new Error("Invalid CanActivateChild guard");o=St(s(r,t))}return o.pipe((0,z.P)())});return(0,_.of)(i).pipe(Oe())}));return(0,_.of)(i).pipe(Oe())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,_.of)(!0);const i=r.map(r=>b(()=>{const i=tn(r,e,n);let s;if(function(t){return t&&Ae(t.canActivate)}(i))s=St(i.canActivate(e,t));else{if(!Ae(i))throw new Error("Invalid CanActivate guard");s=St(i(e,t))}return s.pipe((0,z.P)())}));return(0,_.of)(i).pipe(Oe())}(t,e.route,n))),(0,z.P)(t=>!0!==t,!0))}(r,s,t,e):(0,_.of)(n)),(0,M.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,H.b)(t=>{if(ke(t.guardsResult)){const e=gt(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new nt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),(0,x.h)(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new W(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),fn(t=>{if(t.guards.canActivateChecks.length)return(0,_.of)(t).pipe((0,H.b)(t=>{const e=new rt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,U.w)(t=>{let n=!1;return(0,_.of)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,(0,Z.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return(0,_.of)(t);let s=0;return(0,y.D)(n).pipe((0,G.b)(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,_.of)({});const s={};return(0,y.D)(i).pipe((0,Z.zg)(i=>function(t,e,n,r){const i=tn(t,e,r);return St(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,H.b)(t=>{s[i]=t}))),k(1),(0,Z.zg)(()=>Object.keys(s).length===i.length?(0,_.of)(s):v.E))}(t._resolve,t,e,r).pipe((0,M.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),re(t,n).resolve),null)))}(t.route,e,r,i)),(0,H.b)(()=>s++),k(1),(0,Z.zg)(e=>s===n.length?(0,_.of)(t):v.E))})),(0,H.b)({next:()=>n=!0,complete:()=>{if(!n){const n=new W(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),(0,H.b)(t=>{const e=new it(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),fn(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,M.U)(t=>{const e=function(t,e,n){const r=le(t,e._root,n?n._root:void 0);return new te(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,H.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),(0,M.U)(t=>(new Ee(o,t.targetRouterState,t.currentRouterState,a).activate(s),t))),(0,H.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new W(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new F(i))),(0,B.K)(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=ke(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new W(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new X(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(s){t.reject(s)}}var i;return v.E}));var i,s,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){De(t),this.config=t.map(Fe),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=e,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return pe(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new me(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return wt(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new me(n,e,r)}(n);if(s.toRoot())return pe(e.root,new Ot([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new ye(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new ye(t,t===e.root,0)}const r=de(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new ye(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?be(o.segmentGroup,o.index,s.commands):ve(o.segmentGroup,o.index,s.commands);return pe(o.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=ke(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},Tn):!1===e?Object.assign({},En):e,ke(t))return Ct(this.currentUrlTree,t,n);const r=this.parseUrl(t);return Ct(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Y(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const s=this.getTransition(),o="imperative"!==e&&"imperative"===(null==s?void 0:s.source),a=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===t.toString();if(o&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(i.DyG),i.LFG(Pt),i.LFG(vn),i.LFG(r.Ye),i.LFG(i.zs3),i.LFG(i.v3s),i.LFG(i.Sil),i.LFG(void 0))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})(),xn=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new C.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:kn(this.skipLocationChange),replaceUrl:kn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:kn(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(Cn),i.Y36(ne),i.$8M("tabindex"),i.Y36(i.Qsj),i.Y36(i.SBq))},t.\u0275dir=i.lG2({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&i.NdJ("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[i.TTD]}),t})(),An=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new C.xQ,this.subscription=t.events.subscribe(t=>{t instanceof Y&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:kn(this.skipLocationChange),replaceUrl:kn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:kn(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(Cn),i.Y36(ne),i.Y36(r.S$))},t.\u0275dir=i.lG2({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&i.NdJ("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(i.Ikx("href",e.href,i.LSH),i.uIk("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[i.TTD]}),t})();function kn(t){return""===t||!!t}let In=(()=>{class t{constructor(t,e,n,r,s){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.vpe,this.deactivateEvents=new i.vpe,this.name=r||dt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new On(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(vn),i.Y36(i.s_b),i.Y36(i._Vd),i.$8M("name"),i.Y36(i.sBO))},t.\u0275dir=i.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class On{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===ne?this.route:t===vn?this.childContexts:this.parent.get(t,e)}}class Nn{}class Dn{preload(t,e){return(0,_.of)(null)}}let Pn=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new mn(e,n,e=>t.triggerEvent(new st(e)),e=>t.triggerEvent(new ot(e)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,x.h)(t=>t instanceof Y),(0,G.b)(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(i.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,y.D)(n).pipe((0,K.J)(),(0,M.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,_.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,Z.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(Cn),i.LFG(i.v3s),i.LFG(i.Sil),i.LFG(i.zs3),i.LFG(Nn))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})(),Rn=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof J?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Y&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ht&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new ht(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(Cn),i.LFG(r.EM),i.LFG(void 0))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();const Fn=new i.OlP("ROUTER_CONFIGURATION"),Ln=new i.OlP("ROUTER_FORROOT_GUARD"),Mn=[r.Ye,{provide:Pt,useClass:Rt},{provide:Cn,useFactory:function(t,e,n,r,i,s,o,a={},u,c){const l=new Cn(null,t,e,n,r,i,s,bt(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[Pt,vn,r.Ye,i.zs3,i.v3s,i.Sil,gn,Fn,[class{},new i.FiY],[class{},new i.FiY]]},vn,{provide:ne,useFactory:function(t){return t.routerState.root},deps:[Cn]},{provide:i.v3s,useClass:i.EAV},Pn,Dn,class{preload(t,e){return e().pipe((0,B.K)(()=>(0,_.of)(null)))}},{provide:Fn,useValue:{enableTracing:!1}}];function Un(){return new i.PXZ("Router",Cn)}let Vn=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Mn,Gn(e),{provide:Ln,useFactory:Bn,deps:[[Cn,new i.FiY,new i.tp0]]},{provide:Fn,useValue:n||{}},{provide:r.S$,useFactory:qn,deps:[r.lw,[new i.tBr(r.mr),new i.FiY],Fn]},{provide:Rn,useFactory:jn,deps:[Cn,r.EM,Fn]},{provide:Nn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Dn},{provide:i.PXZ,multi:!0,useFactory:Un},[zn,{provide:i.ip1,multi:!0,useFactory:Zn,deps:[zn]},{provide:$n,useFactory:Hn,deps:[zn]},{provide:i.tb,multi:!0,useExisting:$n}]]}}static forChild(e){return{ngModule:t,providers:[Gn(e)]}}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(Ln,8),i.LFG(Cn,8))},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({}),t})();function jn(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Rn(t,e,n)}function qn(t,e,n={}){return n.useHash?new r.Do(t,e):new r.b0(t,e)}function Bn(t){return"guarded"}function Gn(t){return[{provide:i.deG,multi:!0,useValue:t},{provide:gn,multi:!0,useValue:t}]}let zn=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new C.xQ}appInitializer(){return this.injector.get(r.V_,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Cn),r=this.injector.get(Fn);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,_.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Fn),n=this.injector.get(Pn),r=this.injector.get(Rn),s=this.injector.get(Cn),o=this.injector.get(i.z2F);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||s.initialNavigation(),n.setUpPreloading(),r.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(i.zs3))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();function Zn(t){return t.appInitializer.bind(t)}function Hn(t){return t.bootstrapListener.bind(t)}const $n=new i.OlP("Router Initializer")},1062:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var r,i,s=n(4762),o=n(250),a=n(5119),u=n(308),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new o.LL("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,o.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=d),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var s=i;void 0===s.name&&(s.name=d);var a=s.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,o.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,s,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}s(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.6.5",INTERNAL:{registerComponent:s,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,o.r3)(e,t=t||d))throw l.create("no-app",{appName:t});return e[t]}function s(s){var a=s.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===s.type?r[a]:null;if(n.set(a,s),"PUBLIC"===s.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==s.serviceProps&&(0,o.ZB)(u,s.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,s.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(s);return"PUBLIC"===s.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=(0,s.pi)((0,s.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,o.ZB)(e,t)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,o.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=m;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.24",void 0),t.registerVersion("fire-js","")}(_);const w=_},5119:(t,e,n)=>{"use strict";n.d(e,{wA:()=>s,H0:()=>u});var r=n(4762),i=n(250),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),o="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=o);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n,r=null!==(e=null==t?void 0:t.identifier)&&void 0!==e?e:o,i=null!==(n=null==t?void 0:t.optional)&&void 0!==n&&n,s=this.normalizeInstanceIdentifier(r);if(!this.isInitialized(s)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(i)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=(0,r.CR)(s.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=o),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=o),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,s=t.options,a=void 0===s?{}:s,u=this.normalizeInstanceIdentifier(void 0===i?o:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=(0,r.XA)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=(0,r.CR)(h.value,2),f=d[1];u===this.normalizeInstanceIdentifier(d[0])&&f.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(c,u),c},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var s=(0,r.XA)(this.onInitCallbacks),o=s.next();!o.done;o=s.next()){var a=o.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===o?void 0:e),options:i}),this.instances.set(n,s),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(a){}return s||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:o:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},308:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.d(e,{in:()=>o,Yd:()=>h,Ub:()=>d,Am:()=>f});var s=[],o=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var s=(new Date).toISOString(),o=c[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,r(["["+s+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function d(t){s.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},250:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>b,ZR:()=>v,r3:()=>S,Sg:()=>u,ne:()=>T,p$:()=>s,ZB:()=>o,m9:()=>x,z$:()=>c,jU:()=>d,ru:()=>f,d:()=>g,w1:()=>m,uI:()=>l,UG:()=>h,b$:()=>p,Mn:()=>y});var r=n(4762),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,o||(l=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{s=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==u)throw Error();r.push(s<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function s(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function d(){return"object"==typeof self&&self.self===self}function f(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function g(){return c().indexOf("Electron/")>=0}function m(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return c().indexOf("MSAppHost/")>=0}var v=function(t){function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,b.prototype.create),s}return(0,r.ZT)(e,t),e}(Error),b=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,s=this.errors[t],o=s?_(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",u=new v(i,a,r);return u},t}();function _(t,e){return t.replace(w,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var w=/\{\$([^}]+)}/g;function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function T(t,e){var n=new E(t,e);return n.subscribe.bind(n)}var E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function C(){}function x(t){return t&&t._delegate?t._delegate:t}},1858:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(1062),i="8.6.5";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},8512:(t,e,n)=>{"use strict";n.d(e,{X:()=>s});var r=n(5959),i=n(3895);class s extends r.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.N;return this._value}next(t){super.next(this._value=t)}}},8318:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(6673),i=n(5331),s=n(7498),o=n(6197),a=n(3392),u=n(1484);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:o}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(s.c)}(t,e,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[o.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},7498:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});var r=n(1484),i=n(4294);const s={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},5959:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(8318),i=n(6673),s=n(7570),o=n(3895),a=n(9291),u=n(5331);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new o.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new o.N;return this.hasError?(t.error(this.thrownError),s.w.EMPTY):this.isStopped?(t.complete(),s.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):s.w.EMPTY}}},9291:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(7570);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},6673:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(5024),i=n(7498),s=n(7570),o=n(5331),a=n(1484),u=n(4294);class c extends s.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[o.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,s){let o;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?o=e:e&&(o=e.next,n=e.error,s=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},7570:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(8470),i=n(2056),s=n(5024);const o=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if((0,s.m)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof o?u(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof o?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new o(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof o?e.errors:e),[])}},1484:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},6882:(t,e,n)=>{"use strict";n.d(e,{IY:()=>o,Ds:()=>a,ft:()=>u});var r=n(6673),i=n(8318),s=n(6015);class o extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,s.s)(t)(e)}catch(r){e.error(r)}return n}},2875:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(5959),i=n(8318),s=n(7570),o=n(1564);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.w.EMPTY)),t}refCount(){return(0,o.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},7930:(t,e,n)=>{"use strict";n.d(e,{z:()=>s});var r=n(878),i=n(7471);function s(...t){return(0,i.J)(1)((0,r.of)(...t))}},653:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>s});var r=n(8318);const i=new r.y(t=>t.complete());function s(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},9764:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(8318),i=n(6015),s=n(7570),o=n(6197),a=n(2570),u=n(5686),c=n(5168),l=n(9653);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.L]}(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>{const i=t[o.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},9342:(t,e,n)=>{"use strict";n.d(e,{n:()=>o});var r=n(8318),i=n(625),s=n(2570);function o(t,e){return e?(0,s.r)(t,e):new r.y((0,i.V)(t))}},1906:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(8318),i=n(6163),s=n(7471),o=n(9342);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,s.J)(e)((0,o.n)(t,n))}},878:(t,e,n)=>{"use strict";n.d(e,{of:()=>o});var r=n(6163),i=n(9342),s=n(2570);function o(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,s.r)(t,e)):(0,i.n)(t)}},1225:(t,e,n)=>{"use strict";n.d(e,{_:()=>i});var r=n(8318);function i(t,e){return new r.y(e?n=>e.schedule(s,0,{error:t,subscriber:n}):e=>e.error(t))}function s({error:t,subscriber:e}){e.error(t)}},7727:(t,e,n)=>{"use strict";n.d(e,{K:()=>i});var r=n(6882);function i(t){return function(e){const n=new s(t),r=e.lift(n);return n.caught=r}}class s{constructor(t){this.selector=t}call(t,e){return e.subscribe(new o(t,this.selector,this.caught))}}class o extends r.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const i=new r.IY(this);this.add(i);const s=(0,r.ft)(n,i);s!==i&&this.add(s)}}}},436:(t,e,n)=>{"use strict";n.d(e,{b:()=>i});var r=n(3982);function i(t,e){return(0,r.zg)(t,e,1)}},7701:(t,e,n)=>{"use strict";n.d(e,{b:()=>s});var r=n(6673),i=n(8569);function s(t,e=i.P){return n=>n.lift(new o(t,e))}class o{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new a(t,this.dueTime,this.scheduler))}}class a extends r.L{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(u,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function u(t){t.debouncedNext()}},7768:(t,e,n)=>{"use strict";n.d(e,{d:()=>i});var r=n(6673);function i(t=null){return e=>e.lift(new s(t))}class s{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new o(t,this.defaultValue))}}class o extends r.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},3835:(t,e,n)=>{"use strict";n.d(e,{h:()=>i});var r=n(6673);function i(t,e){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.predicate,this.thisArg))}}class o extends r.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}},3530:(t,e,n)=>{"use strict";n.d(e,{P:()=>c});var r=n(9665),i=n(3835),s=n(611),o=n(7768),a=n(790),u=n(3392);function c(t,e){const n=arguments.length>=2;return c=>c.pipe(t?(0,i.h)((e,n)=>t(e,n,c)):u.y,(0,s.q)(1),n?(0,o.d)(e):(0,a.T)(()=>new r.K))}},9996:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(6673);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}class s{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.project,this.thisArg))}}class o extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},7471:(t,e,n)=>{"use strict";n.d(e,{J:()=>s});var r=n(3982),i=n(3392);function s(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},3982:(t,e,n)=>{"use strict";n.d(e,{zg:()=>o});var r=n(9996),i=n(9764),s=n(6882);function o(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?s=>s.pipe(o((n,s)=>(0,i.D)(t(n,s)).pipe((0,r.U)((t,r)=>e(n,t,s,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends s.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new s.IY(this),n=this.destination;n.add(e);const r=(0,s.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9971:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(6673),i=n(653),s=n(878),o=n(1225);let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,s.of)(this.value);case"E":return(0,o._)(this.error);case"C":return(0,i.c)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1564:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(6673);function i(){return function(t){return t.lift(new s(t))}}class s{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new o(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},2023:(t,e,n)=>{"use strict";n.d(e,{R:()=>i});var r=n(6673);function i(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new s(t,e,n))}}class s{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new o(t,this.accumulator,this.seed,this.hasSeed))}}class o extends r.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},6238:(t,e,n)=>{"use strict";n.d(e,{O:()=>s});var r=n(7930),i=n(6163);function s(...t){const e=t[t.length-1];return(0,i.K)(e)?(t.pop(),n=>(0,r.z)(t,n,e)):e=>(0,r.z)(t,e)}},4187:(t,e,n)=>{"use strict";n.d(e,{R:()=>m});var r=n(8318);let i=1;const s=(()=>Promise.resolve())(),o={};function a(t){return t in o&&(delete o[t],!0)}const u={setImmediate(t){const e=i++;return o[e]=!0,s.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(8277);class l extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n(1098);class d extends h.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n(8470);class g extends r.y{constructor(t,e=0,n=f){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,p.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},4689:(t,e,n)=>{"use strict";n.d(e,{w:()=>o});var r=n(9996),i=n(9764),s=n(6882);function o(t,e){return"function"==typeof e?n=>n.pipe(o((n,s)=>(0,i.D)(t(n,s)).pipe((0,r.U)((t,r)=>e(n,t,s,r))))):e=>e.lift(new a(t))}class a{constructor(t){this.project=t}call(t,e){return e.subscribe(new u(t,this.project))}}class u extends s.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new s.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,s.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}},611:(t,e,n)=>{"use strict";n.d(e,{q:()=>o});var r=n(6673),i=n(8402),s=n(653);function o(t){return e=>0===t?(0,s.c)():e.lift(new a(t))}class a{constructor(t){if(this.total=t,this.total<0)throw new i.W}call(t,e){return e.subscribe(new u(t,this.total))}}class u extends r.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}},6599:(t,e,n)=>{"use strict";n.d(e,{b:()=>o});var r=n(6673);function i(){}var s=n(5024);function o(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,s.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},790:(t,e,n)=>{"use strict";n.d(e,{T:()=>s});var r=n(9665),i=n(6673);function s(t=u){return e=>e.lift(new o(t))}class o{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new a(t,this.errorFactory))}}class a extends i.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function u(){return new r.K}},2570:(t,e,n)=>{"use strict";n.d(e,{r:()=>s});var r=n(8318),i=n(7570);function s(t,e){return new r.y(n=>{const r=new i.w;let s=0;return r.add(e.schedule(function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},8277:(t,e,n)=>{"use strict";n.d(e,{o:()=>s});var r=n(7570);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class s extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},1098:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},8569:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>s});var r=n(8277);const i=new(n(1098).v)(r.o),s=i},8489:(t,e,n)=>{"use strict";n.d(e,{c:()=>u,N:()=>a});var r=n(8277);class i extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var s=n(1098);class o extends s.v{}const a=new o(i),u=a},5686:(t,e,n)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,{hZ:()=>i});const i=r()},6197:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},5331:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},8402:(t,e,n)=>{"use strict";n.d(e,{W:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})()},9665:(t,e,n)=>{"use strict";n.d(e,{K:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})()},3895:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4294:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},3392:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},8470:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},9653:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},5024:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},2056:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},5168:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},6163:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},6015:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(625),i=n(4294),s=n(5686),o=n(6197),a=n(9653),u=n(5168),c=n(2056);const l=t=>{if(t&&"function"==typeof t[o.L])return l=t,t=>{const e=l[o.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[s.hZ])return e=t,t=>{const n=e[s.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},625:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},2145:(t,e,n)=>{"use strict";n.d(e,{n:()=>o});var r=n(1116),i=n(1462),s=n(7368);let o=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[r.ez,i.u5,i.UX]]}),t})()},5680:(t,e,n)=>{"use strict";n.d(e,{M:()=>r});class r{constructor(){this.cursor=this.now,this.week=[],this.setCursor(this.now)}get now(){return new Date(Date.now())}get currentWeek(){return this.setCursor(this.now),this.week}get previousWeek(){return this.setCursor(new Date(this.cursor.getTime()-6048e5)),this.week}get nextWeek(){return this.setCursor(new Date(this.cursor.getTime()+6048e5)),this.week}get month(){return this.now.getMonth()}get currentDay(){return this.now.getDay()}setCursor(t){switch(t.getDay()){case 1:this.cursor=t,this.setWeek();break;case 2:this.setCursor(new Date(t.getTime()-864e5));break;case 3:this.setCursor(new Date(t.getTime()-1728e5));break;case 4:this.setCursor(new Date(t.getTime()-2592e5));break;case 5:this.setCursor(new Date(t.getTime()-3456e5));break;case 6:this.setCursor(new Date(t.getTime()-432e6));break;case 0:this.setCursor(new Date(t.getTime()+864e5))}}setWeek(){this.week=[];for(let t=0;t<6;t++){const e=new Date(this.cursor.getTime()+24*t*3600*1e3);this.week.push(e)}}goto(t){return this.setCursor(new Date(new Date(this.now.getTime()+168*t*3600*1e3))),this.week}}},9985:(t,e,n)=>{"use strict";n.d(e,{I:()=>o});var r=n(6304),i=n(7368),s=n(71);let o=(()=>{class t{constructor(t){this.storage=t}uploadFiles(t){var e=this;return(0,r.Z)(function*(){return new Promise((n,r)=>{t.length>0&&t[0]&&e.uploadFile(t[0]).then(r=>{t[1]?e.uploadFile(t[1]).then(t=>{n([r,t])}):n([r])})})})()}uploadFile(t){var e=this;return(0,r.Z)(function*(){return new Promise((n,r)=>{const i=e.storage.ref(t.filename).put(t.stream,{contentType:t.contentType});i.task.on("state_changed",t=>{console.log("Upload is "+t.bytesTransferred/t.totalBytes*100+"% done")},function(t){console.log("error",t),r()},function(){i.task.snapshot.ref.getDownloadURL().then(t=>{n(t)})})})})()}deleteFileByUrl(t){var e=this;return(0,r.Z)(function*(){try{e.storage.storage.refFromURL(t).delete()}catch(n){alert(n)}})()}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(s.Q1))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},9812:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var r=n(1225),i=n(7727),s=n(7368),o=n(5912),a=n(3971),u=n(9985),c=n(4051);let l=(()=>{class t{constructor(t,e,n,r){this.auth=t,this.db=e,this.blob=n,this.router=r}getSpecialistAppointments(t){return this.db.collection("/appointments",e=>e.where("specialist.uid","==",t).where("isTaken","==",!0).orderBy("date","asc")).valueChanges().pipe((0,i.K)(this.handleError))}handleError(t){let e="";return e=t.error instanceof ErrorEvent?`An error ocurred: ${t.error.message}`:`Server returned code: ${t.status}, error message is: ${t.message}`,(0,r._)(e)}getSpecialities(){return this.db.collection("specialities").valueChanges().pipe((0,i.K)(this.handleError))}getAllUsers(){return this.db.collection("users").valueChanges().pipe((0,i.K)(this.handleError))}getAllSpecialists(){return this.db.collection("users",t=>t.where("claims.roles","array-contains","specialist")).valueChanges().pipe((0,i.K)(this.handleError))}getUserData(t){return this.db.collection("users").doc(t).valueChanges().pipe((0,i.K)(this.handleError))}updateStatus(t,e){return this.db.collection("users").doc(t).update({"claims.isActiveUser":e}).then(t=>{console.log("Usuario activado")},t=>{console.log(t)})}addSpeciality(t){return this.db.collection("specialities").doc(t.name).set(t)}registerSpecialist(t,e){return new Promise((n,r)=>{this.createUserWithEmailAndPassword(t.credentials).then(r=>{t.profile.claims.uid=r.user.uid;const i=this.setFileName(t.profile.claims.uid,e);this.uploadProfilePictures(i).then(e=>{t.profile.claims.photoUrls=e,this.uploadProfile(t.profile),n(r.user.uid)})})})}createUserWithEmailAndPassword(t){return this.auth.createUserWithEmailAndPassword(t.username,t.password)}setFileName(t,e){let n=0;return e.map(e=>{e.filename=`users/${t}_${Date.now()}_${n}.jpeg`,n++}),e}uploadProfilePictures(t){return this.blob.uploadFiles(t)}uploadProfile(t){return this.db.collection("users").doc(t.claims.uid).set(t).then(t=>{console.log(t)},t=>this.handleError(t))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(o.zQ),s.LFG(a.ST),s.LFG(u.I),s.LFG(c.F0))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},6177:(t,e,n)=>{"use strict";n.d(e,{H:()=>u});var r=n(6304),i=n(1225),s=n(7727),o=n(7368),a=n(3971);let u=(()=>{class t{constructor(t){this.db=t}getAll(){return this.db.collection("/appointments",t=>t.where("status","!=","available").orderBy("status","asc").orderBy("date","asc")).valueChanges().pipe((0,s.K)(this.handleError))}updateAppointment(t){var e=this;return(0,r.Z)(function*(){return e.db.collection("appointments").doc(t.uid).update(t).then(t=>{},t=>{e.handleError(t)})})()}getSpecialistAppointments(t){return this.db.collection("/appointments",e=>e.where("specialist.uid","==",t)).valueChanges().pipe((0,s.K)(this.handleError))}getPatientAppointments(t){return this.db.collection("/appointments",e=>e.where("patient.uid","==",t)).valueChanges().pipe((0,s.K)(this.handleError))}delteAppointment(t){return this.db.collection("appointments").doc(t).delete()}addAvailability(t){var e=this;return(0,r.Z)(function*(){return e.db.collection("appointments").add(t).then(t=>{e.db.collection("appointments").doc(t.id).update({uid:t.id})},t=>e.handleError(t)).finally()})()}takeAppointment(t){var e=this;return(0,r.Z)(function*(){return e.db.collection("appointments").doc(t.uid).update(t)})()}handleError(t){let e="";return e=t.error instanceof ErrorEvent?`An error ocurred: ${t.error.message}`:`Server returned code: ${t.status}, error message is: ${t.message}`,(0,i._)(e)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(a.ST))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},3412:(t,e,n)=>{"use strict";n.d(e,{$:()=>l});var r=n(6304),i=n(8512),s=n(1225),o=n(7368),a=n(5912),u=n(3971),c=n(4051);let l=(()=>{class t{constructor(t,e,n){this.auth=t,this.db=e,this.router=n,this.logged=new i.X(this.isLogged()),this.logged$=this.logged.asObservable()}signIn(t){var e=this;return(0,r.Z)(function*(){return new Promise((n,r)=>{e.auth.signInWithEmailAndPassword(t.username,t.password).then(t=>{var i;e.db.collection("users").doc(null===(i=t.user)||void 0===i?void 0:i.uid).valueChanges().subscribe(t=>{if(t.claims.isActiveUser){const r=t.claims;localStorage.setItem("userCredentials",JSON.stringify(r)),e.logged.next(!0),n(r)}else r("El usuario debe ser activado antes de ingresar al sistema por primera vez, para activarlo revise su correo electr\xf3nico o contactes\xe9 con un administrador.")})}).catch(t=>r(t.message))})})()}signOut(){var t=this;return(0,r.Z)(function*(){localStorage.removeItem("userCredentials"),localStorage.clear(),t.logged.next(!1),t.router.navigate(["/home"])})()}isLogged(){return null!==localStorage.getItem("userCredentials")}getCurrentUser(){const t=localStorage.getItem("userCredentials"),e=t?JSON.parse(t):t;return null==e?void 0:e.email}getCurrentUserCredentials(){const t=localStorage.getItem("userCredentials");return t?JSON.parse(t):t}handleError(t){let e="";return e=t.error instanceof ErrorEvent?`An error ocurred: ${t.error.message}`:`Server returned code: ${t.status}, error message is: ${t.message}`,(0,s._)(e)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(a.zQ),o.LFG(u.ST),o.LFG(c.F0))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},6004:(t,e,n)=>{"use strict";n.d(e,{x:()=>s});var r=n(5959),i=n(7368);let s=(()=>{class t{constructor(){this.emitChangeSource=new r.xQ,this.changeEmitted$=this.emitChangeSource.asObservable()}emitChange(t){this.emitChangeSource.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},8918:(t,e,n)=>{"use strict";n.d(e,{f:()=>s});var r=n(5959),i=n(7368);let s=(()=>{class t{constructor(){this.emitChangeSource=new r.xQ,this.changeEmitted$=this.emitChangeSource.asObservable()}emitChange(t){this.emitChangeSource.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},4670:(t,e,n)=>{"use strict";n.d(e,{i:()=>s});var r=n(8512),i=n(7368);let s=(()=>{class t{constructor(){this.emitChangeSource=new r.X(""),this.changeEmitted$=this.emitChangeSource.asObservable()}emitChange(t){this.emitChangeSource.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},2245:(t,e,n)=>{"use strict";var r=n(1116),i=n(7368);class s extends r.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class o extends s{static makeCurrent(){(0,r.HT)(new o)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(u=u||document.querySelector("base"),u?u.getAttribute("href"):null);return null==e?null:function(t){a=a||document.createElement("a"),a.setAttribute("href",t);const e=a.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){u=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return(0,r.Mx)(document.cookie,t)}}let a,u=null;const c=new i.OlP("TRANSITION_ID"),l=[{provide:i.ip1,useFactory:function(t,e,n){return()=>{n.get(i.CZH).donePromise.then(()=>{const n=(0,r.q)();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[c,r.K0,i.zs3],multi:!0}];class h{static init(){(0,i.VLi)(new h)}addToWindow(t){i.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},i.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),i.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),i.dqk.frameworkStabilizers||(i.dqk.frameworkStabilizers=[]),i.dqk.frameworkStabilizers.push(t=>{const e=i.dqk.getAllAngularTestabilities();let n=e.length,r=!1;const s=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(s)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:n?(0,r.q)().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let d=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();const f=new i.OlP("EventManagerPlugins");let p=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(f),i.LFG(i.R0b))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();class g{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const i=(0,r.q)().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,n)}}let m=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})(),y=(()=>{class t extends m{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(v),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(v))}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(r.K0))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();function v(t){(0,r.q)().remove(t)}const b={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},_=/%COMP%/g;function w(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?w(t,i,n):(i=i.replace(_,t),n.push(i))}return n}function S(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let T=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new E(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case i.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new C(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case i.ifc.ShadowDom:return new x(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=w(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(p),i.LFG(y),i.LFG(i.AFp))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();class E{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(b[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=b[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=b[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(i.JOm.DashCase|i.JOm.Important)?t.style.setProperty(e,n,r&i.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&i.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,S(n)):this.eventManager.addEventListener(t,e,S(n))}}class C extends E{constructor(t,e,n,r){super(t),this.component=n;const i=w(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(_,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(_,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class x extends E{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=w(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let A=(()=>{class t extends g{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(r.K0))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();const k=["alt","control","meta","shift"],I={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},O={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},N={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let D=(()=>{class t extends g{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,i){const s=t.parseEventName(n),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,r.q)().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(k.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&O.hasOwnProperty(e)&&(e=O[e]))}return I[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),k.forEach(r=>{r!=n&&(0,N[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(r.K0))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();const P=(0,i.eFA)(i._c5,"browser",[{provide:i.Lbi,useValue:r.bD},{provide:i.g9A,useValue:function(){o.makeCurrent(),h.init()},multi:!0},{provide:r.K0,useFactory:function(){return(0,i.RDi)(document),document},deps:[]}]),R=[[],{provide:i.zSh,useValue:"root"},{provide:i.qLn,useFactory:function(){return new i.qLn},deps:[]},{provide:f,useClass:A,multi:!0,deps:[r.K0,i.R0b,i.Lbi]},{provide:f,useClass:D,multi:!0,deps:[r.K0]},[],{provide:T,useClass:T,deps:[p,y,i.AFp]},{provide:i.FYo,useExisting:T},{provide:m,useExisting:y},{provide:y,useClass:y,deps:[r.K0]},{provide:i.dDg,useClass:i.dDg,deps:[i.R0b]},{provide:p,useClass:p,deps:[f,i.R0b]},{provide:r.JF,useClass:d,deps:[]},[]];let F=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:i.AFp,useValue:e.appId},{provide:c,useExisting:i.AFp},l]}}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(t,12))},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({providers:R,imports:[r.ez,i.hGG]}),t})();"undefined"!=typeof window&&window;var L=n(2346);const M={production:!0,apiKey:"AIzaSyDMVS3jM_ex6JQplA6BiK-NRUf0LmqA2hw",authDomain:"clinica-online-test.firebaseapp.com",projectId:"clinica-online-test",storageBucket:"clinica-online-test.appspot.com",messagingSenderId:"1009400765364",appId:"1:1009400765364:web:603d199993c53481f270e1",measurementId:"G-EYQ1T93G7J"};var U=n(4051),V=n(9812),j=n(1225),q=n(7727),B=n(3971);let G=(()=>{class t{constructor(t){this.firestore=t}getSpecialities(){return this.firestore.collection("specialities").valueChanges().pipe((0,q.K)(this.handleError))}handleError(t){let e="";return e=t.error instanceof ErrorEvent?`An error ocurred: ${t.error.message}`:`Server returned code: ${t.status}, error message is: ${t.message}`,(0,j._)(e)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(B.ST))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var z=n(5680),Z=n(6177),H=n(3412);let $=(()=>{class t{constructor(){this.days=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado","Domingo"],this.months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],this.response=new i.vpe}ngOnInit(){}confirm(t){this.response.emit({succeed:!0,data:"ok"})}reject(){this.response.emit({succeed:!1,data:"cancel"})}toDateString(t){return`${this.days[t.getDay()]} ${t.getDate()} de ${this.months[t.getMonth()]} del ${t.getFullYear()} a las ${t.toTimeString()}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-appointment-modal"]],inputs:{item:"item"},outputs:{response:"response"},decls:16,vars:4,consts:[["id","modal","tabindex","-1","role","dialog",1,"modal","fade","show",2,"display","block"],["role","document",1,"modal-dialog",2,"top","100px"],[1,"modal-content"],[1,"modal-header",2,"background-color","rgb(237, 237, 237)","color","rgb(89, 88, 88)"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.TgZ(3,"div",3),i.TgZ(4,"h5",4),i._uU(5,"Confirmaci\xf3n de turno"),i.qZA(),i.TgZ(6,"button",5),i.NdJ("click",function(){return e.reject()}),i.TgZ(7,"span"),i._uU(8,"\xd7"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(9,"div",6),i._uU(10),i.qZA(),i.TgZ(11,"div",7),i.TgZ(12,"button",8),i.NdJ("click",function(t){return e.confirm(t)}),i._uU(13,"Confirmar"),i.qZA(),i.TgZ(14,"button",9),i.NdJ("click",function(){return e.reject()}),i._uU(15,"Deshacer"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.xp6(10),i.HOy(" \xbfAcepta el turno para ",e.item.specialist.firstname," ",e.item.specialist.lastname," especialista en ",e.item.speciality," el d\xeda ",e.toDateString(e.item.date),"? "))},styles:["","#modal[_ngcontent-%COMP%] {\n        background-color: rgba(30, 30, 30, .5);\n    }"]}),t})();function K(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"div",13),i.NdJ("click",function(){const e=i.CHM(t).$implicit;return i.oxw(2).onSelection(e)}),i._uU(1),i.ALo(2,"date"),i.qZA()}if(2&t){const t=e.$implicit,n=i.oxw(2);i.MGl("id","pill_",t.date.getTime(),""),i.Q6J("ngClass",n.getClass(t)),i.xp6(1),i.hij(" ",i.xi3(2,3,t.date.getTime(),"shortTime")," ")}}const Q=function(t){return{"current-day":t}};function J(t,e){if(1&t&&(i.TgZ(0,"div",9),i.TgZ(1,"div",10),i._uU(2),i.TgZ(3,"span"),i._uU(4),i.qZA(),i.qZA(),i.TgZ(5,"div",11),i.YNc(6,K,3,6,"div",12),i.qZA(),i.qZA()),2&t){const t=e.$implicit,n=i.oxw();i.Q6J("ngClass",i.VKq(4,Q,n.isCurrentDay(t))),i.xp6(2),i.hij(" ",n.getDay(t),""),i.xp6(2),i.Oqu(n.getDate(t)),i.xp6(2),i.Q6J("ngForOf",t)}}function Y(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"app-appointment-modal",14),i.NdJ("response",function(e){return i.CHM(t),i.oxw().onModalResponse(e)}),i.qZA()}if(2&t){const t=i.oxw();i.Q6J("item",t.selectedAppointment)}}let W=(()=>{class t{constructor(t,e,n){this.ap=t,this.auth=e,this.router=n,this.months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],this.days=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],this.hours=["08:00hs","09:00hs","10:00hs","11:00hs","12:00hs","13:00hs","14:00hs","15:00hs","16:00hs","17:00hs","18:00hs","19:00hs"],this.week=[],this.datePicker=new z.M,this.appointments=new Array,this.pageNumber=0,this.dbAppointments=[],this.speciality="",this.showModal=!1}get page(){return this.pageNumber}ngOnInit(){this.currentUser=this.auth.getCurrentUserCredentials(),this.ap.getSpecialistAppointments(this.selectedSpecialist.uid).subscribe({next:t=>{t.map(t=>t.date=new Date(1e3*t.date.seconds)),this.dbAppointments=t,this.week=this.datePicker.goto(this.page),this.merge(t,this.week)},error:t=>console.log(t)})}merge(t,e){e.map((n,r,i)=>{this.appointments[r]=[],this.hours.map((i,s,o)=>{n.setHours(s+8,0,0);let a=t.filter(t=>t.date.toUTCString()===n.toUTCString())[0];if(a)this.appointments[r][s]=a;else{let t=new Date(e[r]);t.setHours(s+8,0,0),this.appointments[r][s]={uid:"",date:t,isActive:!0,isTaken:!1,patient:null,specialist:null,isCancelled:!1,status:"",speciality:"",review:null,diagnosis:"",survey:null}}})})}nextWeek(){this.pageNumber++,this.week=this.datePicker.goto(this.page),this.merge(this.dbAppointments,this.week)}previousWeek(){this.week[0]>this.datePicker.currentWeek[0]&&(this.pageNumber--,this.week=this.datePicker.goto(this.page),this.merge(this.dbAppointments,this.week))}getDay(t){return this.days[t[0].date.getDay()]}getHours(t){let e=[];for(let n=8;n<20;n++){let r=new Date(t);r.setHours(n,0,0),e.push(r)}return e}getDate(t){return t[0].date.getDate()}getMonth(){var t;return this.months[null===(t=this.week[0])||void 0===t?void 0:t.getMonth()]}getClass(t){let e=[];if(new Date(Date.now()),t.isTaken&&t.patient!==this.currentUser&&e.push("not-available"),"available"===t.status&&e.push("available"),t.speciality!==this.speciality&&e.push("not-available"),6===t.date.getDay()){let n=new Date(t.date);n.setHours(14,0,0),t.date>n&&e.push("not-available")}return e.join(" ")}isCurrentDay(t){const e=new Date(Date.now());return t[0].date.toDateString()==e.toDateString()}onSelection(t){var e;const n=null===(e=document.getElementById(`pill_${t.date.getTime()}`))||void 0===e?void 0:e.classList;(null==n?void 0:n.contains("available"))&&!t.isTaken&&(t.status="taken",t.isTaken=!0,t.patient=this.currentUser,this.selectedAppointment=t,this.showModal=!0)}getFullDateString(t,e){return t.setHours(e,0,0),`${t.toLocaleDateString()} ${t.toLocaleTimeString()}`}onModalResponse(t){this.showModal=!1,"ok"===t.data&&(this.selectedAppointment.patient=this.currentUser,this.ap.takeAppointment(this.selectedAppointment),this.router.navigate(["patient/appointments"]))}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(Z.H),i.Y36(H.$),i.Y36(U.F0))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-appointment-selector"]],inputs:{selectedSpecialist:"selectedSpecialist",speciality:"speciality"},decls:10,vars:3,consts:[["id","header",1,"borders"],[1,"title"],["id","btn_previous",1,"borders",3,"click"],[1,"fas","fa-caret-left"],["id","date-picker",1,"borders"],["id","row",3,"ngClass",4,"ngFor","ngForOf"],["id","btn_next",3,"click"],[1,"fas","fa-caret-right"],[3,"item","response",4,"ngIf"],["id","row",3,"ngClass"],["id","day",1,"center-align"],["id","pill-container"],["class","pill",3,"id","ngClass","click",4,"ngFor","ngForOf"],[1,"pill",3,"id","ngClass","click"],[3,"item","response"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"span",1),i._uU(2),i.qZA(),i.qZA(),i.TgZ(3,"div",2),i.NdJ("click",function(){return e.previousWeek()}),i._UZ(4,"i",3),i.qZA(),i.TgZ(5,"div",4),i.YNc(6,J,7,6,"div",5),i.qZA(),i.TgZ(7,"div",6),i.NdJ("click",function(){return e.nextWeek()}),i._UZ(8,"i",7),i.qZA(),i.YNc(9,Y,1,1,"app-appointment-modal",8)),2&t&&(i.xp6(2),i.Oqu(e.getMonth()),i.xp6(4),i.Q6J("ngForOf",e.appointments),i.xp6(3),i.Q6J("ngIf",e.showModal))},directives:[r.sg,r.O5,r.mk,$],pipes:[r.uU],styles:["","[_nghost-%COMP%] {\n        display: grid;\n        grid-template-columns: 1px 20px 1px auto 1px 20px 1px;\n        grid-template-rows: 1px auto 1px auto 1px;\n        border: 1px solid grey;\n        border-radius: 5px;\n    }\n\n    .borders[_ngcontent-%COMP%] {\n        border: 1px solid grey;\n        border-radius: 5px;\n    }\n\n    #header[_ngcontent-%COMP%] {\n        grid-column: 2 / span 5;\n        grid-row: 2;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n\n    .title[_ngcontent-%COMP%] {\n        font-weight: 300;\n        font-size: larger;\n        line-height: 1.2;\n        margin-top: auto;\n        margin-bottom: auto;\n    }\n\n    #btn_previous[_ngcontent-%COMP%] {\n        grid-column: 2;\n        grid-row: 4;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        border: 1px solid grey;\n        border-radius: 5px;\n    }\n\n    #btn_next[_ngcontent-%COMP%] {\n        grid-column: 6;\n        grid-row: 4;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        border: 1px solid grey;\n        border-radius: 5px;\n    }\n\n    #date-picker[_ngcontent-%COMP%] {\n        grid-column: 4;\n        grid-row: 4;\n        display: flex;\n        flex-direction: column;\n    }\n\n    #row[_ngcontent-%COMP%] {\n        display: flex;\n        flex-direction: row;\n        margin-bottom: 5px;\n        margin-top: 5px;\n    }\n\n    #pill-container[_ngcontent-%COMP%] {\n        display: inline-flex;\n        flex-direction: row;\n        justify-content: space-around;\n        align-items: center;\n        width: 100%;\n        width:100%; \n        justify-content: space-evenly;\n    }\n\n    .pill-disabled[_ngcontent-%COMP%] {\n        background-color: grey;\n        color: #f5f5f5;\n    }\n\n    .pill[_ngcontent-%COMP%]:hover {\n        transform: translate(-1px, -1px);\n        box-shadow: 2px 2px rgba(30, 30, 30, 0.2);\n    }\n\n    .current-day[_ngcontent-%COMP%] {\n        background-color: rgba(111, 190, 208, 0.2);\n        border-radius: 5px;\n    }\n\n    .pill-enabled[_ngcontent-%COMP%] {\n        background-color: #9acd32;\n    }\n\n    #day[_ngcontent-%COMP%] {\n        width: 115px;\n        justify-content: space-between;\n        padding: 0 5px 0 5px;\n    }\n\n    .pill[_ngcontent-%COMP%] {\n        display: inline-flex;\n        justify-content: center;\n        align-items: center;\n        font-size: x-small;\n        padding: 1px;\n        width: 48px;\n        border: 1px solid #1e1e1e;\n        border-radius: 5px;\n    }\n\n\n    .expired[_ngcontent-%COMP%] {\n        background-color: grey;\n    }\n\n    .available[_ngcontent-%COMP%] {\n        background-color: #9acd32;\n    }\n\n    .taken[_ngcontent-%COMP%] {\n        background-color: red;\n    }\n\n    .not-available[_ngcontent-%COMP%] {\n        visibility: hidden;\n    }"]}),t})();function X(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"div",7),i.TgZ(1,"div",8),i.TgZ(2,"div",9),i.TgZ(3,"div",10),i._UZ(4,"img",11),i.qZA(),i.TgZ(5,"div",12),i.TgZ(6,"h4",13),i._uU(7),i.qZA(),i.TgZ(8,"span"),i._uU(9,"Especializaciones: "),i.qZA(),i.TgZ(10,"p"),i._uU(11),i.qZA(),i.TgZ(12,"div",14),i.TgZ(13,"button",15),i._uU(14,"Contactar"),i.qZA(),i.TgZ(15,"button",16),i.NdJ("click",function(){const e=i.CHM(t).$implicit;return i.oxw(2).switchMode("specialities",e)}),i._uU(16,"Turnos"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&t){const t=e.$implicit,n=i.oxw(2);i.xp6(4),i.Q6J("src",t.claims.photoUrls[0],i.LSH),i.xp6(3),i.AsE("",t.claims.firstname," ",t.claims.lastname,""),i.xp6(4),i.Oqu(n.getSpecialitiesNames(t.claims.roles).join(" - "))}}function tt(t,e){if(1&t&&(i.TgZ(0,"div",3),i._UZ(1,"input",4),i.TgZ(2,"div",5),i.YNc(3,X,17,4,"div",6),i.qZA(),i.qZA()),2&t){const t=i.oxw();i.xp6(3),i.Q6J("ngForOf",t.specialists)}}function et(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"div",20),i.NdJ("click",function(){const e=i.CHM(t).$implicit;return i.oxw(2).selectSpeciality(e)}),i.TgZ(1,"div",8),i.TgZ(2,"div",9),i.TgZ(3,"div",10),i._UZ(4,"img",11),i.qZA(),i.TgZ(5,"div",12),i.TgZ(6,"h4",13),i._uU(7),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&t){const t=e.$implicit;i.xp6(4),i.Q6J("src",t.imageUrl,i.LSH),i.xp6(3),i.Oqu(t.name)}}function nt(t,e){if(1&t&&(i.TgZ(0,"div",3),i._UZ(1,"input",17),i.TgZ(2,"div",18),i.YNc(3,et,8,2,"div",19),i.qZA(),i.qZA()),2&t){const t=i.oxw();i.xp6(3),i.Q6J("ngForOf",t.getSpecialities(t.selectedSpecialist.claims.roles))}}function rt(t,e){if(1&t&&(i.TgZ(0,"div",3),i.TgZ(1,"div",21),i.TgZ(2,"div",22),i.TgZ(3,"div",23),i.TgZ(4,"div",24),i.TgZ(5,"div",25),i.TgZ(6,"div",26),i.TgZ(7,"div",27),i._UZ(8,"img",28),i.TgZ(9,"div",29),i.TgZ(10,"h4"),i._uU(11),i.qZA(),i.TgZ(12,"p",30),i._uU(13),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(14,"div",31),i.TgZ(15,"div",32),i.TgZ(16,"div",26),i.TgZ(17,"div",33),i.TgZ(18,"div",34),i.TgZ(19,"h6",35),i._uU(20,"Nombre"),i.qZA(),i.qZA(),i.TgZ(21,"div",36),i._uU(22),i.qZA(),i.qZA(),i._UZ(23,"hr"),i.TgZ(24,"div",33),i.TgZ(25,"div",34),i.TgZ(26,"h6",35),i._uU(27,"Email"),i.qZA(),i.qZA(),i.TgZ(28,"div",36),i._uU(29),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(30,"div",37),i.TgZ(31,"div",33),i.TgZ(32,"div",38),i.TgZ(33,"h3",39),i._uU(34,"Disponibilidad Horaria"),i.qZA(),i.qZA(),i.qZA(),i._UZ(35,"app-appointment-selector",40),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&t){const t=i.oxw();i.xp6(8),i.s9C("src",t.selectedSpecialist.claims.photoUrls[0],i.LSH),i.xp6(3),i.AsE("",t.selectedSpecialist.claims.firstname," ",t.selectedSpecialist.claims.lastname,""),i.xp6(2),i.hij("Especialista en ",t.selectedSpeciality.name,""),i.xp6(9),i.AsE(" ",t.selectedSpecialist.claims.firstname," ",t.selectedSpecialist.claims.lastname," "),i.xp6(7),i.hij(" ",t.selectedSpecialist.claims.username," "),i.xp6(6),i.Q6J("selectedSpecialist",t.selectedSpecialist.claims)("speciality",t.selectedSpeciality.name)}}function it(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"button",41),i.NdJ("click",function(){i.CHM(t);const e=i.oxw();return e.goBack(e.mode)}),i._uU(1,"Volver"),i.qZA()}}let st=(()=>{class t{constructor(t,e,n){this.sp=t,this.ss=e,this.elRef=n,this.enabled=!1,this.specialists=[],this.selectedSpecialist=this.specialists[0],this.specialities=[],this.selectedSpeciality=this.specialities[0],this.mode="specialist",this.speciality=""}ngOnInit(){this.sp.getAllSpecialists().subscribe({next:t=>{this.specialists=t}}),this.ss.getSpecialities().subscribe({next:t=>{this.specialities=t}})}getSpecialities(t){let e=[];return t.map(t=>{let n=this.specialities.filter(e=>e.name===t)[0];n&&e.push({imageUrl:n.imageUrl,name:n.name,isActive:n.isActive})}),e}getSpecialitiesNames(t){return t.filter(t=>"admin"!==t&&"user"!==t&&"specialist"!==t&&"patient"!==t)}switchMode(t,e){this.mode=t,this.selectedSpecialist=e}goBack(t){switch(t){case"specialities":this.mode="specialist";break;case"appointment":this.mode="specialities"}}selectSpeciality(t){this.selectedSpeciality=t,this.mode="appointment"}getUserSpecialities(){}enableScheduler(){this.enabled=!0}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(V.Z),i.Y36(G),i.Y36(i.SBq))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-appointment-request"]],decls:5,vars:4,consts:[["id","container"],["id","specialist-list",4,"ngIf"],["class","btn btn-outline-info","style","position:absolute; float:left; bottom:30px; left:30px;",3,"click",4,"ngIf"],["id","specialist-list"],["id","filter","type","text","placeholder","Busc\xe1 a tus especialistas aqu\xed.",1,"display-3","mt-4"],["id","specialist-card",1,"mt-5"],["class","justify-content-center","style","margin: 10px;",4,"ngFor","ngForOf"],[1,"justify-content-center",2,"margin","10px"],[1,"card","p-3"],[1,"d-flex","align-items-center"],[1,"image"],["height","100",1,"rounded",3,"src"],[1,"ml-3","w-100"],[1,"mb-0","mt-0"],[1,"button","mt-2","d-flex","flex-row","align-items-center"],[1,"btn","btn-sm","btn-outline-primary","w-100"],[1,"btn","btn-sm","btn-primary","w-100","ml-2",3,"click"],["type","text","name","","id","filter","placeholder","Busc\xe1 el tipo de atenci\xf3n aqu\xed.",1,"display-3","mt-4"],[1,"mt-5",2,"display","flex","flex-wrap","wrap","justify-content","space-evenly","align-items","center"],["class","justify-content-center","style","margin: 10px;",3,"click",4,"ngFor","ngForOf"],[1,"justify-content-center",2,"margin","10px",3,"click"],["id","container",1,"container"],[1,"main-body",2,"padding-top","30px","margin","0 auto 0 auto"],[1,"row","gutters-sm"],[1,"col-md-4","mb-3"],[1,"card"],[1,"card-body"],[1,"d-flex","flex-column","align-items-center","text-center"],["alt","Admin","width","150",1,"rounded-circle",3,"src"],[1,"mt-3"],[1,"text-secondary","mb-1"],[1,"col-md-8"],[1,"card","mb-3"],[1,"row"],[1,"col-sm-3"],[1,"mb-0"],[1,"col-sm-9","text-secondary"],["id","week-scheduler",1,"card",2,"padding","15px"],[1,"col-md-6"],[1,"title"],[3,"selectedSpecialist","speciality"],[1,"btn","btn-outline-info",2,"position","absolute","float","left","bottom","30px","left","30px",3,"click"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.YNc(1,tt,4,1,"div",1),i.YNc(2,nt,4,1,"div",1),i.YNc(3,rt,36,9,"div",1),i.YNc(4,it,2,0,"button",2),i.qZA()),2&t&&(i.xp6(1),i.Q6J("ngIf","specialist"===e.mode),i.xp6(1),i.Q6J("ngIf","specialities"===e.mode),i.xp6(1),i.Q6J("ngIf","appointment"===e.mode),i.xp6(1),i.Q6J("ngIf","specialist"!==e.mode))},directives:[r.O5,r.sg,W],styles:["","[_nghost-%COMP%] {\n        display: block;\n        height: 100%;\n        \n    }\n\n    #container[_ngcontent-%COMP%] {\n        display: flex;\n        \n        height: 100%;\n        width: 956px;\n        margin: auto;\n    }\n\n    #fiter[_ngcontent-%COMP%] {\n        display: block;\n        width: 100%;\n        \n        margin-bottom: 0;\n        line-height: 1.5;\n        color: white;\n        background-color: transparent !important;\n        border: solid transparent;\n        border-width: 1px 0;\n        padding-right: 1rem;\n        padding-left: auto;\n    }\n\n    input[_ngcontent-%COMP%] {\n        text-align: center;\n        background-color: transparent !important;\n        border: solid transparent;\n        color: grey;\n        width: 85%;\n        border-bottom: 1px solid transparent;\n    }\n\n    input[_ngcontent-%COMP%]:hover {\n        outline: none;\n        border-bottom: 1px solid rgba(128, 128, 128, .3);\n    }\n\n    input[_ngcontent-%COMP%]:focus {\n        outline: none;\n    }\n\n    [_ngcontent-%COMP%]::-webkit-input-placeholder {\n        text-align: center;\n    }\n\n    [_ngcontent-%COMP%]:-moz-placeholder {\n        text-align: center;\n    }\n\n    #specialist-list[_ngcontent-%COMP%] {\n        \n        display: flex;\n        flex-direction: column;\n        justify-content: flex-start;\n        align-items: center;\n        flex-wrap: wrap;\n        height: 100%;\n        width: 100%;\n    }\n\n    #specialist-card[_ngcontent-%COMP%] {\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: space-evenly;\n        align-items: center;\n    }"]}),t})();var ot=n(4670);let at=(()=>{class t{constructor(t,e){this.routeName=t,this.router=e}ngOnInit(){}redirect(t){switch(t){case"specialist":this.router.navigate(["specialist/enrollment"]);break;case"patient":this.router.navigate(["patient/enrollment"])}}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(ot.i),i.Y36(U.F0))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-enrollment"]],decls:10,vars:0,consts:[[1,"frame",2,"width","18rem",3,"click"],["src","./../../../assets/patient-logo.jpg","alt","Card image cap",1,"card-img-top","img-thumbnail"],[1,"card-body"],[1,"card-title"],["src","./../../../assets/doctor-logo.jpg","alt","Card image cap",1,"card-img-top","img-thumbnail"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.NdJ("click",function(){return e.redirect("patient")}),i._UZ(1,"img",1),i.TgZ(2,"div",2),i.TgZ(3,"h5",3),i._uU(4,"Alta Pacientes"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(5,"div",0),i.NdJ("click",function(){return e.redirect("specialist")}),i._UZ(6,"img",4),i.TgZ(7,"div",2),i.TgZ(8,"h5",3),i._uU(9,"Alta Especialistas"),i.qZA(),i.qZA(),i.qZA())},styles:["","[_nghost-%COMP%] {\n        align-items: center;\n        justify-content: space-around;\n        width: 800px;\n        margin: auto;\n        display: flex;\n        height: 100%;\n    }\n\n    .frame[_ngcontent-%COMP%]:hover {\n        background-color: whitesmoke;\n    }"]}),t})(),ut=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-home"]],decls:12,vars:0,consts:[["id","container-1",1,"card"],["src","./../../../assets/self-service.png","alt","",2,"width","300px","height","185px","margin","auto"],[2,"margin","0 60px 0 60px"],["routerLink","/appointments",1,"btn","btn-primary"],["id","container-2",1,"card"],["src","./../../../assets/self-service-2.png","alt","",2,"width","200px","height","185px","margin","auto"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i._UZ(1,"img",1),i.TgZ(2,"p",2),i._uU(3,"Reserva tu turno... Lorem ipsum dolor sit amet consectetur adipisicing elit. "),i.qZA(),i.TgZ(4,"a",3),i._uU(5,"Solicitar turno"),i.qZA(),i.qZA(),i.TgZ(6,"div",4),i._UZ(7,"img",5),i.TgZ(8,"p",2),i._uU(9,"Reserva tu turno... Lorem ipsum dolor sit amet consectetur adipisicing elit. "),i.qZA(),i.TgZ(10,"a",3),i._uU(11,"Especialidades"),i.qZA(),i.qZA())},directives:[U.yS],styles:["",'[_nghost-%COMP%] {\n        display: block;\n        height: 100%;\n\n        background: url("./../../../assets/home.jpg");\n        background-color: rgb(44, 44, 44);\n        background-repeat: no-repeat;\n        background-position-x: center;\n\n        display: grid;\n            grid-template-columns: auto 15px 455px 15px 455px 15px auto;\n            grid-template-rows: 375px 360px auto;\n    }\n\n    .card[_ngcontent-%COMP%] {\n            display: flex;\n            width: 100%;\n            height: 100%;\n            border: 1px solid whitesmoke;\n            border-radius: 30px;\n            background-color: rgba(245, 245, 245, .9);\n        }\n\n        .card[_ngcontent-%COMP%] > a[_ngcontent-%COMP%] {\n            margin: auto;\n            width: 300px;\n        }\n\n    #container-1[_ngcontent-%COMP%] {\n        grid-column: 3;\n        grid-row: 2;\n    }\n\n\n    #container-2[_ngcontent-%COMP%] {\n        grid-column: 5;\n        grid-row: 2;\n    }\n\n    @media screen and (max-width: 960px) {\n        [_nghost-%COMP%] {\n            display: block;\n            height: 100%;\n\n            background: url("./../../../assets/home.jpg");\n            background-color: rgb(44, 44, 44);\n            background-repeat: no-repeat;\n            background-size: 200%;\n            background-position-x: -210px;\n\n            display: grid;\n            grid-template-columns: auto 15px 455px 15px 455px 15px auto;\n            grid-template-rows: 375px 360px auto;\n        }\n    }']}),t})();var ct=n(5959),lt=n(1462),ht=n(8318),dt=n(6004);let ft=(()=>{class t{constructor(t,e,n,r){this.router=t,this.auth=e,this.fb=n,this._loading=r,this.autoCompletarDatos=new i.vpe,this.autoCompletar=!1}ngOnInit(){this.form=this.initForm(),this.mode&&this.mode instanceof ht.y&&this.mode.subscribe(t=>{this.auto(t)})}initForm(){return this.fb.group({username:["",[lt.kI.required]],password:["",[lt.kI.required]]})}switch(){this.autoCompletar=!this.autoCompletar,this.autoCompletar||this.form.reset(),this.autoCompletarDatos.emit(this.autoCompletar)}signin(){this._loading.emitChange(!0),localStorage.removeItem("user");const t={username:this.form.get("username").value,password:this.form.get("password").value};this.auth.signIn(t).then(t=>{this.router.navigate(["home"])},t=>{alert(t),this.form.reset()}).finally(()=>{this._loading.emitChange(!1)})}auto(t){var e,n,r,i,s,o,a,u,c,l;switch(t){case"admin":null===(e=this.form.get("username"))||void 0===e||e.patchValue("admin@user.com"),null===(n=this.form.get("password"))||void 0===n||n.patchValue("123456Q!");break;case"patient-1":null===(r=this.form.get("username"))||void 0===r||r.patchValue("fernanda.fernandez@user.com"),null===(i=this.form.get("password"))||void 0===i||i.patchValue("123456Q!");break;case"patient-2":null===(s=this.form.get("username"))||void 0===s||s.patchValue("gonzalo.gonzalez@user.com"),null===(o=this.form.get("password"))||void 0===o||o.patchValue("123456Q!");break;case"specialist-1":null===(a=this.form.get("username"))||void 0===a||a.patchValue("hernando.hernandez@user.com"),null===(u=this.form.get("password"))||void 0===u||u.patchValue("123456Q!");break;case"specialist-2":null===(c=this.form.get("username"))||void 0===c||c.patchValue("gimena.gimenez@user.com"),null===(l=this.form.get("password"))||void 0===l||l.patchValue("123456Q!")}}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(U.F0),i.Y36(H.$),i.Y36(lt.qu),i.Y36(dt.x))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-signin-form"]],inputs:{mode:"mode"},outputs:{autoCompletarDatos:"autoCompletarDatos"},decls:23,vars:1,consts:[["id","frm_signin","action","",3,"formGroup"],["src","./../../../../assets/logo2.png","alt","",2,"height","100px","justify-self","center","margin-bottom","20px"],[1,"card-title",2,"margin-bottom","15px"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"fas","fa-user"],["type","text","placeholder","Usuario","aria-label","Username","formControlName","username",1,"form-control"],[1,"fas","fa-key"],["type","password","placeholder","Clave","aria-label","Password","formControlName","password",1,"form-control"],[1,"form-check",2,"display","flex","align-items","center","margin-bottom","20px"],["type","checkbox","id","exampleCheck1",1,"form-check-input",3,"change"],["for","exampleCheck1",1,"form-check-label"],[1,"row"],["type","submit","value","Ingresar",1,"btn","btn-danger","col-sm-5",2,"margin","0 5px 20px 5px",3,"click"],["routerLink","/enrollment"]],template:function(t,e){1&t&&(i.TgZ(0,"form",0),i._UZ(1,"img",1),i.TgZ(2,"h5",2),i._uU(3,"Acceda a su cuenta"),i.qZA(),i.TgZ(4,"div",3),i.TgZ(5,"span",4),i._UZ(6,"i",5),i.qZA(),i._UZ(7,"input",6),i.qZA(),i.TgZ(8,"div",3),i.TgZ(9,"span",4),i._UZ(10,"i",7),i.qZA(),i._UZ(11,"input",8),i.qZA(),i.TgZ(12,"div",9),i.TgZ(13,"input",10),i.NdJ("change",function(){return e.switch()}),i.qZA(),i.TgZ(14,"label",11),i._uU(15,"Auto completar datos"),i.qZA(),i.qZA(),i.TgZ(16,"div",12),i.TgZ(17,"input",13),i.NdJ("click",function(){return e.signin()}),i.qZA(),i.qZA(),i.TgZ(18,"p"),i._uU(19,"\xbfNo est\xe1s registrado? "),i.TgZ(20,"a",14),i._uU(21,"Ingresa aqu\xed"),i.qZA(),i._uU(22,"."),i.qZA(),i.qZA()),2&t&&i.Q6J("formGroup",e.form)},directives:[lt._Y,lt.JL,lt.sg,lt.Fj,lt.JJ,lt.u,U.yS],styles:["","[_nghost-%COMP%] {\n        \n        margin: auto;\n        padding: 2px;\n        width: 100%;\n        height: 100%;\n    }\n\n    #frm_signin[_ngcontent-%COMP%] {\n        \n        width: 100%;\n        height: 100%;\n        padding: 50px;\n    }\n    #user-selector[_ngcontent-%COMP%] {\n        grid-column: 1 / span 3;\n        grid-row: 1;\n    }"]}),t})();function pt(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"div",2),i.TgZ(1,"div",3),i.NdJ("click",function(){return i.CHM(t),i.oxw().user("patient-1")}),i._UZ(2,"img",4),i.TgZ(3,"div",5),i.TgZ(4,"h5",6),i._uU(5,"Paciente 1"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(6,"div",3),i.NdJ("click",function(){return i.CHM(t),i.oxw().user("patient-2")}),i._UZ(7,"img",7),i.TgZ(8,"div",5),i.TgZ(9,"h5",6),i._uU(10,"Paciente 2"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(11,"div",3),i.NdJ("click",function(){return i.CHM(t),i.oxw().user("specialist-1")}),i._UZ(12,"img",8),i.TgZ(13,"div",5),i.TgZ(14,"h5",6),i._uU(15,"Especialista 1"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(16,"div",3),i.NdJ("click",function(){return i.CHM(t),i.oxw().user("specialist-2")}),i._UZ(17,"img",9),i.TgZ(18,"div",5),i.TgZ(19,"h5",6),i._uU(20,"Especialista 2"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(21,"div",3),i.NdJ("click",function(){return i.CHM(t),i.oxw().user("admin")}),i._UZ(22,"img",10),i.TgZ(23,"div",5),i.TgZ(24,"h5",6),i._uU(25,"Administrador"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}}const gt=[{path:"",component:ut},{path:"home",component:ut,data:{animation:"EnrollmentPage"}},{path:"signin",component:(()=>{class t{constructor(){this.prompt={show:!1},this.message="",this.autoCompletarDatos=!1,this.mode=new ct.xQ,this.mode$=this.mode.asObservable()}ngOnInit(){}onPrompt(t){this.prompt.show=!0,this.prompt.message=t,this.prompt.buttons=["Ok"]}onResponse(t){this.prompt=t}onAutoCompletarDatos(t){this.autoCompletarDatos=t}user(t){this.mode.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-signin"]],inputs:{prompt:"prompt"},decls:2,vars:2,consts:[["id","user-selector",4,"ngIf"],[3,"mode","autoCompletarDatos"],["id","user-selector"],[1,"frame",2,"width","150px",3,"click"],["src","./../../../assets/patient-2.jpg","alt","Card image cap",1,"card-img-top","img-thumbnail"],[1,"card-body"],[1,"card-title"],["src","./../../../assets/patient-1.jpg","alt","Card image cap",1,"card-img-top","img-thumbnail"],["src","./../../../assets/doctor-1.jpg","alt","Card image cap",1,"card-img-top","img-thumbnail"],["src","./../../../assets/doctor-2.jpg","alt","Card image cap",1,"card-img-top","img-thumbnail"],["src","./../../../assets/admin.jpg","alt","Card image cap",1,"card-img-top","img-thumbnail"]],template:function(t,e){1&t&&(i.YNc(0,pt,26,0,"div",0),i.TgZ(1,"app-signin-form",1),i.NdJ("autoCompletarDatos",function(t){return e.onAutoCompletarDatos(t)}),i.qZA()),2&t&&(i.Q6J("ngIf",e.autoCompletarDatos),i.xp6(1),i.Q6J("mode",e.mode$))},directives:[r.O5,ft],styles:["","[_nghost-%COMP%] {\n        height: 100%;\n        display: grid;\n        grid-template-columns: auto 350px auto;\n        grid-template-rows: auto 650px auto;\n        background-color:rgb(255,255,255);\n    }\n\n    @media only screen and (max-width: 1080px) {\n        [_nghost-%COMP%] {\n        }\n    }\n\n    .route-container[_ngcontent-%COMP%] {\n        display: flex;\n        height: 100%;\n        justify-content: center;\n    }\n\n    app-signin-form[_ngcontent-%COMP%] {\n        grid-column: 2;\n        grid-row: 2;\n    }\n\n    #user-selector[_ngcontent-%COMP%] {\n        margin-top: 10px;\n\n        width: 900px;\n\n        margin-left: auto;\n        margin-right: auto;\n        text-align: center;\n\n        display: inline-flex;\n        flex-direction: row;\n        align-items: center;\n        flex-wrap: wrap;\n        justify-content: space-between;\n        border-radius: 10px;\n        padding: 5px;\n        z-index: 9;\n        grid-column: 1 / span 3;\n        grid-row: 1;\n    }\n\n    .frame[_ngcontent-%COMP%] {\n        margin: 5px;\n    }\n\n    .card-title[_ngcontent-%COMP%] {\n        font-size: medium;\n    }"]}),t})()},{path:"appointments",component:st,data:{animation:"SpecialistRegistration"},canActivate:[(()=>{class t{constructor(t){this.router=t,this.redirectUrl=""}canLoad(t,e){const n=localStorage.getItem("userCredentials"),r=n?JSON.parse(n):n;return!(!r||!r.roles.includes("user"))||(this.router.navigate(["/signin"]),!1)}canActivate(t,e){const n=localStorage.getItem("userCredentials"),r=n?JSON.parse(n):n;return!(!r||!r.roles.includes("user"))||(this.router.navigate(["/signin"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(U.F0))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]},{path:"enrollment",component:at,data:{animation:"EnrollmentPage"}},{path:"patient",loadChildren:()=>Promise.all([n.e(894),n.e(592),n.e(242)]).then(n.bind(n,5242)).then(t=>t.PatientModule)},{path:"admin",loadChildren:()=>Promise.all([n.e(894),n.e(882)]).then(n.bind(n,2882)).then(t=>t.AdminModule)},{path:"specialist",loadChildren:()=>Promise.all([n.e(592),n.e(636)]).then(n.bind(n,3636)).then(t=>t.SpecialistModule)}];let mt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[U.Bz.forRoot(gt)],U.Bz]}),t})();var yt=n(2693);class vt{}const bt="*";function _t(t,e){return{type:7,name:t,definitions:e,options:{}}}function wt(t,e=null){return{type:4,styles:e,timings:t}}function St(t,e=null){return{type:3,steps:t,options:e}}function Tt(t,e=null){return{type:2,steps:t,options:e}}function Et(t){return{type:6,styles:t,offset:null}}function Ct(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function xt(t,e,n=null){return{type:11,selector:t,animation:e,options:n}}function At(t){Promise.resolve(null).then(t)}class kt{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){At(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class It{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?At(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}_t("specialistRegistrationEnters",[Ct("* <=> *",[xt(":enter, :leave",Et({position:"fixed",width:"100%",zIndex:2}),{optional:!0}),St([xt(":enter",[Et({transform:"translateX(100%)"}),wt("0.5s ease-out",Et({transform:"translateX(0%)"}))],{optional:!0}),xt(":leave",[Et({transform:"translateX(0%)"}),wt("0.5s ease-out",Et({transform:"translateX(-100%)"}))],{optional:!0})])])]),_t("slideInAnimation",[Ct("* <=> *",[xt(":enter, :leave",Et({position:"fixed",width:"100%",zIndex:2}),{optional:!0}),St([xt(":enter",[Et({transform:"translateX(100%)"}),wt("0.5s ease-out",Et({transform:"translateX(0%)"}))],{optional:!0}),xt(":leave",[Et({transform:"translateX(0%)"}),wt("0.5s ease-out",Et({transform:"translateX(-100%)"}))],{optional:!0})])])]);const Ot=_t("openClose",[Ct(":enter",[Et({transform:"translateX(-100%)",backgroundColor:"rgba(30,30,30,0)"}),wt("0.2s 100ms ease-out",Et({transform:"translateX(0%)"})),wt("0.3s 100ms ease-in",Et({backgroundColor:"rgba(30,30,30,0.5)"}))]),Ct(":leave",[wt("0.3s 100ms ease-in",Et({backgroundColor:"rgba(30,30,30,0)"})),wt("0.2s 100ms ease-in",Et({transform:"translateX(-100%)",backgroundColor:"rgba(30,30,30,0)"}))])]),Nt=(_t("prompt",[Ct(":enter",[Et({position:"fixed",top:"0",right:"0",bottom:"0",left:"-100%",height:"100%",width:"100%",overflow:"hidden",backgroundColor:"rgba(30,30,30,0)"}),wt("0.2s 100ms ease-out",Et({position:"fixed",top:"0",right:"0",bottom:"0",left:"0",height:"100%",width:"100%",overflow:"hidden"})),wt("0.5s 100ms ease-out",Et({backgroundColor:"rgba(30,30,30,0.5)"}))]),Ct(":leave",[wt("0.5s 100ms ease-out",Et({backgroundColor:"rgba(30,30,30,0)"})),wt("0.2s 100ms ease-out",Et({position:"fixed",top:"0",right:"0",bottom:"0",left:"-100%",height:"100%",width:"100%",overflow:"hidden"}))])]),_t("routeAnimations",[Ct("EnrollmentPage <=> SpecialistRegistration",[xt(":enter, :leave",Et({position:"fixed",width:"100%",zIndex:2}),{optional:!0}),St([xt(":enter",[Et({transform:"translateX(100%)"}),wt("0.5s ease-out",Et({transform:"translateX(0%)"}))],{optional:!0}),xt(":leave",[Et({transform:"translateX(0%)"}),wt("0.5s ease-out",Et({transform:"translateX(-100%)"}))],{optional:!0})])]),Ct("EnrollmentPage <=> PatientRegistration",[xt(":enter, :leave",Et({position:"fixed",width:"100%",zIndex:2}),{optional:!0}),St([xt(":enter",[Et({transform:"translateX(-100%)"}),wt("0.5s ease-out",Et({transform:"translateX(0%)"}))],{optional:!0}),xt(":leave",[Et({transform:"translateX(0%)"}),wt("0.5s ease-out",Et({transform:"translateX(100%)"}))],{optional:!0})])])]));var Dt=n(8918),Pt=n(8512);let Rt=(()=>{class t{constructor(){this.show=new Pt.X(!0),this.show$=this.show.asObservable()}hide(t){this.show.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ft(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"div",10),i.NdJ("click",function(){return i.CHM(t),i.oxw().showSideNav()}),i._UZ(1,"i",11),i.qZA()}}function Lt(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"div",3),i.NdJ("click",function(){return i.CHM(t),i.oxw().goToSigninPage()}),i.TgZ(1,"span",4),i._uU(2,"Login"),i.qZA(),i._UZ(3,"img",12),i.qZA()}}function Mt(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"div",3),i.NdJ("click",function(){return i.CHM(t),i.oxw().signout()}),i.TgZ(1,"span",4),i._uU(2,"Logout"),i.qZA(),i._UZ(3,"img",12),i.qZA()}}function Ut(t,e){if(1&t&&(i.TgZ(0,"p",13),i._uU(1),i.qZA()),2&t){const t=i.oxw();i.xp6(1),i.AsE("Bienvenido ",null==t.user?null:t.user.firstname," ",null==t.user?null:t.user.lastname,"")}}let Vt=(()=>{class t{constructor(t,e,n){this.router=t,this.topnav=e,this.auth=n,this.isOpen=!1,this.logged=!1,this.user=null,this.enableSideNav=new i.vpe}ngOnInit(){this.auth.logged$.subscribe(t=>{this.logged=t,t?this.user=JSON.parse(localStorage.getItem("userCredentials")):(localStorage.clear(),this.user=null)})}goToSigninPage(){this.router.navigate(["signin"]),this.topnav.hide(!1)}goToSignupPage(){this.router.navigate(["enrollment"]),this.topnav.hide(!1)}showSideNav(){this.enableSideNav.emit(!this.isOpen),this.isOpen=!this.isOpen}signout(){this.auth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(U.F0),i.Y36(Rt),i.Y36(H.$))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-top-nav"]],inputs:{isOpen:"isOpen"},outputs:{enableSideNav:"enableSideNav"},decls:12,vars:4,consts:[["id","nav"],["id","btn_sidenav","class","my_btn",3,"click",4,"ngIf"],["id","btn_signin","class","my_btn","style","width:100px !important;",3,"click",4,"ngIf"],["id","btn_signin",1,"my_btn",2,"width","100px !important",3,"click"],[2,"margin-right","10px"],[1,"fas","fa-user-plus"],["id","mid_bar"],["style","margin:auto",4,"ngIf"],["id","btn_home","routerLink","home",1,"my_btn"],["src","./../../../../assets/logo.png",2,"height","42px"],["id","btn_sidenav",1,"my_btn",3,"click"],[1,"fas","fa-bars","fa-1x"],["src","./../../../../assets/users.png",2,"height","20px"],[2,"margin","auto"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.YNc(1,Ft,2,0,"div",1),i.YNc(2,Lt,4,0,"div",2),i.YNc(3,Mt,4,0,"div",2),i.TgZ(4,"div",3),i.NdJ("click",function(){return e.goToSignupPage()}),i.TgZ(5,"span",4),i._uU(6," Registro"),i.qZA(),i._UZ(7,"i",5),i.qZA(),i.TgZ(8,"div",6),i.YNc(9,Ut,2,2,"p",7),i.qZA(),i.TgZ(10,"div",8),i._UZ(11,"img",9),i.qZA(),i.qZA()),2&t&&(i.xp6(1),i.Q6J("ngIf",e.logged),i.xp6(1),i.Q6J("ngIf",!e.logged),i.xp6(1),i.Q6J("ngIf",e.logged),i.xp6(6),i.Q6J("ngIf",e.user))},directives:[r.O5,U.rH],styles:["[_nghost-%COMP%]{grid-column:1/span 2;grid-row:1;position:fixed;top:0;right:0;left:0;z-index:10;box-shadow:0 2px 5px 0 #0000004d}","#nav[_ngcontent-%COMP%] {\n        display: flex;\n        flex-direction: row-reverse;\n        align-items: flex-end;\n        height: 58px;\n        background-color: whitesmoke;\n        box-shadow: 0px 2px rgba(30,30,30,.2);\n    }\n\n    #btn_signin[_ngcontent-%COMP%] {\n        align-self: flex-start;\n        margin: auto 5px auto 5px;\n        padding: 5px;\n        height: 58px;\n        width: 58px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n\n    #btn_sidenav[_ngcontent-%COMP%] {\n        align-self: flex-start;\n        margin: auto 5px auto 5px;\n        padding: 5px;\n        height: 58px;\n        width: 58px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n\n    #mid_bar[_ngcontent-%COMP%] {\n        margin: auto;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n    }\n\n    #btn_nav[_ngcontent-%COMP%] {\n        align-self: flex-start;\n        margin: auto 5px auto 5px;\n        padding: 5px;\n        border-radius: 50%;\n    }\n\n    #btn_home[_ngcontent-%COMP%] {\n        align-self: flex-start;\n        margin: auto 5px auto 5px;\n    }\n\n    .my_btn[_ngcontent-%COMP%] {\n        font-weight: 400;\n        line-height: 1.5;\n        text-align: center;\n        text-decoration: none;\n        vertical-align: middle;\n        cursor: pointer;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        user-select: none;\n        background-color: whitesmoke;\n        border: 1px solid transparent;\n        padding: 0.375rem 0.75rem;\n        font-size: 1rem;\n        transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n        outline: none;\n    }\n\n    .my_btn[_ngcontent-%COMP%]:hover {\n        background-color: rgb(228, 228, 228);\n    }\n\n    .my_btn[_ngcontent-%COMP%]:focus {\n        color: #fff;\n        background-color: whitesmoke;\n        background-color: rgba(245, 245, 245, 0.825);\n    }\n\n    .my_btn[_ngcontent-%COMP%]:active, .my_btn.active[_ngcontent-%COMP%] {\n        background-color: rgb(255, 255, 255);\n    }"]}),t})();function jt(t,e){1&t&&i._UZ(0,"span",2)}let qt=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-spinner"]],decls:2,vars:1,consts:[[1,"spinner-container"],["class","fa fa-spinner spinner",4,"ngIf"],[1,"fa","fa-spinner","spinner"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.YNc(1,jt,1,0,"span",1),i.qZA()),2&t&&(i.xp6(1),i.Q6J("ngIf",!0))},directives:[r.O5],styles:[".spinner-container[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;z-index:10;background-color:#1e1e1e33}.spinner[_ngcontent-%COMP%]{position:relative;font-size:300%;top:50%;left:50%}.fa-spinner[_ngcontent-%COMP%]{animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0deg);color:#f00c}to{color:#5d00ff33;transform:rotate(359deg)}}"]}),t})();function Bt(t,e){1&t&&(i.TgZ(0,"div"),i.TgZ(1,"a",2),i._UZ(2,"i",3),i._uU(3," Mi Perfil"),i.qZA(),i.qZA())}function Gt(t,e){1&t&&(i.TgZ(0,"div"),i.TgZ(1,"a",4),i._UZ(2,"i",3),i._uU(3," Mi Perfil"),i.qZA(),i.qZA())}function zt(t,e){1&t&&(i.TgZ(0,"div"),i.TgZ(1,"a",5),i._UZ(2,"i",6),i._uU(3," Mis Turnos"),i.qZA(),i.qZA())}function Zt(t,e){1&t&&(i.TgZ(0,"div"),i.TgZ(1,"a",7),i._UZ(2,"i",6),i._uU(3," Mis Turnos"),i.qZA(),i.qZA())}function Ht(t,e){1&t&&(i.TgZ(0,"div"),i.TgZ(1,"a",8),i._UZ(2,"i",9),i._uU(3," Historias Cl\xednicas"),i.qZA(),i.qZA())}function $t(t,e){1&t&&(i.TgZ(0,"div"),i.TgZ(1,"a",10),i._UZ(2,"i",9),i._uU(3," Historias Cl\xednicas"),i.qZA(),i.qZA())}function Kt(t,e){1&t&&(i.TgZ(0,"div"),i.TgZ(1,"a",11),i._UZ(2,"i",12),i._uU(3," Turnos"),i.qZA(),i.qZA())}function Qt(t,e){1&t&&(i.TgZ(0,"div"),i.TgZ(1,"a",13),i._UZ(2,"i",14),i._uU(3," Alta Usuarios"),i.qZA(),i.qZA())}let Jt=(()=>{class t{constructor(t,e){this.elRef=t,this.auth=e,this.closeNav=new i.vpe}documentClick(t){t.target===this.elRef.nativeElement&&this.closeNav.emit(!1)}ngOnInit(){this.auth.logged$.subscribe({next:t=>{t&&(this.currentUser=this.auth.getCurrentUserCredentials())}})}isRole(t,e){return t.roles.includes(e)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(i.SBq),i.Y36(H.$))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-side-nav"]],hostBindings:function(t,e){1&t&&i.NdJ("click",function(t){return e.documentClick(t)})},outputs:{closeNav:"closeNav"},decls:9,vars:8,consts:[[1,"links-container"],[4,"ngIf"],["routerLink","/patient/profile"],[1,"fas","fa-id-card"],["routerLink","/specialist/profile"],["routerLink","/patient/agenda"],[1,"fas","fa-calendar-check"],["routerLink","/specialist/agenda"],["routerLink","/specialist/clinical-records"],[1,"fas","fa-book-medical"],["routerLink","/admin/clinical-records"],["routerLink","/admin/agenda"],[1,"far","fa-calendar-alt"],["routerLink","/admin/management"],[1,"fas","fa-users"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.YNc(1,Bt,4,0,"div",1),i.YNc(2,Gt,4,0,"div",1),i.YNc(3,zt,4,0,"div",1),i.YNc(4,Zt,4,0,"div",1),i.YNc(5,Ht,4,0,"div",1),i.YNc(6,$t,4,0,"div",1),i.YNc(7,Kt,4,0,"div",1),i.YNc(8,Qt,4,0,"div",1),i.qZA()),2&t&&(i.xp6(1),i.Q6J("ngIf",e.isRole(e.currentUser,"patient")),i.xp6(1),i.Q6J("ngIf",e.isRole(e.currentUser,"specialist")),i.xp6(1),i.Q6J("ngIf",e.isRole(e.currentUser,"patient")),i.xp6(1),i.Q6J("ngIf",e.isRole(e.currentUser,"specialist")),i.xp6(1),i.Q6J("ngIf",e.isRole(e.currentUser,"specialist")),i.xp6(1),i.Q6J("ngIf",e.isRole(e.currentUser,"admin")),i.xp6(1),i.Q6J("ngIf",e.isRole(e.currentUser,"admin")),i.xp6(1),i.Q6J("ngIf",e.isRole(e.currentUser,"admin")))},directives:[r.O5,U.yS],styles:["[_nghost-%COMP%]{background-color:#1e1e1e80;color:#f5f5f5}.links-container[_ngcontent-%COMP%]{grid-row:1;grid-column:2;height:100%;width:250px;display:inline-flex;flex-direction:column;justify-content:flex-start;background-color:#893e3e;overflow-x:hidden}.links-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:5px;margin:2px;padding:2px;transition:.3s}.links-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:hover{background-color:#f5f5f5;color:#000;margin-left:15px;position:relative}.links-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]{color:#000}.links-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-family:consolas,monospace;font-weight:700;width:320px;height:320px;margin:0 auto 0 5px}"]}),t})(),Yt=(()=>{class t{constructor(){this.response=new i.vpe,this.title=""}ngOnInit(){}confirm(t){this.response.emit({succeed:!0,data:"confirm"})}reject(){this.response.emit({succeed:!1,data:"cancel"})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-modal"]],inputs:{item:"item",title:"title"},outputs:{response:"response"},decls:15,vars:1,consts:[["id","modal","tabindex","-1","role","dialog",1,"modal","fade","show",2,"display","block"],["role","document",1,"modal-dialog",2,"top","100px"],[1,"modal-content"],[1,"modal-header",2,"background-color","rgb(237, 237, 237)","color","rgb(89, 88, 88)"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"close",3,"click"],["id","body",1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.TgZ(3,"div",3),i.TgZ(4,"h5",4),i._uU(5),i.qZA(),i.TgZ(6,"button",5),i.NdJ("click",function(){return e.reject()}),i.TgZ(7,"span"),i._uU(8,"\xd7"),i.qZA(),i.qZA(),i.qZA(),i._UZ(9,"div",6),i.TgZ(10,"div",7),i.TgZ(11,"button",8),i.NdJ("click",function(t){return e.confirm(t)}),i._uU(12,"Aceptar"),i.qZA(),i.TgZ(13,"button",9),i.NdJ("click",function(){return e.reject()}),i._uU(14,"Deshacer"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.xp6(5),i.Oqu(e.title))},styles:["","#body[_ngcontent-%COMP%] {\n        display: flex;\n        flex-direction: column;\n        flex-shrink: 0;\n    }"]}),t})();function Wt(t,e){1&t&&i._UZ(0,"app-spinner")}function Xt(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"app-side-nav",6),i.NdJ("closeNav",function(e){return i.CHM(t),i.oxw().onEnableSideNav(e)}),i.qZA()}2&t&&i.Q6J("@openClose",void 0)}function te(t,e){1&t&&i._UZ(0,"app-modal")}let ee=(()=>{class t{constructor(t,e,n,r){this._loading=t,this._auth=e,this._routeName=n,this._modal=r,this.title="mguelpa-lab-iv-workspace",this.routeName="",this.showTopNav=!0,this.enableSideNav=!1,this.loading=!1,this.logged=!1,this.isOpen=!1,this.showModal=!0,this._loading.changeEmitted$.subscribe(t=>{this.loading=t}),this._auth.logged$.subscribe(t=>{this.logged=t,this.logged||this.onEnableSideNav(!1)}),this._routeName.changeEmitted$.subscribe(t=>{this.routeName=t}),this._modal.changeEmitted$.subscribe(t=>{this.showModal=t})}onEnableSideNav(t){this.enableSideNav=t,this.isOpen=t}prepareRoute(t){return t&&t.activatedRouteData&&t.activatedRouteData.animation}onDeactivate(){this.enableSideNav&&this.onEnableSideNav(!1)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(dt.x),i.Y36(H.$),i.Y36(ot.i),i.Y36(Dt.f))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-root"]],decls:7,vars:5,consts:[[4,"ngIf"],[3,"isOpen","enableSideNav"],[3,"closeNav",4,"ngIf"],["id","container"],[3,"deactivate"],["o","outlet"],[3,"closeNav"]],template:function(t,e){if(1&t&&(i.YNc(0,Wt,1,0,"app-spinner",0),i.TgZ(1,"app-top-nav",1),i.NdJ("enableSideNav",function(t){return e.onEnableSideNav(t)}),i.qZA(),i.YNc(2,Xt,1,1,"app-side-nav",2),i.TgZ(3,"div",3),i.TgZ(4,"router-outlet",4,5),i.NdJ("deactivate",function(){return e.onDeactivate()}),i.qZA(),i.qZA(),i.YNc(6,te,1,0,"app-modal",0)),2&t){const t=i.MAs(5);i.Q6J("ngIf",e.loading),i.xp6(1),i.Q6J("isOpen",e.isOpen),i.xp6(1),i.Q6J("ngIf",e.enableSideNav),i.xp6(1),i.Q6J("@routeAnimations",e.prepareRoute(t)),i.xp6(3),i.Q6J("ngIf",e.showModal)}},directives:[r.O5,Vt,U.lC,qt,Jt,Yt],styles:["[_nghost-%COMP%] {\n        display: grid;\n        grid-template-columns: 250px auto;\n        grid-template-rows: 60px auto;\n        height: 100%;\n    }\n    app-spinner[_ngcontent-%COMP%] {\n        position: absolute;\n        height: 100%;\n        width: 100%;\n        z-index: 15000;\n    }\n    app-top-nav[_ngcontent-%COMP%] {\n        grid-row: 1;\n        grid-column: 1 / span 2;\n        z-index: 13000;\n    }\n    app-side-nav[_ngcontent-%COMP%] {\n        grid-row: 2;\n        grid-column: 1 / span 2;\n        z-index: 12000;\n    }\n    #container[_ngcontent-%COMP%] {\n        \n        grid-row: 2;\n        grid-column: 1 / span 2;\n    }"],data:{animation:[Nt,Ot]}}),t})();function ne(){return"undefined"!=typeof window&&void 0!==window.document}function re(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ie(t){switch(t.length){case 0:return new kt;case 1:return t[0];default:return new It(t)}}function se(t,e,n,r,i={},s={}){const o=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=i[n];break;case bt:a=s[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}l[r]=a}),r||a.push(l),c=l,u=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function oe(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&ae(n,"start",t)));break;case"done":t.onDone(()=>r(n&&ae(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&ae(n,"destroy",t)))}}function ae(t,e,n){const r=n.totalTime,i=ue(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function ue(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function ce(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function le(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let he=(t,e)=>!1,de=(t,e)=>!1,fe=(t,e,n)=>[];const pe=re();(pe||"undefined"!=typeof Element)&&(he=ne()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),de=(()=>{if(pe||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):de}})(),fe=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let ge=null,me=!1;function ye(t){ge||(ge=("undefined"!=typeof document?document.body:null)||{},me=!!ge.style&&"WebkitAppearance"in ge.style);let e=!0;return ge.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in ge.style,!e&&me)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in ge.style),e}const ve=de,be=he,_e=fe;function we(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let Se=(()=>{class t{validateStyleProperty(t){return ye(t)}matchesElement(t,e){return ve(t,e)}containsElement(t,e){return be(t,e)}query(t,e,n){return _e(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,s=[],o){return new kt(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})(),Te=(()=>{class t{}return t.NOOP=new Se,t})();const Ee="ng-enter",Ce="ng-leave",xe="ng-trigger",Ae=".ng-trigger",ke="ng-animating",Ie=".ng-animating";function Oe(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ne(parseFloat(e[1]),e[2])}function Ne(t,e){switch(e){case"s":return 1e3*t;default:return t}}function De(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Ne(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=Ne(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function Pe(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Re(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Pe(t,n);return n}function Fe(t,e,n){return n?e+":"+n+";":""}function Le(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Fe(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Fe(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Me(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Ze(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),re()&&Le(t))}function Ue(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Ze(e);t.style[n]=""}),re()&&Le(t))}function Ve(t){return Array.isArray(t)?1==t.length?t[0]:Tt(t):t}const je=new RegExp("{{\\s*(.+?)\\s*}}","g");function qe(t){let e=[];if("string"==typeof t){let n;for(;n=je.exec(t);)e.push(n[1]);je.lastIndex=0}return e}function Be(t,e,n){const r=t.toString(),i=r.replace(je,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function Ge(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const ze=/-+([a-z0-9])/g;function Ze(t){return t.replace(ze,(...t)=>t[1].toUpperCase())}function He(t,e){return 0===t||0===e}function $e(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach(function(e){n[e]=Qe(t,e)})}}return e}function Ke(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Qe(t,e){return window.getComputedStyle(t)[e]}const Je="*";function Ye(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(tn(i,o)),"<"!=s[0]||i==Je&&o==Je||e.push(tn(o,i))}(t,n,e)):n.push(t),n}const We=new Set(["true","1"]),Xe=new Set(["false","0"]);function tn(t,e){const n=We.has(t)||Xe.has(t),r=We.has(e)||Xe.has(e);return(i,s)=>{let o=t==Je||t==i,a=e==Je||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?We.has(t):Xe.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?We.has(e):Xe.has(e)),o&&a}}const en=new RegExp("s*:selfs*,?","g");function nn(t,e,n){return new rn(t).build(e,n)}class rn{constructor(t){this._driver=t}build(t,e){const n=new sn(e);return this._resetContextStyleTimingState(n),Ke(this,Ve(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if(on(t)){const e=t;Object.keys(e).forEach(t=>{qe(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Ge(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Ke(this,Ve(t.animation),e);return{type:1,matchers:Ye(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:an(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Ke(this,t,e)),options:an(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=Ke(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:an(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return un(De(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=un(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||De(r,e),un(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Et({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,s=!1;if(!i){s=!0;const t={};n.easing&&(t.easing=n.easing),i=Et(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=s,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==bt?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(on(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=qe(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(on(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(on(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const s=l>0?r==h?1:l*r:i[r],o=s*p;e.currentTime=d+f.delay+o,f.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Ke(this,Ve(t.animation),e),options:an(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:an(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:an(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(en,"")),[t=t.replace(/@\*/g,Ae).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,Ie),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,ce(e.collectedStyles,e.currentQuerySelector,{});const o=Ke(this,Ve(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:an(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:De(t.timings,e.errors,!0);return{type:12,animation:Ke(this,Ve(t.animation),e),timings:n,options:null}}}class sn{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function on(t){return!Array.isArray(t)&&"object"==typeof t}function an(t){var e;return t?(t=Pe(t)).params&&(t.params=(e=t.params)?Pe(e):null):t={},t}function un(t,e,n){return{duration:t,delay:e,easing:n}}function cn(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class ln{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const hn=new RegExp(":enter","g"),dn=new RegExp(":leave","g");function fn(t,e,n,r,i,s={},o={},a,u,c=[]){return(new pn).buildKeyframes(t,e,n,r,i,s,o,a,u,c)}class pn{buildKeyframes(t,e,n,r,i,s,o,a,u,c=[]){u=u||new ln;const l=new mn(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([s],null,l.errors,a),Ke(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[cn(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Oe(n.duration):null,s=null!=n.delay?Oe(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Ke(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=gn);const t=Oe(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Ke(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Oe(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),Ke(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return De(e.params?Be(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Oe(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=gn);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(a=o.currentTimeline),Ke(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;Ke(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const gn={};class mn{constructor(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=gn,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new yn(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Oe(n.duration)),null!=n.delay&&(r.delay=Oe(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Be(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new mn(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=gn,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new vn(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(hn,"."+this._enterClassName)).replace(dn,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class yn{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new yn(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||bt,this._currentKeyframe[t]=bt}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},s=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=bt})):Re(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=Be(s[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:bt),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=Re(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):r==bt&&e.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=t.size?Ge(t.values()):[],s=e.size?Ge(e.values()):[];if(n){const t=r[0],e=Pe(t);t.offset=0,e.offset=1,r=[t,e]}return cn(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class vn extends yn{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,a=Re(t[0],!1);a.offset=0,i.push(a);const u=Re(t[0],!1);u.offset=bn(o),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let o=Re(t[r],!1);o.offset=bn((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return cn(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function bn(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class _n{}class wn extends _n{normalizePropertyName(t,e){return Ze(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(Sn[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const Sn=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Tn(t,e,n,r,i,s,o,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const En={};class Cn{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||En,d=this.buildStyles(n,o&&o.params||En,l),f=a&&a.params||En,p=this.buildStyles(r,f,l),g=new Set,m=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),f)},_=c?[]:fn(t,e,this.ast.animation,i,s,d,p,b,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return Tn(e,this._triggerName,n,r,v,d,p,[],[],m,y,w,l);_.forEach(t=>{const n=t.element,r=ce(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=ce(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const S=Ge(g.values());return Tn(e,this._triggerName,n,r,v,d,p,_,S,m,y,w)}}class xn{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=Pe(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=Be(s,r,e)),n[t]=s})}}),n}}class An{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new xn(t.style,t.options&&t.options.params||{})}),kn(this.states,"true","1"),kn(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Cn(t,e,this.states))}),this.fallbackTransition=new Cn(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function kn(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const In=new ln;class On{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=nn(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=se(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let s;const o=new Map;if(i?(s=fn(this._driver,e,i,Ee,Ce,{},{},n,In,r),s.forEach(t=>{const e=ce(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,bt)})});const a=ie(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=ue(e,"","","");return oe(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Nn="ng-animate-queued",Dn="ng-animate-disabled",Pn=".ng-animate-disabled",Rn=[],Fn={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ln={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Mn{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Pe(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Un="void",Vn=new Mn(Un);class jn{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,$n(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=ce(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=ce(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||($n(t,xe),$n(t,"ng-trigger-"+e),a[e]=Vn),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new Bn(this.id,e,t);let o=this._engine.statesByElement.get(t);o||($n(t,xe),$n(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const u=new Mn(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[e]=u,a||(a=Vn),u.value!==Un&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Ue(t,n),Me(t,r)})}return}const c=ce(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||($n(t,Nn),s.onStart(()=>{Kn(t,Nn)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),c.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Ae,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const s=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,Un,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&ie(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const s=this._triggers[i].fallbackTransition,o=n[i]||Vn,a=new Mn(Un),u=new Bn(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:s,fromState:o,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==Fn||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){$n(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=ue(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,oe(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class qn{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new jn(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(Gn(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!Gn(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),$n(t,Dn)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Kn(t,Dn))}removeNode(t,e,n,r){if(Gn(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return Gn(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,Ae,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Ie,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ie(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Fn,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,Pn)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Pn,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)$n(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?ie(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new ln,r=[],i=new Map,s=[],o=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=Hn(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=Ee+p++;f.set(e,n),t.forEach(t=>$n(t,n))});const g=[],m=new Set,y=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){const t=this.collectedLeaveElements[O],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,b=Hn(h,Array.from(m));b.forEach((t,e)=>{const n=Ce+p++;v.set(e,n),t.forEach(t=>$n(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>Kn(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>Kn(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>Ue(i,p.fromStyles)),e.onDestroy(()=>Me(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>Ue(i,p.fromStyles)),e.onDestroy(()=>Me(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),s.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>ce(o,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const S=new Map,T=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(T.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,S))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{ce(S,e,[]).push(t),t.destroy()})});const E=g.filter(t=>Yn(t,a,u)),C=new Map;Zn(C,this.driver,y,u,bt).forEach(t=>{Yn(t,a,u)&&E.push(t)});const x=new Map;d.forEach((t,e)=>{Zn(x,this.driver,new Set(t),a,"!")}),E.forEach(t=>{const e=C.get(t),n=x.get(t);C.set(t,Object.assign(Object.assign({},e),n))});const A=[],k=[],I={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(c.has(e))return s.onDestroy(()=>Me(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let t=I;if(T.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=T.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>T.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,S,i,x,C);if(s.setRealPlayer(n),t===I)A.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=ie(e)),r.push(s)}}else Ue(e,o.fromStyles),s.onDestroy(()=>Me(e,o.toStyles)),k.push(s),c.has(e)&&r.push(s)}),k.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=ie(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let O=0;O<g.length;O++){const t=g[O],e=t.__ng_removed;if(Kn(t,Ce),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,Ie,!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?Qn(this,t,r):this.processLeaveNode(t)}return g.length=0,A.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),A}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==Un;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,u=ce(n,t,[]);this._getPreviousPlayers(t,a,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}Ue(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,s){const o=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new kt(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return Jn(t,e),e}((n.get(h)||Rn).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=s.get(h),y=se(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new Bn(t,o,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{ce(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>$n(t,ke));const d=ie(h);return d.onDestroy(()=>{c.forEach(t=>Kn(t,ke)),Me(a,e.toStyles)}),l.forEach(t=>{ce(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new kt(t.duration,t.delay)}}class Bn{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new kt,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>oe(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ce(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Gn(t){return t&&1===t.nodeType}function zn(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Zn(t,e,n,r,i){const s=[];n.forEach(t=>s.push(zn(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Ln,o.push(r))}),t.set(r,s)});let a=0;return n.forEach(t=>zn(t,s[a++])),o}function Hn(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function s(t){if(!t)return 1;let e=i.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:r.has(o)?1:s(o),i.set(t,e),e}return e.forEach(t=>{const e=s(t);1!==e&&n.get(e).push(t)}),n}function $n(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Kn(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Qn(t,e,n){ie(n).onDone(()=>t.processLeaveNode(e))}function Jn(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof It?Jn(r.players,e):e.push(r)}}function Yn(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class Wn{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new qn(t,e,n),this._timelineEngine=new On(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=nn(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new An(t,e)}(r,e),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=le(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=le(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Xn(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=er(e[0]),e.length>1&&(r=er(e[e.length-1]))):e&&(n=er(e)),n||r?new tr(t,n,r):null}let tr=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Me(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Me(this._element,this._initialStyles),this._endStyles&&(Me(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Ue(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ue(this._element,this._endStyles),this._endStyles=null),Me(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function er(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];nr(i)&&(e=e||{},e[i]=t[i])}return e}function nr(t){return"display"===t||"position"===t}const rr="animation",ir="animationend";class sr{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=hr(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),lr(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),cr(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){or(this._element,this._name,"paused")}resume(){or(this._element,this._name,"running")}setPosition(t){const e=ar(this._element,this._name);this._position=t*this._duration,lr(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),cr(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=hr(t,"").split(","),r=ur(n,e);r>=0&&(n.splice(r,1),lr(t,"",n.join(",")))}(this._element,this._name))}}function or(t,e,n){lr(t,"PlayState",n,ar(t,e))}function ar(t,e){const n=hr(t,"");return n.indexOf(",")>0?ur(n.split(","),e):ur([n],e)}function ur(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function cr(t,e,n){n?t.removeEventListener(ir,e):t.addEventListener(ir,e)}function lr(t,e,n,r){const i=rr+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function hr(t,e){return t.style[rr+e]||""}class dr{constructor(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new sr(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:Qe(this.element,n))})}this.currentSnapshot=t}}class fr extends kt{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=we(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class pr{constructor(){this._count=0}validateStyleProperty(t){return ye(t)}matchesElement(t,e){return ve(t,e)}containsElement(t,e){return be(t,e)}query(t,e,n){return _e(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>we(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(t,e,n,r,i,s=[],o){const a=s.filter(t=>t instanceof dr),u={};He(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=$e(t,e,u));if(0==n)return new fr(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const d=Xn(t,e),f=new dr(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class gr{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Qe(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class mr{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(yr().toString()),this._cssKeyframesDriver=new pr}validateStyleProperty(t){return ye(t)}matchesElement(t,e){return ve(t,e)}containsElement(t,e){return be(t,e)}query(t,e,n){return _e(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=s.filter(t=>t instanceof gr);He(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=Xn(t,e=$e(t,e=e.map(t=>Re(t,!1)),u));return new gr(t,e,a,l)}}function yr(){return ne()&&Element.prototype.animate||{}}let vr=(()=>{class t extends vt{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:i.ifc.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Tt(t):t;return wr(this._renderer,null,e,"register",[n]),new br(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(i.FYo),i.LFG(r.K0))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();class br extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new _r(this._id,t,e||{},this._renderer)}}class _r{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return wr(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function wr(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const Sr="@",Tr="@.disabled";let Er=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new Cr("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(s),new xr(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(i.FYo),i.LFG(Wn),i.LFG(i.R0b))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();class Cr{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==Sr&&e==Tr?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class xr extends Cr{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==Sr?"."==e.charAt(1)&&e==Tr?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==Sr){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return i.charAt(0)!=Sr&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let Ar=(()=>{class t extends Wn{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(r.K0),i.LFG(Te),i.LFG(_n))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();const kr=new i.OlP("AnimationModuleType"),Ir=[{provide:vt,useClass:vr},{provide:_n,useFactory:function(){return new wn}},{provide:Wn,useClass:Ar},{provide:i.FYo,useFactory:function(t,e,n){return new Er(t,e,n)},deps:[T,Wn,i.R0b]}],Or=[{provide:Te,useFactory:function(){return"function"==typeof yr()?new mr:new pr}},{provide:kr,useValue:"BrowserAnimations"},...Ir],Nr=[{provide:Te,useClass:Se},{provide:kr,useValue:"NoopAnimations"},...Ir];let Dr=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?Nr:Or}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({providers:Or,imports:[F]}),t})();var Pr=n(5912),Rr=n(71),Fr=n(2145);let Lr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t,bootstrap:[ee]}),t.\u0275inj=i.cJS({providers:[],imports:[[F,mt,yt.JF,L.hO.initializeApp(M),B.yb,Pr.ww,Rr.TE,lt.u5,lt.UX,Dr,Fr.n]]}),t})();M.production&&(0,i.G48)(),P().bootstrapModule(Lr).catch(t=>console.error(t))},6304:(t,e,n)=>{"use strict";function r(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise(function(i,s){var o=t.apply(e,n);function a(t){r(o,i,s,a,u,"next",t)}function u(t){r(o,i,s,a,u,"throw",t)}a(void 0)})}}n.d(e,{Z:()=>i})},4762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>s,mG:()=>o,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}}},t=>{"use strict";t(t.s=2245)}]);