(self.webpackChunkmguelpa_lab_iv_tp_clinica=self.webpackChunkmguelpa_lab_iv_tp_clinica||[]).push([[242],{5242:(t,e,n)=>{"use strict";n.r(e),n.d(e,{PatientModule:()=>W});var i=n(1116),o=n(4051),a=n(7368),s=n(3412),r=n(6536),c=n(6177),l=n(1462);function d(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",14),a.NdJ("click",function(){a.CHM(t);const e=a.oxw().$implicit;return a.oxw(2).trigger("cancel",e)}),a._UZ(1,"i",15),a.qZA()}}function p(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",16),a.NdJ("click",function(){a.CHM(t);const e=a.oxw().$implicit;return a.oxw(2).trigger("review",e)}),a._UZ(1,"i",17),a.qZA()}}function g(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",18),a.NdJ("click",function(){a.CHM(t);const e=a.oxw().$implicit;return a.oxw(2).trigger("rate",e)}),a._UZ(1,"i",19),a.qZA()}}function u(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",20),a.NdJ("click",function(){a.CHM(t);const e=a.oxw().$implicit;return a.oxw(2).trigger("survey",e)}),a._UZ(1,"i",21),a.qZA()}}function m(t,e){if(1&t&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.ALo(3,"date"),a.qZA(),a.TgZ(4,"td"),a._uU(5),a.qZA(),a.TgZ(6,"td"),a._uU(7),a.qZA(),a.TgZ(8,"td"),a._uU(9),a.qZA(),a.TgZ(10,"td"),a.YNc(11,d,2,0,"button",10),a.YNc(12,p,2,0,"button",11),a.YNc(13,g,2,0,"button",12),a.YNc(14,u,2,0,"button",13),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(2),a.Oqu(a.xi3(3,9,t.date,"short")),a.xp6(3),a.AsE("",t.specialist.lastname," ",t.specialist.firstname,""),a.xp6(2),a.Oqu(t.speciality),a.xp6(2),a.Oqu(t.status),a.xp6(2),a.Q6J("ngIf","taken"===t.status||"accepted"===t.status),a.xp6(1),a.Q6J("ngIf",t.review),a.xp6(1),a.Q6J("ngIf","finalized"===t.status&&!t.rating),a.xp6(1),a.Q6J("ngIf","finalized"===t.status&&t.review)}}function f(t,e){if(1&t&&(a.TgZ(0,"tbody"),a.YNc(1,m,15,12,"tr",9),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.filtered)}}let h=(()=>{class t{constructor(){this.action=new a.vpe,this.appointments=[],this.filtered=[],this._filterTerm=""}get filterTerm(){return this._filterTerm}set filterTerm(t){this._filterTerm=t,this.filtered=this.filterTerm?this.performFilter(this._filterTerm):this.appointments}ngOnInit(){}performFilter(t){return t=t.toLocaleLowerCase(),this.appointments.filter(e=>-1!==`${e.specialist.lastname}`.toLocaleLowerCase().indexOf(t)||-1!==e.speciality.toLocaleLowerCase().indexOf(t))}trigger(t,e){this.action.emit({action:t,appointment:e})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-patient-appointments-grid"]],inputs:{appointments:"appointments",filtered:"filtered"},outputs:{action:"action"},decls:22,vars:2,consts:[["id","header"],[1,"input-group","mb-1"],["type","text","placeholder","Buscar turnos",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-outline-secondary"],["id","body"],["id","component-wrapper"],["id","person-grid-wrapper"],["id","table-wrapper",1,"layout"],[4,"ngIf"],[4,"ngFor","ngForOf"],["title","Cancelar","class","btn btn-danger btn-sm","style","margin:2px;",3,"click",4,"ngIf"],["title","Comentarios","class","btn btn-warning btn-sm","style","margin:2px;",3,"click",4,"ngIf"],["title","Calificar","class","btn btn-success btn-sm","style","margin:2px;",3,"click",4,"ngIf"],["title","Encuesta","class","btn btn-secondary btn-sm","style","margin:2px;",3,"click",4,"ngIf"],["title","Cancelar",1,"btn","btn-danger","btn-sm",2,"margin","2px",3,"click"],[1,"fas","fa-calendar-times"],["title","Comentarios",1,"btn","btn-warning","btn-sm",2,"margin","2px",3,"click"],[1,"fas","fa-comments"],["title","Calificar",1,"btn","btn-success","btn-sm",2,"margin","2px",3,"click"],[1,"fas","fa-thumbs-up"],["title","Encuesta",1,"btn","btn-secondary","btn-sm",2,"margin","2px",3,"click"],[1,"fas","fa-poll-h"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"input",2),a.NdJ("ngModelChange",function(t){return e.filterTerm=t}),a.qZA(),a.TgZ(3,"button",3),a._uU(4,"Buscar"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(5,"div",4),a.TgZ(6,"div",5),a.TgZ(7,"div",6),a.TgZ(8,"div",7),a.TgZ(9,"table"),a.TgZ(10,"thead"),a.TgZ(11,"th"),a._uU(12,"Fecha"),a.qZA(),a.TgZ(13,"th"),a._uU(14,"Especialista"),a.qZA(),a.TgZ(15,"th"),a._uU(16,"Especialidad"),a.qZA(),a.TgZ(17,"th"),a._uU(18,"Estado"),a.qZA(),a.TgZ(19,"th"),a._uU(20,"Acci\xf3n"),a.qZA(),a.qZA(),a.YNc(21,f,2,1,"tbody",8),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(2),a.Q6J("ngModel",e.filterTerm),a.xp6(19),a.Q6J("ngIf",e.filtered&&e.filtered.length))},directives:[l.Fj,l.JJ,l.On,i.O5,i.sg],pipes:[i.uU],styles:["#header[_ngcontent-%COMP%]{grid-row:2}#body[_ngcontent-%COMP%], #header[_ngcontent-%COMP%]{grid-column:1;padding:5px}#body[_ngcontent-%COMP%]{grid-row:4}#component-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}#component-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:10px;-webkit-box-shadow:inset 0 0 6px #0000004d}#component-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;-webkit-box-shadow:inset 0 0 6px #00000080}#person-grid-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;overflow:hidden;background-color:#fff;border:2px solid #000;border-radius:8px;padding-right:8px}#person-grid-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%]{font-family:Consolas,Courier,monospace;border-collapse:collapse;width:100%;background-color:#000;border-radius:5px}#person-grid-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-family:Comic Sans MS,Comic Sans,cursive;padding:2px;text-align:center;border-collapse:collapse;color:#fff}#person-grid-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:5px;text-align:center}#person-grid-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}#person-grid-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f5f5f5}#person-grid-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:last-child > td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:5px}#person-grid-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:last-child > td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:5px}#person-grid-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:hover{background-color:#fff078}#table-wrapper[_ngcontent-%COMP%]{width:100%;padding:0;box-sizing:initial;border:2px solid #000;border-radius:8px;background-color:#fff}#table-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%]{font-family:Consolas,Courier,monospace;border-collapse:collapse;width:100%;background-color:#000;border-radius:5px}#table-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-family:Comic Sans MS,Comic Sans,cursive;padding:2px;text-align:center;border-collapse:collapse;color:#fff}#table-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:5px;text-align:center}#table-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}#table-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f5f5f5}#table-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:last-child > td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:5px}#table-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:last-child > td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:5px}#table-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:hover{background-color:#fff078}.layout[_ngcontent-%COMP%]{border:1px solid #000;border-radius:5px;display:flex;margin:2px;padding:2px}","#modal[_ngcontent-%COMP%] {\n        background-color: rgba(30, 30, 30, .5);\n    }"]}),t})();const Z=function(t){return{"is-invalid":t}},b=function(t,e){return{"invalid-feedback":t,"valid-feedback":e}};function C(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",1),a.TgZ(1,"div",2),a.TgZ(2,"div",3),a.TgZ(3,"div",4),a.TgZ(4,"h5",5),a._uU(5,"Cancelaci\xf3n de turno"),a.qZA(),a.TgZ(6,"button",6),a.NdJ("click",function(){return a.CHM(t),a.oxw().reject()}),a.TgZ(7,"span"),a._uU(8,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(9,"div",7),a.TgZ(10,"p"),a._uU(11,"Esta operaci\xf3n cancelar\xe1 el turno con "),a.TgZ(12,"strong"),a._uU(13),a.qZA(),a._uU(14," el d\xeda "),a.TgZ(15,"strong"),a._uU(16),a.qZA(),a._uU(17," a las "),a.TgZ(18,"strong"),a._uU(19),a.ALo(20,"date"),a.qZA(),a._uU(21,", atenci\xf3n en "),a.TgZ(22,"strong"),a._uU(23),a.qZA(),a._uU(24,"."),a.qZA(),a.TgZ(25,"div",8),a.TgZ(26,"textarea",9),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().comments=e}),a.qZA(),a.TgZ(27,"div",10),a._uU(28," Campo requerido. "),a.qZA(),a.qZA(),a.qZA(),a.TgZ(29,"div",11),a.TgZ(30,"button",12),a.NdJ("click",function(e){return a.CHM(t),a.oxw().confirm(e)}),a._uU(31,"Confirmar"),a.qZA(),a.TgZ(32,"button",13),a.NdJ("click",function(){return a.CHM(t),a.oxw().reject()}),a._uU(33,"Deshacer"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(13),a.AsE("",t.item.specialist.firstname," ",t.item.specialist.lastname,""),a.xp6(3),a.Oqu(t.toDateString(t.item.date)),a.xp6(3),a.Oqu(a.xi3(20,8,t.item.date,"shortTime")),a.xp6(4),a.Oqu(t.item.speciality),a.xp6(3),a.Q6J("ngClass",a.VKq(11,Z,t.isInvalid))("ngModel",t.comments),a.xp6(1),a.Q6J("ngClass",a.WLB(13,b,t.isInvalid,!t.isInvalid))}}function x(t,e){if(1&t&&(a.TgZ(0,"div"),a.TgZ(1,"label",15),a._uU(2,"Diagn\xf3stico"),a.qZA(),a.TgZ(3,"div",8),a.TgZ(4,"textarea",16),a._uU(5),a.qZA(),a.qZA(),a.qZA()),2&t){const t=a.oxw(2);a.xp6(5),a.Oqu(t.item.diagnosis)}}function _(t,e){if(1&t&&(a.TgZ(0,"div"),a.TgZ(1,"label",15),a._uU(2,"Comentarios"),a.qZA(),a.TgZ(3,"div",8),a.TgZ(4,"textarea",16),a._uU(5),a.qZA(),a.qZA(),a.qZA()),2&t){const t=a.oxw(2);a.xp6(5),a.Oqu(t.item.review)}}const v=function(t){return{active:t}};function A(t,e){if(1&t&&(a.TgZ(0,"div"),a.TgZ(1,"label",15),a._uU(2,"Calificaci\xf3n del paciente"),a.qZA(),a.TgZ(3,"div",17),a.TgZ(4,"div",18),a.TgZ(5,"div",10),a._UZ(6,"i",19),a.qZA(),a.TgZ(7,"div",10),a._UZ(8,"i",20),a.qZA(),a.TgZ(9,"div",10),a._UZ(10,"i",21),a.qZA(),a.TgZ(11,"div",10),a._UZ(12,"i",22),a.qZA(),a.TgZ(13,"div",10),a._UZ(14,"i",23),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t){const t=a.oxw(2);a.xp6(5),a.Q6J("ngClass",a.VKq(5,v,5===t.item.rating)),a.xp6(2),a.Q6J("ngClass",a.VKq(7,v,4===t.item.rating)),a.xp6(2),a.Q6J("ngClass",a.VKq(9,v,3===t.item.rating)),a.xp6(2),a.Q6J("ngClass",a.VKq(11,v,2===t.item.rating)),a.xp6(2),a.Q6J("ngClass",a.VKq(13,v,1===t.item.rating))}}function M(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",1),a.TgZ(1,"div",2),a.TgZ(2,"div",3),a.TgZ(3,"div",4),a.TgZ(4,"h5",5),a._uU(5,"Rese\xf1a del turno"),a.qZA(),a.TgZ(6,"button",6),a.NdJ("click",function(){return a.CHM(t),a.oxw().reject()}),a.TgZ(7,"span"),a._uU(8,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(9,"div",7),a.YNc(10,x,6,1,"div",14),a.YNc(11,_,6,1,"div",14),a.YNc(12,A,15,15,"div",14),a.qZA(),a.TgZ(13,"div",11),a.TgZ(14,"button",12),a.NdJ("click",function(e){return a.CHM(t),a.oxw().confirm(e)}),a._uU(15,"Confirmar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(10),a.Q6J("ngIf",t.item.diagnosis),a.xp6(1),a.Q6J("ngIf",t.item.review),a.xp6(1),a.Q6J("ngIf",t.item.rating)}}function q(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",1),a.TgZ(1,"div",2),a.TgZ(2,"div",3),a.TgZ(3,"div",4),a.TgZ(4,"h5",5),a._uU(5,"Calificar Atenci\xf3n"),a.qZA(),a.TgZ(6,"button",6),a.NdJ("click",function(){return a.CHM(t),a.oxw().reject()}),a.TgZ(7,"span"),a._uU(8,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(9,"div",7),a.TgZ(10,"div",8),a.TgZ(11,"div",18),a.TgZ(12,"div",24),a.NdJ("click",function(){return a.CHM(t),a.oxw().rate(5)}),a._UZ(13,"i",19),a.qZA(),a.TgZ(14,"div",24),a.NdJ("click",function(){return a.CHM(t),a.oxw().rate(4)}),a._UZ(15,"i",20),a.qZA(),a.TgZ(16,"div",24),a.NdJ("click",function(){return a.CHM(t),a.oxw().rate(3)}),a._UZ(17,"i",21),a.qZA(),a.TgZ(18,"div",24),a.NdJ("click",function(){return a.CHM(t),a.oxw().rate(2)}),a._UZ(19,"i",22),a.qZA(),a.TgZ(20,"div",24),a.NdJ("click",function(){return a.CHM(t),a.oxw().rate(1)}),a._UZ(21,"i",23),a.qZA(),a.qZA(),a._UZ(22,"input",25),a.TgZ(23,"div",10),a._uU(24," Debe seleccionar una calificaci\xf3n. "),a.qZA(),a.qZA(),a.qZA(),a.TgZ(25,"div",11),a.TgZ(26,"button",12),a.NdJ("click",function(e){return a.CHM(t),a.oxw().confirm(e)}),a._uU(27,"Confirmar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(12),a.Q6J("ngClass",a.VKq(7,v,5===t.qualification)),a.xp6(2),a.Q6J("ngClass",a.VKq(9,v,4===t.qualification)),a.xp6(2),a.Q6J("ngClass",a.VKq(11,v,3===t.qualification)),a.xp6(2),a.Q6J("ngClass",a.VKq(13,v,2===t.qualification)),a.xp6(2),a.Q6J("ngClass",a.VKq(15,v,1===t.qualification)),a.xp6(2),a.Q6J("ngClass",a.VKq(17,Z,t.isInvalid)),a.xp6(1),a.Q6J("ngClass",a.WLB(19,b,t.isInvalid,!t.isInvalid))}}function w(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",1),a.TgZ(1,"div",2),a.TgZ(2,"div",3),a.TgZ(3,"div",4),a.TgZ(4,"h5",5),a._uU(5,"Encuesta de calidad de atenci\xf3n"),a.qZA(),a.TgZ(6,"button",6),a.NdJ("click",function(){return a.CHM(t),a.oxw().reject()}),a.TgZ(7,"span"),a._uU(8,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(9,"div",7),a._uU(10," en construcci\xf3n... "),a.qZA(),a.TgZ(11,"div",11),a.TgZ(12,"button",12),a.NdJ("click",function(e){return a.CHM(t),a.oxw().confirm(e)}),a._uU(13,"Confirmar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}}let T=(()=>{class t{constructor(){this.days=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado","Domingo"],this.months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],this.isInvalid=!1,this.comments="",this.diagnosis="",this.qualification=0,this.response=new a.vpe}ngOnInit(){}confirm(t){if("reject"===this.mode||"cancel"===this.mode){if(!this.comments)return void(this.isInvalid=!0);this.isInvalid=!1,this.response.emit({from:this.mode,succeed:!0,data:this.comments})}if("review"===this.mode&&this.reject(),"rate"===this.mode&&this.qualification<1)this.isInvalid=!0;else{if("rate"===this.mode){if(this.qualification<1)return void(this.isInvalid=!0);this.response.emit({from:this.mode,succeed:!0,data:this.qualification})}if("finalize"===this.mode){if(!this.comments||!this.diagnosis)return void(this.isInvalid=!0);this.isInvalid=!1,this.response.emit({from:this.mode,succeed:!0,data:{comments:this.comments,diagnosis:this.diagnosis}})}}}reject(){this.response.emit({from:this.mode,succeed:!1,data:"cancel"})}rate(t){this.qualification=t,this.isInvalid=!1}toDateString(t){return`${this.days[t.getDay()]} ${t.getDate()} de ${this.months[t.getMonth()]} del ${t.getFullYear()}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-patient-appointment-modal"]],inputs:{mode:"mode",item:"item"},outputs:{response:"response"},decls:4,vars:4,consts:[["id","modal","tabindex","-1","role","dialog","class","modal fade show","style","display: block;",4,"ngIf"],["id","modal","tabindex","-1","role","dialog",1,"modal","fade","show",2,"display","block"],["role","document",1,"modal-dialog",2,"top","100px"],[1,"modal-content"],[1,"modal-header",2,"background-color","rgb(237, 237, 237)","color","rgb(89, 88, 88)"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"close",3,"click"],[1,"modal-body"],[1,"form-group"],["cols","30","rows","3","placeholder","Motivo de la cancelaci\xf3n del turno.",1,"form-control",3,"ngClass","ngModel","ngModelChange"],[3,"ngClass"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[4,"ngIf"],["for",""],["disabled","",1,"form-control"],[1,"form-group","mt-3"],[2,"display","flex","justify-content","space-evenly","align-items","center"],[1,"far","fa-laugh-beam","fa-3x","hoverable"],[1,"far","fa-smile-beam","fa-3x","hoverable"],[1,"far","fa-meh","fa-3x","hoverable"],[1,"far","fa-frown","fa-3x","hoverable"],[1,"far","fa-angry","fa-3x","hoverable"],[3,"ngClass","click"],["type","text","disabled","","hidden","",1,"form-control",3,"ngClass"]],template:function(t,e){1&t&&(a.YNc(0,C,34,16,"div",0),a.YNc(1,M,16,3,"div",0),a.YNc(2,q,28,22,"div",0),a.YNc(3,w,14,0,"div",0)),2&t&&(a.Q6J("ngIf","cancel"===e.mode),a.xp6(1),a.Q6J("ngIf","review"===e.mode),a.xp6(1),a.Q6J("ngIf","rate"===e.mode),a.xp6(1),a.Q6J("ngIf","survey"===e.mode))},directives:[i.O5,l.Fj,i.mk,l.JJ,l.On],pipes:[i.uU],styles:[".hoverable[_ngcontent-%COMP%]:hover{color:#06f}.active[_ngcontent-%COMP%]{color:#06f!important}"]}),t})();function O(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"app-patient-appointment-modal",9),a.NdJ("response",function(e){return a.CHM(t),a.oxw().onModalResponse(e)}),a.qZA()}if(2&t){const t=a.oxw();a.Q6J("item",t.selectedAppointment)("mode",t.modalMode)}}let P=(()=>{class t{constructor(t,e,n){this.authService=t,this.patiService=e,this.appoService=n,this.appointments=[],this.showModal=!1}ngOnInit(){this.currentUser=this.authService.getCurrentUserCredentials(),this.patiService.getPatientAppointments(this.currentUser.uid).subscribe({next:t=>{t.map(t=>t.date=new Date(1e3*t.date.seconds)),this.appointments=t}})}trigger(t){switch(t.action){case"cancel":this.cancel(t.appointment);break;case"review":this.review(t.appointment);break;case"rate":this.rate(t.appointment);break;case"survey":this.survey(t.appointment)}}cancel(t){this.selectedAppointment=t,this.modalMode="cancel",this.showModal=!0}review(t){this.selectedAppointment=t,this.modalMode="review",this.showModal=!0}rate(t){this.selectedAppointment=t,this.modalMode="rate",this.showModal=!0}survey(t){this.selectedAppointment=t,this.modalMode="survey",this.showModal=!0}onModalResponse(t){switch(t.from){case"rate":t.succeed&&(this.selectedAppointment.rating=t.data,this.appoService.updateAppointment(this.selectedAppointment)),this.showModal=!1;break;case"survey":this.showModal=!1;break;case"cancel":t.succeed&&(this.selectedAppointment.status="cancelled",this.selectedAppointment.review=t.data,this.appoService.updateAppointment(this.selectedAppointment)),this.showModal=!1;break;case"review":this.showModal=!1}}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.$),a.Y36(r.e),a.Y36(c.H))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-patient-agenda"]],decls:11,vars:3,consts:[["id","header",1,"display-5"],["id","tab-container"],["id","tab-header"],["id","tab",1,"nav","nav-tabs"],[1,"nav-link","active"],["id","tab-body",1,"tab-content"],[1,"tab_container"],[3,"appointments","filtered","action"],[3,"item","mode","response",4,"ngIf"],[3,"item","mode","response"]],template:function(t,e){1&t&&(a.TgZ(0,"h2",0),a._uU(1,"Agenda de Turnos - Clinica OMED"),a.qZA(),a.TgZ(2,"div",1),a.TgZ(3,"nav",2),a.TgZ(4,"div",3),a.TgZ(5,"button",4),a._uU(6,"Turnos"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"div",5),a.TgZ(8,"div",6),a.TgZ(9,"app-patient-appointments-grid",7),a.NdJ("action",function(t){return e.trigger(t)}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(10,O,1,2,"app-patient-appointment-modal",8)),2&t&&(a.xp6(9),a.Q6J("appointments",e.appointments)("filtered",e.appointments),a.xp6(1),a.Q6J("ngIf",e.showModal))},directives:[h,i.O5,T],styles:["[_nghost-%COMP%]{display:grid;grid-template-rows:100px 600px auto;grid-template-columns:auto 800px auto}#header[_ngcontent-%COMP%]{grid-row:1;grid-column:2;margin:auto}#tab-container[_ngcontent-%COMP%]{grid-row:2;grid-column:2;height:100%}.tab_container[_ngcontent-%COMP%]{border-left:1px solid #dee2e6;border-right:1px solid #dee2e6;border-bottom:1px solid #dee2e6;border-bottom-left-radius:5px;border-bottom-right-radius:5px;padding:15px;height:100%}"]}),t})();var y=n(7701),U=n(108),I=n(4054),k=n(6004),J=n(8406);const N=function(t){return{"invalid-feedback":t}};function L(t,e){if(1&t&&(a.TgZ(0,"div",8),a._uU(1," Debe pasar la validacion del captcha. "),a.qZA()),2&t){const t=a.oxw();a.Q6J("ngClass",a.VKq(1,N,t.submitted&&!t.isValidCaptcha))}}const D=function(t,e){return{"is-invalid":t,"is-valid":e}},V=function(t,e){return{"invalid-feedback":t,"valid-feedback":e}};let Q=(()=>{class t{constructor(t,e,n,i,o,a){this.fb=t,this.pv=e,this.ps=n,this.ms=i,this._loading=o,this.router=a,this.prompt=!1,this.subscriptions=[],this.controlNames=["firstname","lastname","dni","age","obrasocial","photo01","photo02","username","passwordGroup","passwordGroup.password","passwordGroup.confirm"],this.pictures=[],this.isValidCaptcha=!1,this.submitted=!1,this.states={firstname:{message:"",class:""},lastname:{message:"",class:""},dni:{message:"",class:""},age:{message:"",class:""},username:{message:"",class:""},password:{message:"",class:""},confirm:{message:"",class:""},obrasocial:{message:"",class:""},passwordGroup:{message:"",class:""},photo01:{message:"",class:""},photo02:{message:"",class:""}}}setMessage(t,e){if(this.pv.clearState(this.states,e),t.errors&&(t.touched||t.dirty)){let n=Object.keys(t.errors)[0];this.pv.setState(this.states,e,this.pv.getState(n))}t.errors||!t.touched&&!t.dirty||this.pv.setState(this.states,e,this.pv.getState("succeeded"))}ngOnInit(){this.form=this.initForm(),this.watchForm(...this.controlNames)}initForm(){return this.fb.group({uid:[""],firstname:["",[l.kI.required,this.pv.validateNames]],lastname:["",[l.kI.required,this.pv.validateNames]],age:["",[l.kI.required,l.kI.min(0),l.kI.max(105),this.pv.validateAge]],username:["",[l.kI.required,l.kI.email]],passwordGroup:new l.cw({password:new l.NI("",[l.kI.required,l.kI.pattern(/^(?=[^a-zA-Z]*[a-zA-Z])(?=\D*\d).{8,}$/)]),confirm:new l.NI("")},this.pv.passwordCheck),dni:["",[l.kI.required,this.pv.validateDNI]],obrasocial:["",[l.kI.required]],photo01:["",[l.kI.required,this.pv.validateFileExtension]],photo02:["",[l.kI.required,this.pv.validateFileExtension]]})}watchForm(...t){t.map(t=>{const e=this.form.get(t);if(null!==e){const n=e.valueChanges.pipe((0,y.b)(1e3)).subscribe(()=>{this.setMessage(e,t)});this.subscriptions.push(n)}})}check(t){const e=this.form.get(t);if(e.errors&&(e.touched||e.dirty))return e.errors}captchaValidation(t){this.isValidCaptcha=t}submit(){if(this.submitted=!0,this.controlNames.map(t=>{const e=this.form.get(t);e.markAllAsTouched(),this.setMessage(e,t)}),"VALID"===this.form.status&&this.isValidCaptcha){const t={credentials:{username:this.form.get("username").value,password:this.form.get("passwordGroup.password").value},profile:{claims:{uid:"",username:this.form.get("username").value,firstname:this.form.get("firstname").value,lastname:this.form.get("lastname").value,roles:["user","patient"],photoUrls:[],isActiveUser:!1},data:{firstname:this.form.get("firstname").value,lastname:this.form.get("lastname").value,age:this.form.get("age").value,dni:this.form.get("dni").value,obrasocial:this.form.get("obrasocial").value}}};this._loading.emitChange(!0),this.ps.registerPatient(t,this.pictures).then(t=>{const e={uid:t,email:this.form.get("username").value,subject:"Activacion de usuario - Clinica OMED"};this.ms.sendMessage(e).subscribe(()=>{})}).finally(()=>{this._loading.emitChange(!1),alert("Registro exitoso, revise su email para activar su cuenta."),this.router.navigate(["signin"])})}}onFileSelection01(t){1===t.target.files.length&&this.pictures.push({filename:t.target.files[0].name,stream:t.target.files[0],contentType:"image/jpeg"})}onFileSelection02(t){1===t.target.files.length&&this.pictures.push({filename:t.target.files[0].name,stream:t.target.files[0],contentType:"image/jpeg"})}auto(){var t,e,n;null===(t=this.form.get("username"))||void 0===t||t.patchValue(`test_${Date.now()}@user.com`),null===(e=this.form.get("passwordGroup.password"))||void 0===e||e.patchValue("123456Q!"),null===(n=this.form.get("passwordGroup.confirm"))||void 0===n||n.patchValue("123456Q!"),this.form.get("firstname").patchValue("John"),this.form.get("lastname").patchValue("Doe"),this.form.get("dni").patchValue("12345678"),this.form.get("age").patchValue("31"),this.form.get("obrasocial").patchValue("OSDE 310"),this.form.get("photo01").patchValue(""),this.form.get("photo02").patchValue(""),this.form.markAllAsTouched()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(l.qu),a.Y36(U.n),a.Y36(r.e),a.Y36(I.M),a.Y36(k.x),a.Y36(o.F0))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-patient-registration-form"]],decls:84,vars:92,consts:[["id","frm_patient","novalidate","",1,"needs-validation",3,"formGroup"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"fas","fa-envelope"],["type","text","placeholder","Email","formControlName","username",1,"form-control",3,"ngClass"],[3,"ngClass"],["formGroupName","passwordGroup",1,"form-group","row"],[1,"col-md-6"],[1,"fas","fa-key"],["type","password","placeholder","Clave","formControlName","password",1,"form-control",3,"ngClass"],["type","password","placeholder","Clave","formControlName","confirm",1,"form-control",3,"ngClass"],["type","text","formControlName","firstname",1,"form-control",3,"ngClass"],["type","text","formControlName","lastname",1,"form-control",3,"ngClass"],[1,"col-md-4"],["type","text","formControlName","dni",1,"form-control",3,"ngClass"],["type","text","formControlName","age",1,"form-control",3,"ngClass"],["type","text","formControlName","obrasocial",1,"form-control",3,"ngClass"],[1,"col-md-6",2,"display","flex","flex-direction","column"],["id","photo01","type","file","formControlName","photo01",1,"form-control",3,"ngClass","change"],["id","photo02","type","file","formControlName","photo02",1,"form-control",3,"ngClass","change"],[1,"is-invalid",3,"isValidCaptcha"],[3,"ngClass",4,"ngIf"],["type","submit","value","Registrar",1,"btn","btn-primary",2,"margin-top","10px",3,"click"],[1,"btn","btn-primary",2,"margin","10px 0 0 10px",3,"click"]],template:function(t,e){1&t&&(a.TgZ(0,"form",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"label",3),a._uU(4,"Email"),a.qZA(),a.TgZ(5,"div",4),a.TgZ(6,"span",5),a._UZ(7,"i",6),a.qZA(),a._UZ(8,"input",7),a.TgZ(9,"div",8),a._uU(10),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",9),a.TgZ(12,"div",10),a.TgZ(13,"label",3),a._uU(14,"Clave"),a.qZA(),a.TgZ(15,"div",4),a.TgZ(16,"span",5),a._UZ(17,"i",11),a.qZA(),a._UZ(18,"input",12),a.TgZ(19,"div",8),a._uU(20),a.qZA(),a.qZA(),a.qZA(),a.TgZ(21,"div",10),a.TgZ(22,"label",3),a._uU(23,"Confirmaci\xf3n de clave"),a.qZA(),a.TgZ(24,"div",4),a.TgZ(25,"span",5),a._UZ(26,"i",11),a.qZA(),a._UZ(27,"input",13),a.TgZ(28,"div",8),a._uU(29),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(30,"div",1),a.TgZ(31,"div",10),a.TgZ(32,"label",3),a._uU(33,"Nombre"),a.qZA(),a._UZ(34,"input",14),a.TgZ(35,"div",8),a._uU(36),a.qZA(),a.qZA(),a.TgZ(37,"div",10),a.TgZ(38,"label",3),a._uU(39,"Apellido"),a.qZA(),a._UZ(40,"input",15),a.TgZ(41,"div",8),a._uU(42),a.qZA(),a.qZA(),a.qZA(),a.TgZ(43,"div",1),a.TgZ(44,"div",16),a.TgZ(45,"label",3),a._uU(46,"DNI"),a.qZA(),a._UZ(47,"input",17),a.TgZ(48,"div",8),a._uU(49),a.qZA(),a.qZA(),a.TgZ(50,"div",16),a.TgZ(51,"label",3),a._uU(52,"Edad"),a.qZA(),a._UZ(53,"input",18),a.TgZ(54,"div",8),a._uU(55),a.qZA(),a.qZA(),a.TgZ(56,"div",16),a.TgZ(57,"label",3),a._uU(58,"Obra Social"),a.qZA(),a._UZ(59,"input",19),a.TgZ(60,"div",8),a._uU(61),a.qZA(),a.qZA(),a.qZA(),a.TgZ(62,"div",1),a.TgZ(63,"div",20),a.TgZ(64,"label",3),a._uU(65,"Foto 01:"),a.qZA(),a.TgZ(66,"input",21),a.NdJ("change",function(t){return e.onFileSelection01(t)}),a.qZA(),a.TgZ(67,"div",8),a._uU(68),a.qZA(),a.qZA(),a.TgZ(69,"div",20),a.TgZ(70,"label",3),a._uU(71,"Foto 02:"),a.qZA(),a.TgZ(72,"input",22),a.NdJ("change",function(t){return e.onFileSelection02(t)}),a.qZA(),a.TgZ(73,"div",8),a._uU(74),a.qZA(),a.qZA(),a.qZA(),a.TgZ(75,"div",1),a.TgZ(76,"div",20),a.TgZ(77,"label",3),a._uU(78,"Captcha:"),a.qZA(),a.TgZ(79,"app-custom-captcha",23),a.NdJ("isValidCaptcha",function(t){return e.captchaValidation(t)}),a.qZA(),a.YNc(80,L,2,3,"div",24),a.qZA(),a.qZA(),a.TgZ(81,"input",25),a.NdJ("click",function(){return e.submit()}),a.qZA(),a.TgZ(82,"button",26),a.NdJ("click",function(){return e.auto()}),a._uU(83,"Auto"),a.qZA(),a.qZA()),2&t&&(a.Q6J("formGroup",e.form),a.xp6(8),a.Q6J("ngClass",a.WLB(32,D,"INVALID"===e.states.username.class,"VALID"===e.states.username.class)),a.xp6(1),a.Q6J("ngClass",a.WLB(35,V,"INVALID"===e.states.username.class,"VALID"===e.states.username.class)),a.xp6(1),a.hij(" ",e.states.username.message," "),a.xp6(8),a.Q6J("ngClass",a.WLB(38,D,"INVALID"===e.states.password.class,"VALID"===e.states.password.class)),a.xp6(1),a.Q6J("ngClass",a.WLB(41,V,"INVALID"===e.states.password.class,"VALID"===e.states.password.class)),a.xp6(1),a.hij(" ",e.states.password.message," "),a.xp6(7),a.Q6J("ngClass",a.WLB(44,D,"INVALID"===e.states.passwordGroup.class&&e.form.get("passwordGroup.confirm").dirty,"VALID"===e.states.passwordGroup.class&&e.form.get("passwordGroup.confirm").dirty)),a.xp6(1),a.Q6J("ngClass",a.WLB(47,V,"INVALID"===e.states.passwordGroup.class&&e.form.get("passwordGroup.confirm").dirty,"VALID"===e.states.passwordGroup.class&&e.form.get("passwordGroup.confirm").dirty)),a.xp6(1),a.hij(" ",e.form.get("passwordGroup.confirm").dirty?e.states.passwordGroup.message:""," "),a.xp6(5),a.Q6J("ngClass",a.WLB(50,D,"INVALID"===e.states.firstname.class,"VALID"===e.states.firstname.class)),a.xp6(1),a.Q6J("ngClass",a.WLB(53,V,"INVALID"===e.states.firstname.class,"VALID"===e.states.firstname.class)),a.xp6(1),a.hij(" ",e.states.firstname.message," "),a.xp6(4),a.Q6J("ngClass",a.WLB(56,D,"INVALID"===e.states.lastname.class,"VALID"===e.states.lastname.class)),a.xp6(1),a.Q6J("ngClass",a.WLB(59,V,"INVALID"===e.states.lastname.class,"VALID"===e.states.lastname.class)),a.xp6(1),a.hij(" ",e.states.lastname.message," "),a.xp6(5),a.Q6J("ngClass",a.WLB(62,D,"INVALID"===e.states.dni.class,"VALID"===e.states.dni.class)),a.xp6(1),a.Q6J("ngClass",a.WLB(65,V,"INVALID"===e.states.dni.class,"VALID"===e.states.dni.class)),a.xp6(1),a.hij(" ",e.states.dni.message," "),a.xp6(4),a.Q6J("ngClass",a.WLB(68,D,"INVALID"===e.states.age.class,"VALID"===e.states.age.class)),a.xp6(1),a.Q6J("ngClass",a.WLB(71,V,"INVALID"===e.states.age.class,"VALID"===e.states.age.class)),a.xp6(1),a.hij(" ",e.states.age.message," "),a.xp6(4),a.Q6J("ngClass",a.WLB(74,D,"INVALID"===e.states.obrasocial.class,"VALID"===e.states.obrasocial.class)),a.xp6(1),a.Q6J("ngClass",a.WLB(77,V,"INVALID"===e.states.obrasocial.class,"VALID"===e.states.obrasocial.class)),a.xp6(1),a.hij(" ",e.states.obrasocial.message," "),a.xp6(5),a.Q6J("ngClass",a.WLB(80,D,"INVALID"===e.states.photo01.class,"VALID"===e.states.photo01.class)),a.xp6(1),a.Q6J("ngClass",a.WLB(83,V,"INVALID"===e.states.photo01.class,"VALID"===e.states.photo01.class)),a.xp6(1),a.hij(" ",e.states.photo01.message," "),a.xp6(4),a.Q6J("ngClass",a.WLB(86,D,"INVALID"===e.states.photo02.class,"VALID"===e.states.photo02.class)),a.xp6(1),a.Q6J("ngClass",a.WLB(89,V,"INVALID"===e.states.photo02.class,"VALID"===e.states.photo02.class)),a.xp6(1),a.hij(" ",e.states.photo02.message," "),a.xp6(6),a.Q6J("ngIf",e.submitted&&!e.isValidCaptcha))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,i.mk,l.x0,J.F,i.O5],styles:["","@media (min-width: 576px) {\n        .bd-example[_ngcontent-%COMP%] {\n            padding: 1.5rem;\n            margin-right: 0;\n            margin-left: 0;\n            border-width: 1px;\n            border-top-left-radius: .25rem;\n            border-top-right-radius: .25rem;\n        }\n    }\n\n    .bd-example[_ngcontent-%COMP%] {\n        position: relative;\n        padding: 1rem;\n        margin: 1rem -.75rem 0;\n        border: solid #dee2e6;\n        border-width: 1px 0 0;\n    }\n\n    #frm_patient[_ngcontent-%COMP%] {\n      border: 1px solid rgb(222, 226, 230);\n      border-radius: 5px;\n      padding: 15px;\n    }\n  \n    .row[_ngcontent-%COMP%] {\n      margin-bottom: 20px;\n    }"]}),t})(),F=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-patient-enrollment"]],decls:4,vars:0,consts:[["id","container"],["id","header"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"h2",1),a._uU(2,"Alta Pacientes - Clinica OMED"),a.qZA(),a._UZ(3,"app-patient-registration-form"),a.qZA())},directives:[Q],styles:["","[_nghost-%COMP%] {\n        display: grid;\n        grid-template-columns: auto 800px auto;\n        grid-template-rows: 10px 600px auto;\n        \n        height: 100%;\n        padding: 30px;\n    }\n\n    #header[_ngcontent-%COMP%] {\n        grid-row: 1;\n        grid-column: 2;\n        margin:auto;\n        margin-bottom: 30px!important;\n    }\n    #container[_ngcontent-%COMP%] {\n        grid-column: 2;\n        grid-row: 2;\n    }"]}),t})();var S=n(9240),j=n(7247);function Y(t,e){if(1&t&&(a.TgZ(0,"label"),a._uU(1),a._UZ(2,"input",15),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.hij("",t.key," "),a.xp6(1),a.s9C("value",t.value)}}function E(t,e){if(1&t&&(a.TgZ(0,"div",13),a.YNc(1,Y,3,2,"label",14),a.ALo(2,"keyvalue"),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngForOf",a.lcZ(2,1,t))}}let B=(()=>{class t{constructor(){this.action=new a.vpe,this.clinicalRecords=[],this.index=0,this.filtered=[],this._filterTerm=""}get filterTerm(){return this._filterTerm}set filterTerm(t){this._filterTerm=t,this.filtered=this.filterTerm?this.performFilter(this._filterTerm):this.clinicalRecords}ngOnInit(){}previous(){this.index>0&&this.index--}next(){this.index+1<this.clinicalRecords.length&&this.index++}performFilter(t){return t=t.toLocaleLowerCase(),this.clinicalRecords.filter(e=>-1!==`${e.specialist.lastname}`.toLocaleLowerCase().indexOf(t)||-1!==e.speciality.toLocaleLowerCase().indexOf(t))}trigger(t,e){this.action.emit({action:t,appointment:e})}getValues(t,e){return this.clinicalRecords[t][e]}getDynamicFields(t){return this.clinicalRecords[t].dynamic}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-patient-clinical-records-grid"]],inputs:{clinicalRecords:"clinicalRecords",filtered:"filtered"},outputs:{action:"action"},decls:29,vars:9,consts:[["id","header",1,"borders"],[1,"title"],["id","btn_previous",1,"borders",3,"click"],[1,"fas","fa-caret-left"],["id","date-picker",1,"borders"],["id","clinical-record-container"],[1,"row","mb-2"],[1,"form-group","col-md-2"],["type","number","disabled","",1,"form-control","form-control-sm",3,"value"],["type","text","disabled","",1,"form-control","form-control-sm",3,"value"],["class","form-group col-md-4",4,"ngFor","ngForOf"],["id","btn_next",3,"click"],[1,"fas","fa-caret-right"],[1,"form-group","col-md-4"],[4,"ngFor","ngForOf"],["type","text","disabled","",1,"form-control","form-control-sm",2,"margin-top","5px",3,"value"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"span",1),a._uU(2),a.ALo(3,"date"),a.qZA(),a.qZA(),a.TgZ(4,"div",2),a.NdJ("click",function(){return e.previous()}),a._UZ(5,"i",3),a.qZA(),a.TgZ(6,"div",4),a.TgZ(7,"div",5),a.TgZ(8,"div",6),a.TgZ(9,"div",7),a.TgZ(10,"label"),a._uU(11,"Altura"),a.qZA(),a._UZ(12,"input",8),a.qZA(),a.TgZ(13,"div",7),a.TgZ(14,"label"),a._uU(15,"Peso"),a.qZA(),a._UZ(16,"input",9),a.qZA(),a.TgZ(17,"div",7),a.TgZ(18,"label"),a._uU(19,"Temperatura"),a.qZA(),a._UZ(20,"input",9),a.qZA(),a.TgZ(21,"div",7),a.TgZ(22,"label"),a._uU(23,"Presi\xf3n"),a.qZA(),a._UZ(24,"input",9),a.qZA(),a.qZA(),a.TgZ(25,"div",6),a.YNc(26,E,3,3,"div",10),a.qZA(),a.qZA(),a.qZA(),a.TgZ(27,"div",11),a.NdJ("click",function(){return e.next()}),a._UZ(28,"i",12),a.qZA()),2&t&&(a.xp6(2),a.Oqu(a.xi3(3,6,e.clinicalRecords[e.index].appointment.date,"dd/MM/yy")),a.xp6(10),a.s9C("value",e.getValues(e.index,"height")),a.xp6(4),a.s9C("value",e.getValues(e.index,"weight")),a.xp6(4),a.s9C("value",e.getValues(e.index,"temperature")),a.xp6(4),a.s9C("value",e.getValues(e.index,"pressure")),a.xp6(2),a.Q6J("ngForOf",e.getDynamicFields(e.index)))},directives:[i.sg],pipes:[i.uU,i.Nd],styles:["#header[_ngcontent-%COMP%]{grid-row:2}#body[_ngcontent-%COMP%], #header[_ngcontent-%COMP%]{grid-column:1;padding:5px}#body[_ngcontent-%COMP%]{grid-row:4}#component-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}#component-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:10px;-webkit-box-shadow:inset 0 0 6px #0000004d}#component-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;-webkit-box-shadow:inset 0 0 6px #00000080}#person-grid-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;overflow:hidden;background-color:#fff;border:2px solid #000;border-radius:8px;padding-right:8px}#person-grid-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%]{font-family:Consolas,Courier,monospace;border-collapse:collapse;width:100%;background-color:#000;border-radius:5px}#person-grid-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-family:Comic Sans MS,Comic Sans,cursive;padding:2px;text-align:center;border-collapse:collapse;color:#fff}#person-grid-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:5px;text-align:center}#person-grid-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}#person-grid-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f5f5f5}#person-grid-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:last-child > td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:5px}#person-grid-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:last-child > td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:5px}#person-grid-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:hover{background-color:#fff078}#table-wrapper[_ngcontent-%COMP%]{width:100%;padding:0;box-sizing:initial;border:2px solid #000;border-radius:8px;background-color:#fff}#table-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%]{font-family:Consolas,Courier,monospace;border-collapse:collapse;width:100%;background-color:#000;border-radius:5px}#table-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-family:Comic Sans MS,Comic Sans,cursive;padding:2px;text-align:center;border-collapse:collapse;color:#fff}#table-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:5px;text-align:center}#table-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}#table-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f5f5f5}#table-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:last-child > td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:5px}#table-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:last-child > td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:5px}#table-wrapper[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:hover{background-color:#fff078}.layout[_ngcontent-%COMP%]{border:1px solid #000;border-radius:5px;display:flex;margin:2px;padding:2px}","[_nghost-%COMP%] {\n        display: grid;\n        grid-template-columns: 1px 20px 1px 720px 1px 20px 1px;\n        grid-template-rows: 1px auto 1px auto 1px;\n        border: 1px solid grey;\n        border-radius: 5px;\n    }\n\n    .borders[_ngcontent-%COMP%] {\n        border: 1px solid grey;\n        border-radius: 5px;\n    }\n\n    #header[_ngcontent-%COMP%] {\n        grid-column: 2 / span 5;\n        grid-row: 2;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n\n    .title[_ngcontent-%COMP%] {\n        font-weight: 300;\n        font-size: larger;\n        line-height: 1.2;\n        margin-top: auto;\n        margin-bottom: auto;\n    }\n\n    #btn_previous[_ngcontent-%COMP%] {\n        grid-column: 2;\n        grid-row: 4;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        border: 1px solid grey;\n        border-radius: 5px;\n    }\n\n    #btn_next[_ngcontent-%COMP%] {\n        grid-column: 6;\n        grid-row: 4;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        border: 1px solid grey;\n        border-radius: 5px;\n    }\n\n    #date-picker[_ngcontent-%COMP%] {\n        grid-column: 4;\n        grid-row: 4;\n        display: flex;\n        flex-direction: column;\n    }\n\n    #row[_ngcontent-%COMP%] {\n        display: flex;\n        flex-direction: row;\n        margin-bottom: 5px;\n        margin-top: 5px;\n    }\n\n    #clinical-record-container[_ngcontent-%COMP%] {\n      max-width: 100%;\n      display: flex;\n      flex-direction: column  ;\n      align-items: center;\n      justify-content: center;\n      padding: 10px;\n    }\n\n    .box[_ngcontent-%COMP%] {\n      padding: 150px;\n      margin: 0 15px 0 15px;\n    }"]}),t})();function $(t,e){if(1&t&&(a.TgZ(0,"div",23),a._UZ(1,"app-patient-clinical-records-grid",24),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("clinicalRecords",t.clinicalRecords)("filtered",t.clinicalRecords)}}const H=[{path:"profile",component:(()=>{class t{constructor(t,e,n,i,o,a){this.auth=t,this.patiService=e,this.pdf=n,this.loadingService=i,this.appoService=o,this.clinService=a,this.enabled=!0,this.clinicalRecords=[]}ngOnInit(){this.user=this.auth.getCurrentUserCredentials(),this.patiService.getUserData(this.user.uid).subscribe(t=>{this.userData=t}),this.patiService.getClinicalRecordsById(this.user.uid).subscribe(t=>{t.map(t=>{t.appointment.date=new Date(1e3*t.appointment.date.seconds)}),this.clinicalRecords=t})}getUserSpecialities(){return this.user.roles.filter(t=>"admin"!==t&&"specialist"!==t&&"patient"!==t&&"user"!==t)}enableScheduler(){this.enabled=!0}downloadPDF(t){this.loadingService.emitChange(!0),this.patiService.getClinicalRecordsById(this.user.uid).subscribe(t=>{t.map(t=>{t.appointment.date=new Date(1e3*t.appointment.date.seconds)}),this.generatePDF(t),this.loadingService.emitChange(!1)})}generatePDF(t){console.log(t);let e=[];t.map(t=>{const n=[],i=[];t.dynamic.map(t=>{n.push(Object.keys(t)[0]),i.push(Object.values(t)[0])});let o=new Date(1e3*t.appointment.date).toUTCString();e.push({text:`${t.appointment.specialist.firstname} ${t.appointment.specialist.lastname} - ${t.appointment.speciality} - ${o}`,style:"subheader"},{style:"tableExample",table:{body:[["Altura","Peso","Temperatura","Presi\xf3n"].concat(n),[`${t.height}`,`${t.weight}Kg`,`${t.temperature}`,`${t.pressure}`].concat(i)]}},{text:"Diagnostico:",style:"subheader"},`${t.appointment.diagnosis}`,{text:"Comentarios:",style:"subheader"},`${t.appointment.review}`)}),this.pdf.generatePDF({watermark:{text:"CLINICA OMED",color:"blue",opacity:.3,bold:!0,italics:!1},content:[{text:`Historial Cl\xednico | ${t[0].appointment.patient.firstname} ${t[0].appointment.patient.lastname}`,style:"header"}].concat(e)})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.$),a.Y36(r.e),a.Y36(S.F),a.Y36(k.x),a.Y36(c.H),a.Y36(j.c))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-patient-profile"]],decls:54,vars:10,consts:[["id","container",1,"container"],[1,"main-body",2,"padding-top","30px"],[1,"row","gutters-sm"],[1,"col-md-4","mb-3"],[1,"card"],[1,"card-body"],[1,"d-flex","flex-column","align-items-center","text-center"],["alt","Admin","width","150",1,"rounded-circle",3,"src"],[1,"mt-3"],[1,"text-secondary","mb-1"],[1,"col-md-8"],[1,"card","mb-3"],[1,"row"],[1,"col-sm-3"],[1,"mb-0"],[1,"col-sm-9","text-secondary"],[1,"col-sm-12"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fas","fa-file-pdf"],["id","week-scheduler",1,"card","h-100"],["id","div-title"],[1,"mb-1",2,"align-self","flex-start"],["id","div-scheduler",4,"ngIf"],["id","div-scheduler"],[3,"clinicalRecords","filtered"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"div",4),a.TgZ(5,"div",5),a.TgZ(6,"div",6),a._UZ(7,"img",7),a.TgZ(8,"div",8),a.TgZ(9,"h4"),a._uU(10),a.qZA(),a.TgZ(11,"p",9),a._uU(12),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(13,"div",10),a.TgZ(14,"div",11),a.TgZ(15,"div",5),a.TgZ(16,"div",12),a.TgZ(17,"div",13),a.TgZ(18,"h6",14),a._uU(19,"Nombre"),a.qZA(),a.qZA(),a.TgZ(20,"div",15),a._uU(21),a.qZA(),a.qZA(),a._UZ(22,"hr"),a.TgZ(23,"div",12),a.TgZ(24,"div",13),a.TgZ(25,"h6",14),a._uU(26,"Email"),a.qZA(),a.qZA(),a.TgZ(27,"div",15),a._uU(28),a.qZA(),a.qZA(),a._UZ(29,"hr"),a.TgZ(30,"div",12),a.TgZ(31,"div",13),a.TgZ(32,"h6",14),a._uU(33,"DNI"),a.qZA(),a.qZA(),a.TgZ(34,"div",15),a._uU(35),a.qZA(),a.qZA(),a._UZ(36,"hr"),a.TgZ(37,"div",12),a.TgZ(38,"div",13),a.TgZ(39,"h6",14),a._uU(40,"Edad"),a.qZA(),a.qZA(),a.TgZ(41,"div",15),a._uU(42),a.qZA(),a.qZA(),a._UZ(43,"hr"),a.TgZ(44,"div",12),a.TgZ(45,"div",16),a.TgZ(46,"button",17),a.NdJ("click",function(){return e.downloadPDF(e.user)}),a._UZ(47,"i",18),a._uU(48," Descargar PDF"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(49,"div",19),a.TgZ(50,"div",20),a.TgZ(51,"h3",21),a._uU(52,"Historial Cl\xednico"),a.qZA(),a.qZA(),a.YNc(53,$,2,2,"div",22),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(7),a.s9C("src",e.user.photoUrls[0],a.LSH),a.xp6(3),a.AsE("",e.user.firstname," ",e.user.lastname,""),a.xp6(2),a.hij("Obra Social: ",e.userData.data.obrasocial,""),a.xp6(9),a.AsE(" ",e.user.firstname," ",e.user.lastname," "),a.xp6(7),a.hij(" ",e.user.username," "),a.xp6(7),a.hij(" ",e.userData.data.dni," "),a.xp6(7),a.hij(" ",e.userData.data.age," "),a.xp6(11),a.Q6J("ngIf",e.enabled))},directives:[i.O5,B],styles:["table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center;padding:5px}table[_ngcontent-%COMP%]{margin-bottom:15px}#container[_ngcontent-%COMP%]{width:825px}.container[_ngcontent-%COMP%]{width:825px!important}@media (min-width:768px){.container[_ngcontent-%COMP%], .container-md[_ngcontent-%COMP%], .container-sm[_ngcontent-%COMP%]{max-width:825px!important}}#week-scheduler[_ngcontent-%COMP%]{padding:5px;display:grid;grid-template-columns:5px 2fr 5px 2fr 5px;grid-template-rows:5px auto 5px auto 5px}#div-title[_ngcontent-%COMP%]{display:flex;width:100%;grid-column:2;grid-row:2;padding:5px}.title[_ngcontent-%COMP%]{font-weight:300;font-size:large;line-height:1.2;margin-top:auto;margin-bottom:auto}#div-select[_ngcontent-%COMP%]{display:flex;width:100%;grid-column:4;grid-row:2}#div-scheduler[_ngcontent-%COMP%], #div-select[_ngcontent-%COMP%]{align-items:center;justify-content:center;padding:5px}#div-scheduler[_ngcontent-%COMP%]{display:block;height:100%;grid-column:2/span 3;grid-row:4}"]}),t})(),data:{animation:"PatientRegistration"}},{path:"enrollment",component:F,data:{animation:"PatientRegistration"}},{path:"agenda",component:P,data:{animation:"PatientRegistration"}}];let R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[o.Bz.forChild(H)],o.Bz]}),t})();var G=n(2145);let W=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[R,i.ez,G.n,l.u5,l.UX]]}),t})()}}]);